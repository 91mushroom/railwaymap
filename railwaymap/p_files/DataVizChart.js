(window.webpackJsonpdatavizCharts=window.webpackJsonpdatavizCharts||[]).push([[19],{531:function(t,n,e){(function(t,n,r){
/*!***********************************************
Copyright (c) 2014, Neusoft Inc.
All rights reserved.
SaCa DataViz Version 2.0.0
************************************************/
!function(t){var i,o=e(561);function i(){}(i=new i).Chart=e(597),i.Theme=e(807),i.version="2.1.0",i.idBase=0,i.loading=[],i.dragFlag=!1,i.dragNum=0,i.dragLastNum=0,i.adaption=[],i.fontRatio=1,i.percentageAdaption={},i.lastURLRst={},i.setArray=[],i.instances=[],i.svg=o.svg,i.vml=o.vml,i.code="",i.json=function(t,e,r){if(o.d3.json(t,function(n){i.lastURLRst[t]={intervalHandler:void 0,rst:n},e(n)}),r&&n.isNumber(r))var a=setInterval(function(){o.d3.json(t,function(r){var o=i.lastURLRst[t].rst;i.lastURLRst[t].intervalHandler=a,n.isEqual(r,o)||(i.lastURLRst[t].rst=r,e(r))})},r)},i.csv=function(t,e,r){if(o.d3.text(t,"text/csv",function(n){var r=n&&o.d3.csv.parseRows(n);i.lastURLRst[t]={intervalHandler:void 0,rst:r},e(r)}),r&&n.isNumber(r))var a=setInterval(function(){o.d3.text(t,"text/csv",function(r){var s=i.lastURLRst[t].rst;i.lastURLRst[t].intervalHandler=a;var u=r&&o.d3.csv.parseRows(r);n.isEqual(u,s)||(i.lastURLRst[t].rst=u,e(u))})},r)},i.clearPolling=function(t){if(t&&i.lastURLRst[t]){var n=i.lastURLRst[t].intervalHandler;window.clearInterval(n),i.lastURLRst[t].intervalHandler=void 0}},i.csvRemap=function(t){for(var n=[],e=t.shift(),r=1;r<e.length;r++)for(var i=0;i<t.length;i++)n.push([e[r],t[i][0],parseFloat(t[i][r])]);return n},i._topicStack={},i._type=function(t){var n=typeof t;return("object"===n?null===t?"null":Object.prototype.toString.call(t).slice(8,-1):n).toLowerCase()},i._namespace=function(t,n,e){if(/\.{2,}|\.$/g.test(n)||!/^[a-zA-Z_\$][a-zA-Z0-9_\.\$]*$/g.test(n))throw new Error("DataViz Error # The topic is illegal !");var r=i._topicStack,o=r,a=n.split("."),s=a.length;if(t){for(var u=0;u<s;u++){"__Listeners__"!==(c=a[u])&&(o=r,r=r[c]=r[c]||{})}"function"===i._type(e)&&e.call(r,o,c)}else for(u=0;u<s;u++){var c;if("__Listeners__"!==(c=a[u])){var h=r[c];if(!h)break;o=r,r=h,u===s-1&&"function"===i._type(e)&&e.call(r,o,c)}}},i._notifyUpdate=function(t,n){for(var e=t.__Listeners__||[],r=0,i=e.length;r<i;r++)e[r].call(window,n);for(var r in t)"__Listeners__"!==r&&arguments.callee(t[r],n)},i._deleteTopic=function(t){for(var n in t){if("__Listeners__"!==n)return!1;if(t[n].length)return!1}return!0},i._removeListeners=function(t,n,e,r){for(var o=t.__Listeners__||[],a=[],s=0,u=o.length;s<u;s++){var c=o[s];c!==n&&a.push(c)}t.__Listeners__=a,i._deleteTopic(t)&&delete e[r]},i.subscribe=function(t,n){if(t&&n){var e=i._type(t),r=i._type(n),o=function(){if(this.__Listeners__=this.__Listeners__||[],"function"===r)this.__Listeners__.push(n);else if("array"===r)for(var t=0,e=n.length;t<e;t++){var o=n[t];"function"===i._type(o)&&this.__Listeners__.push(o)}};if("string"===e)i._namespace(!0,t,o);else if("array"===e)for(var a=0,s=t.length;a<s;a++){var u=t[a];"string"===i._type(u)&&i._namespace(!0,u,o)}}},i.publish=function(t,n){if(t){var e=i._type(t),r=function(){i._notifyUpdate(this,n)};if("string"===e)i._namespace(!1,t,r);else if("array"===e)for(var o=0,a=t.length;o<a;o++){var s=t[o];i._namespace(!1,s,r)}}},i.unsubscribe=function(t,n){var e=arguments.length;if(e){var r=i._type(t),o=i._type(n),a=function(t,r){if(1===e)delete t[r];else if("function"===o)i._removeListeners(this,n,t,r);else if("array"===o)for(var a=0,s=n.length;a<s;a++){var u=n[a];"function"===i._type(u)&&i._removeListeners(this,u,t,r)}};if("string"===r)i._namespace(!1,t,a);else if("array"===r)for(var s=0,u=t.length;s<u;s++){var c=t[s];"string"===i._type(c)&&i._namespace(!1,c,a)}}},i.extend=function(t,n){"function"!=typeof t&&(n=t,t=function(){}),n=n||{};var e=function(){t.apply(this,arguments),this.constructor===t&&this.initialize&&this.initialize.apply(this,arguments)};return(e.prototype=new t).constructor=t,r.extend(e.prototype,n),e},i.more=function(t,n,e,r){var i,o,a,s=n*e;return r=r||function(t){return t[0]},s+e>=t.length?(a=!1,o=t.length-1):(a=!0,o=s+e-1),a?(i=t.slice(s,o)).push(r(t.slice(o))):i=t.slice(s),i},i.Chart.prototype.setOptions=function(t){var e={};for(var r in this.defaults)e[r]=this.defaults[r];for(var r in t){var i=t[r];if(!n.isObject(i)||n.isArray(i)||n.isFunction(i))e[r]=t[r];else if(e[r])for(var o in i)e[r][o]=i[o];else e[r]=t[r]}return this.defaults=e,this.defaults},i.getDivWH=function(){for(var t=0,n=i.adaption.length;t<n;t++){var e=i.adaption[t].id,o=r("#"+e).width(),a=r("#"+e).height();i.adaption[t].currentWH=[o,a]}},i.destroy=function(t){if(0!==arguments.length&&t.destroy)t.destroy();else for(var n=0,e=i.instances.length;n<e;n++)for(var r in i.instances[n])"function"!=typeof r&&delete i.instances[n][r]};i.createCanvas=function(t,n,e){t.style.position="relative";var i=function(t){var n=null;if("string"==typeof t?n=document.getElementById(t):t.nodeName?n=t:t.size()>0&&(n=t[0]),!n)throw new Error("DataViz Error # DOM Error : Please specify a correct node to render.");return n}(t),a=new o.Raphael(i,n||600,e||600);if(r(a.canvas).css({position:"absolute",left:0,top:0}),a&&"object"==typeof a)return a;throw new Error("DataViz Error # Canvas Error : Create canvas failed!")},i.add=function(t,n){i.Theme.add(t,n)},i.changeTheme=function(t){return i.Theme.changeTheme(t)},i.getInstanceByDom=function(t){for(var n,e=0,r=i.instances.length;e<r;e++)if(i.instances[e].node===t){n=i.instances[e];break}return n},i.getData=o.getData,i.dataFilter=o.dataFilter,i.uniq=o.uniq,i.isMobile=o.isMobile(),t.exports=i}(t)}).call(this,e(10)(t),e(16),e(18))},559:function(t,n,e){var r={"./basecomponent.js":567,"./bundle.js":803,"./calendar.js":802,"./chord.js":801,"./dot.js":800,"./doubleline.js":799,"./hotmap.js":798,"./pinterest.js":797,"./rose.js":796,"./stream.js":795,"./sunburst.js":794,"./tagcloud.js":793,"./tree.js":792};function i(t){var n=o(t);return e(n)}function o(t){var n=r[t];if(!(n+1)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=559},561:function(t,n,e){(function(t,n){
/*!***********************************************
Copyright (c) 2014, Neusoft Inc.
All rights reserved.
SaCa DataViz Version 2.0.0
************************************************/
!function(t){var r=function(){};function i(t,e){var r=[];if(t.length<2)return r;var i=e||t[0];return n.each(t.slice(1),function(t){var e={};n.each(i,function(n,r){e[n]=t[r]}),r.push(e)}),r}String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},r.Raphael=e(814),r.d3=e(813),r.svg=r.Raphael.svg,r.vml=r.Raphael.vml,r.detect=function(t){var e=t[0];return n.isArray(e)?n.all(e,function(t){return!n.isNumber(t)})?"Table_WITH_HEAD":"Table":n.isObject(e)?"List":"Unknown"},r.tablify=function(t){if(!t.length)return[];var e=n.keys(t[0]),r=e.length,i=[e];return n.each(t,function(t){var o=n.values(t);o.length>r&&(e=n.keys(t)),i.push(o)}),i.shift(),i.unshift(e),i},r.collectionify=i,r.limit=function(t,n,e){var r;if(void 0!==n&&(r=t<n?n:t),void 0!==e){if(e<n)throw new Error("DataViz Error # The max value should bigger than min value");r=t>e?e:t}return r},r.sum=function(t,n){var e,r,i=0;if(void 0===n)for(e=0,r=t.length;e<r;e++)i+=t[e];else if("function"==typeof n)for(e=0,r=t.length;e<r;e++)i+=n(t[e]);else{if("string"!=typeof n&&"number"!=typeof n)throw new Error("DataViz Error # iterator error");for(e=0,r=t.length;e<r;e++)t[e]&&(i+=t[e][n])}return i},r.tickRange=function(t,n,e){return function(t,n){var e=function(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("DataViz Error # Infinite range");var r,i=[],o=function(t){for(var n=1;t*n%1;)n*=10;return n}(Math.abs(e)),a=-1;if(t*=o,n*=o,(e*=o)<0)for(;(r=t+e*++a)>n;)i.push(r/o);else for(;(r=t+e*++a)<n;)i.push(r/o);return i}(e[0],e[1],e[2])}([t,n],e)},r.tickFormat=function(t){return isNaN(t)||(t>=1e9?t=t/1e9+"B":t>=1e6?t=t/1e6+"M":t>=1e3&&(t=t/1e3+"K")),t},r.commafy=function(t){if(""==(t+"").trim())return"";if(isNaN(t))return"";if(/^.*\..*$/.test(t+="")){var n=t.lastIndexOf("."),e=t.substring(0,n),r=t.substring(n+1,t.length);e+="";for(var i=/(-?\d+)(\d{3})/;i.test(e);)e=e.replace(i,"$1,$2");t=e+"."+r}else for(t+="",i=/(-?\d+)(\d{3})/;i.test(t);)t=t.replace(i,"$1,$2");return t},r.delcommafy=function(t){return""==(t+"").trim()?"":t=t.replace(/,/gi,"")},r.getIndexOfValueRange=function(t,n){for(var e=0;e<t.length;e++)if(n>=t[e][0]&&n<=t[e][1])return e;if(void 0!=n)throw new Error("DataViz Error # Legend Error :Legend failed to satisfy the requirements.")},r.getData=function(t,e,r){var o=i(t),a=[];return a=r?n.where(o,r):o,n.map(a,function(t){return n.pick(t,e)})},r.dataFilter=function(t,e,r){var o=i(t),a=n.groupBy(o,r),s=[];return n.each(a,function(t,r){var i=[];i[0]=r;for(var o=0;o<e.length;o++)i[o+1]=0;n.each(t,function(t,n){for(var r=0;r<e.length;r++)i[r+1]+=parseInt(t[e[r]])}),s.push(i)}),s},r.uniq=function(t,e){return n.uniq(t,function(t){return t[e]})},r.isMobile=function(){return!!navigator.userAgent.match(/IEMobile|BlackBerry|Android|iPod|iPhone|iPad/i)},r.setAnimation=function(t,n,e,r){t?n.animate(e,r):n.attr(e)},t.exports=r}(t)}).call(this,e(10)(t),e(16))},563:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(561),o=function(){},a=["aqua","black","blue","fuchsia","gray","green","lime","maroon","navy","olive","purple","red","silver","teal","white","yellow"],s=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;function u(t,n){var e=n,r=t%(2*e.length),i=r%2==0?r/2:(r-1)/2,o=t%2;return e[i][o]&&1!=e[i][o].length?e[i][o]:n[t]}o.getThemeColor=function(t){var n=r.Theme;return r.instances[0]?n.get("COLOR_ARGS",r.instances[0].node,r.code,t):n.get("COLOR_ARGS",void 0,r.code,t)},o.getColor=function(t,e,r,i,a){if(i&&n.isNumber(t)){for(var s=n.pluck(e,"name"),c=0,h=s.length;c<h;c++){var l=s[c].split("-"),f=l[0],d=l[1],p=Number(f.substring(f.indexOf("[")+1,f.length)),g=Number(d.substring(0,d.indexOf("]")));if(t>=p&&t<=g)return e[c].color}return a||"black"}var m,v=n.where(e,{name:t});return v.length&&o.colorDetect(v[0].color)?m=v[0].color:(m=u(e.length,"custom"==a?i:r),e.push({name:t,color:m})),m},o.getSpecialColor=function(t,n){var e=void 0;if(t){var r=t(n);o.colorDetect(r)&&(e=r)}return e},o.getDiscreteColor=function(){var t=this.getThemeColor();if(!n.isArray(t))throw new Error("DataViz Error # Color Error : The color should be Array.");var e=t.length,r=[];if(n.isArray(t[0]))for(var i=0,o=t[i].length;i<o;i++)r.push(t[i][0]);else r=t;return function(t){return r[t%e]}},o.gradientColor=function(t,e){var r=[];if(n.isNumber(t)){var o=this.getThemeColor();r.push(u(2*t,o)),r.push(u(2*t+1,o))}else n.isArray(t)&&(r=t);var a,s,c=r[0],h=r.length;return 1===h?(s=i.Raphael.color(r[0]),a=i.Raphael.hsb(s.h/360,(s.s-30)/100,1)):a=r[h-1],"special"===(e=e||"normal ")?function(t){var n,e,r=i.Raphael.color(c),o=i.Raphael.color(a),s=360*r.h,u=360*o.h,l=20*r.h,f=20*o.h;l>=f?(n=360-s+u,e=h-l+f):(n=u-s,e=f-l);var d=(s+n*t)/360,p=(70+5*Math.abs(4-(l+e*t)%8))/100,g=(100-5*Math.abs(4-(l+e*t)%8))/100;return i.Raphael.hsb(d,p,g)}:i.d3.interpolateRgb.apply(null,[c,a])},o.colorDetect=function(t){if(t){if(0===t.indexOf("#"))return"hex";if(0===t.indexOf("rgba"))return"rgba";if(0===t.indexOf("rgb"))return"rgb";if(0===t.indexOf("hsb"))return"hsb";if(0===t.indexOf("hsl"))return"hsl";if(-1!=n.indexOf(a,t))return"htmlColor"}},o.rgbToHex=function(t){if(/^(rgb|RGB)/.test(t)){for(var n=t.replace(/(?:\(|\)|rgba|rgb|RGB)*/g,"").split(","),e="#",r=0;r<3;r++){var i=Number(n[r]).toString(16);1===i.length&&(i="0"+i),"0"===i&&(i+=i),e+=i}return 7!==e.length&&(e=t),e}if(!s.test(t))return t;var o=t.replace(/#/,"").split("");if(6===o.length)return t;if(3===o.length){var a="#";for(r=0;r<o.length;r+=1)a+=o+o;return a}},o.hexToRgb=function(t){var n=t.toLowerCase();if(n&&s.test(n)){if(4===n.length){for(var e="#",r=1;r<4;r+=1)e+=n.slice(r,r+1).concat(n.slice(r,r+1));n=e}var i=[];for(r=1;r<7;r+=2)i.push(parseInt("0x"+n.slice(r,r+2)));return"RGB("+i.join(",")+")"}return n},o.setColor=function(t,e,r,i){switch(t){case"random":return this.getThemeColor(i);case"discrete":for(var o=[],a=0;a<r;a++){var s=this.getDiscreteColor();o.push(s(a))}return o;case"custom":if(e){var u=[],c=[];return n.each(e,function(t,n){c.push(t),n%2==1&&(u.push(c),c=[])}),u}throw new Error("DataViz Error # Color Error : Please specify the legendColor.");case"gradient":if(e){var h=[];n.each(e,function(t){h.push(t.color)});var l=this.gradientColor(h,"special"),f=1/r,d=[];for(a=0;a<r;a++)d.push(l(a*f));var p=Math.floor(r/2);for(s=function(t){return t%2==0?d[p+t/2]:d[p-(t+1)/2]},o=[],a=0;a<d.length;a++)o.push(s(a));return o}throw new Error("DataViz Error # Color Error : Please specify the legendColor.");default:return this.getThemeColor(i)}},t.exports=o}(t)}).call(this,e(10)(t),e(16))},566:function(t,n,e){(function(t,n){!function(t){var r=e(561);function o(t){for(var n in t){if(/^(-?\d+)(\.\d+)?$/.test(t[n])){var e=parseFloat(t[n]);isNaN(e)||(t[n]=e)}}}function a(t){var n=[];for(var e in t)n.splice(t[e],0,e);if(!n.length)throw new Error("DataViz Error # Mapping Error : please specify the mapping object!");return n}function s(){function t(e){var r={};for(var i in e)null==e[i]&&(e[i]=""),r[i]="object"!=typeof e[i]||n.isArray(e[i])?e[i]:t(e[i]);return r}var e=arguments[0],r=[],i=e.length;if(n.isArray(e[0]))r=function(t){for(var n=[],e=t.length,r=0;r<e;r++)n[r]=t[r];return n}(e);else if(n.isObject(e[0]))for(var o=0;o<i;o++)r[o]=t(e[o]);return r}String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};var u=function(){};u.prototype.toList=function(t,e){var i,u;if(t=s(t),u=a(e),!e)throw new Error("DataViz Error # Mapping Error : please specify the mapping object!");if(!t||0==t.length)return{source:t,dimensions:u};switch(r.detect(t)){case"Table_WITH_HEAD":i=r.collectionify(t);break;case"Table":for(var c=[],h=0,l=t[0].length;h<l;h++)c.push(h);i=r.collectionify(t,c);break;case"List":i=t;break;case"Unknown":throw new Error("DataViz Error # Source Error : No valid source specified.")}return function(t){n.each(t,function(t){o(t)})}(i),{source:i,dimensions:u}},u.prototype.process=function(t){n.keys(retSource[0]),n.each(retSource,function(t){for(var n in t){var e=parseFloat(t[n]);isNaN(e)||(t[n]=e)}})},u.prototype.getSource=function(t,e){if(!t)throw new Error("DataViz Error # Source Error : No valid source specified.");if(e)switch(e.type){case"chart":return function(){var t=arguments[0].source,e=arguments[0].dimensions,i=arguments[0].dimensionType,o={},a=r.tablify(t),s=a[0];if(!s)return{source:null,dimensions:null,dimensionType:null,dimensionDomain:null};if(void 0===i){i={};for(var u=0,c=s.length;u<c;u++){for(var h="quantitative",l=1,f=a.length;l<f;l++){var d=a[l][u];if(d&&!n.isNumber(d)){h="ordinal";break}}i[s[u]]=h}}for(var u=0,c=s.length;u<c;u++){var p=s[u];"quantitative"===i[p]?o[p]=r.d3.extent(t,function(t){return Math.abs(t[p])}):o[p]=t.map(function(t){return t[p]})}return{source:t,dimensions:e,dimensionType:i,dimensionDomain:o}}(t);case"legend":return function(t,e){if(n.isString(e.data))return n.uniq(n.pluck(t,e.data));if(n.isArray(e.data)){var i=[];return n.each(e.data,function(o,a){if(n.isString(o))i.push(o);else if(n.isArray(o)){var s="";if(n.each(o,function(t){s+=t+"-"}),e.showStatistics){var u=[];if(!u.length)for(var c=0;c<t.length;c++){var h=r.getIndexOfValueRange(e.data,t[c].value);u[h]?u[h]+=1:u[h]=1}var l=t.length,f=u[a],d="["+s.substring(0,s.length-1)+"] "+(f/l*100).toFixed(1)+"%";i.push(d)}else i.push("["+s.substring(0,s.length-1)+"]")}}),i}}(t,e)}},u.prototype.csvRemap=function(t){for(var n=[],e=t.shift(),r=1;r<e.length;r++)for(var i=0;i<t.length;i++)n.push([e[r],t[i][0],parseFloat(t[i][r])]);return n},u.prototype.commafy=function(t){if(""==(t+"").trim())return"";if(isNaN(t))return"";if(/^.*\..*$/.test(t+="")){var n=t.lastIndexOf("."),e=t.substring(0,n),r=t.substring(n+1,t.length);e+="";for(var i=/(-?\d+)(\d{3})/;i.test(e);)e=e.replace(i,"$1,$2");t=e+"."+r}else for(t+="",i=/(-?\d+)(\d{3})/;i.test(t);)t=t.replace(i,"$1,$2");return t},u.prototype.delcommafy=function(t){return""==(t+"").trim()?"":t=t.replace(/,/gi,"")},u.prototype.arrayToTreeJson=function(t,e){if(!n.isArray(t))return t;var r=[t[0][0],t[0][1],t[0][2],t[0][3],t[0][4]];if(0==e[r[0]]&&1==e[r[1]]&&2==e[r[2]]&&3==e[r[3]]){var o,a=[];for(i=1,l=t.length;i<l;i++){var s,u,c=t[i],h=a[i-1]=[];for(s=0,u=r.length;s<u;s++)h.push(c[e[r[s]]])}var f={};if(a.forEach(function(t,n){if(""===t[0])throw new Error("DataViz Error # Source Error : ID can not be empty(line:"+(n+1)+").");if(null===t[3]||void 0===t[3]||""===t[3]){if(o)throw new Error("DataViz Error # Source Error : 2 or more lines have an empty parentID(line:"+(n+1)+").");o=t[0]}if(f[t[0]])throw new Error("DataViz Error # Source Error : 2 or more lines have same ID: "+t[0]+"(line:"+(n+1)+").");f[t[0]]={},f[t[0]][r[0]]=t[0],f[t[0]][r[1]]=t[1],f[t[0]][r[2]]=t[2],f[t[0]].child=[],void 0!==r[4]&&(f[t[0]][r[4]]=t[4])}),!o&&0!=o)throw new Error("DataViz Error # Source Error : No root node defined.");a.forEach(function(t,n){if(null!==t[3]&&void 0!==t[3]&&""!==t[3]){var e=f[t[3]];if(!e)throw new Error("DataViz Error # Source Error : Can not find parent with ID "+t[3]+"(line:"+(n+1)+").");e.child.push(t[0])}});var d=function(t){var n=f[t];if(0===n.child.length){if(isNaN(parseFloat(n[r[2]])))throw new Error("DataViz Error # Source Error : Leaf node's size is not a number(name:"+n.name+").");return(e={})[r[0]]=n[r[0]],e[r[1]]=n[r[1]],e[r[2]]=n[r[2]],void 0!==r[4]&&(e[r[4]]=n[r[4]]),e}var e,i=[];return n.child.forEach(function(t){i.push(d(t))}),(e={})[r[0]]=n[r[0]],e[r[1]]=n[r[1]],e.children=i,void 0!==r[4]&&(e[r[4]]=n[r[4]]),e};return d(o)}throw new Error("DataViz Error # Source Error : please specify correct map.")},u.prototype.getDimensions=a,u.prototype.clone=s,u.prototype.string2Number=o,t.exports=new u}(t)}).call(this,e(10)(t),e(16))},567:function(t,n,e){(function(t,n,r){
/*!***********************************************
Copyright (c) 2014, Neusoft Inc.
All rights reserved.
SaCa DataViz Version 2.0.0
************************************************/
!function(t){var i=e(596),o=e(531),a=e(561),s=e(806),u=e(805),c=e(804),h=o.extend(i,{type:"BaseComponent",initialize:function(){this.spliceProp={legend:["showLegend","colorMode","legendColor","valueRange","typeName","rectColor","leftLegendWidth","legendPosition","topLegendHeight","showStatistics","marginLeft","position","marginTop","data","legendStyle"],floatTag:["tipStyle","tipFormat","showTips"],title:["caption","captionFont"]},this.changeProp={sorted:"isSorted",sort:"isSorted",yearStart:"startYear",yearEnd:"endYear",donutTextAttr:"textStyle",graduationTextAttr:"graduationTextStyle",color:"legendColor",hasGraduation:"showGraduation",hasGraduationAmount:"showGraduationAmount",onClickChord:"onClick",onDonutTipFormat:"donutTipFormat",onChordTipFormat:"chordTipFormat",color:"arcColor",onDblclick:"onDblClick",onRootClick:"onLeafClick",angle:"rotateAngle",onSpecialBubbleColor:"onSpecialColor",autoHeight:"adaption"},this.v3keys=["chart","title","legend","floatTag"]}});h.prototype.own=function(t){return t.setOptions(this.defaults),t.owner=this,this.widgets.push(t),t},h.prototype.validateSource=function(t){var e="";if(t)if(n.isArray(t))switch(a.detect(t)){case"Table_WITH_HEAD":t[1]||(e="没有需要展示的数据");break;case"List":t[0]&&0!=n.keys(t[0]).length||(e="没有需要展示的数据");break;case"Unknown":e="提供的数据格式不正确"}else n.isObject(t)?0==n.keys(t).length&&(e="没有需要展示的数据"):e="提供的数据格式不正确";else e="未能取到数据";if(e){this.isLoaded(this.node);var i=r(this.node).height();return r(this.node).html("<p style='width:100px;color:#a94442; font-family:Microsoft YaHei; line-height:"+i+"px; margin: 0 auto;'>"+e+"</p>"),!1}return!0},h.prototype.buildStructure=function(t){var e={chart:{},floatTag:{}};for(var r in t){for(var i in this.spliceProp)n.contains(this.spliceProp[i],r)&&(e[i]?e[i]:e[i]={},e[i][r]=t[r],delete t[r]);void 0!=t[r]&&(e.chart[r]=t[r],delete t[r])}return this._judgeWidthHeight(e),this._buildLegendTag(e),this._buildFloatTag(e),this._buildTitle(e),e},h.prototype._judgeWidthHeight=function(t){t.chart.width&&!t.chart.height?t.chart.height=t.chart.width:!t.chart.width&&t.chart.height&&(t.chart.height=t.chart.width=500)},h.prototype._buildLegendTag=function(t){if(t.legend)if(t.legend.showLegend){var e=t.legend.rectColor||t.legend.valueRange;if(e&&"custom"==t.legend.colorMode){var r=[],i=[];e[0].min&&n.each(e,function(t){r.push([t.min,t.max]),i.push(t.color)}),e[0].range&&n.each(e,function(t){r.push(t.range);var n={};n.name="["+t.range.toString()+"]",n.color=t.color,i.push(n)}),t.legend.data=r,t.legend.legendColor=i}}else delete t.legend},h.prototype._buildFloatTag=function(t){if(t.floatTag){var n=t.floatTag.tipStyle;if(n)for(var e in n)t.floatTag[e]=n[e];delete t.floatTag.tipStyle}},h.prototype._buildTitle=function(t){if(t.title){var n=t.title;if(n)for(var e in n)t.title[e]=n[e]}},h.prototype.isV2=function(t){return!t.chart},h.prototype.replaceOldName=function(t){var e=n.keys(this.changeProp);for(var r in t)n.contains(e,r)&&(t[this.changeProp[r]]=t[r],delete t[r])},h.prototype._saveInitWH=function(t){(o.adaption.push({id:this.node.id,obj:this,initialWH:[t.width,t.height]}),o.vml)&&r("#"+this.node.id).css("overflow","hidden");t.width=r(this.node).width(),t.height=r(this.node).height()},h.prototype._saveInitPercentageWH=function(){var t=r(this.node).parent(),n=t.width(),e=t.height(),i=r(this.node).width(),a=r(this.node).height(),s=parseInt(i/n*100)+"%",u=parseInt(a/e*100)+"%";o.percentageAdaption[this.node.id]=[s,u]},h.prototype.applyAdaption=function(t){if(t.chart.adaption){var e=this;(r=n.find(o.adaption,function(t){return t.id==e.node.id}))?r.initialWH=o.percentageAdaption[this.node.id]:o.adaption.push({id:this.node.id,obj:this,initialWH:o.percentageAdaption[this.node.id]})}else{for(var r=[],i=0;i<o.adaption.length;i++)o.adaption[i].id!=this.node.id&&r.push(o.adaption[i]);o.adaption=r}},h.prototype.checkOptions=function(t){if(!t.chart)throw new Error("DataViz Error # Chart Error : Please create a chart module. ");for(var n in this._saveInitPercentageWH(),t.chart.adaption?this._saveInitWH(t.chart):(r(this.node).width(t.chart.width),r(this.node).height(t.chart.height)),t)t[n].type=n},h.prototype.checkContainer=function(t){var n=null;if("string"==typeof t?n=document.getElementById(t):t.nodeName?n=t:t.size()>0&&(n=t[0]),!n)throw new Error("DataViz Error # DOM Error : Please specify a correct node to render.");return r(n).css({position:"relative"}),n},h.prototype.isLoaded=function(t){var n=o.loading,e=[];if(n.length>0){for(var i=0;i<n.length;i++)n[i].node==t||n[i].node==r("body")[0]?n[i].hideLoading():e.push(n[i]);o.loading=e}},h.prototype.createTitle=function(){var t=arguments[0],n=arguments[1];n&&n.show&&(this.title=this.own(new u(t,n)),this.title.canvas=this.titleCanvas,this.title.canvas.setStart(),this.title.render(),this.title.st=this.titleCanvas.setFinish(),this.instances.push(this.title))},h.prototype.createLegend=function(){var t=arguments[0],n=arguments[1],e=arguments[2];n&&e&&n.show&&(this.legend=this.own(new s(t,n)),this.legend.setSource(e),this.legend.canvas=this.legendCanvas,this.legend.render(),this.instances.push(this.legend))},h.prototype.createFloatTag=function(){var t=arguments[0],n=arguments[1];n&&n.show&&(1!=n.showTips&&void 0!=n.showTips||(this.floatTag=new c(t,n),this.floatTag.div=this.floatTag.createFloatTag()(t)))},h.prototype.createChart=function(){var t=this,n=arguments[0],r=arguments[1],i=arguments[2],a=arguments[3],s=this.calculatePos(this.instances),u={type:r.type,width:s.width,height:s.height,left:s.left,top:s.top},c=(this.jointChartStr(this.type),this.merge(r,u)),h={Rose:"rose",Bullet:"bullet",Dot:"dot",Pinterest:"pinterest",Tagcloud:"tagcloud",Chord:"chord",DoubleLine:"doubleline",Stream:"stream",SunBurst:"sunburst",Hotmap:"hotmap",Tree:"tree",Calendar:"calendar"};e.e(21).then(function(r){o.svg;var s=e(613)("./"+h[t.type]+".js"),u=t.own(new s(n,c));u.setSource(i),u.canvas=t.canvas,u.floatTag=t.floatTag,u.render(),t.chart=u,t.instances.push(t.chart),t._init(),a&&a.call(t)}.bind(null,e)).catch(e.oe)},h.prototype.jointChartStr=function(){return arguments[0]+"Chart"},h.prototype.merge=function(t,e){return n.extend(t,e)},h.prototype.setOptions=function(t){for(var e=this.options,r=n.keys(t),i=!1,o=0,a=r.length;o<a;o++)if(n.contains(this.v3keys,r[o])){i=!0;break}if(i)for(var s in t){var u=t[s];"legend"==s&&(u.showLegend=!0);var c=this.spliceProp[s];for(var h in u)c&&n.contains(c,h)&&(e[s]?e[s]:e[s]={},e[s].type=s,e[s][h]=u[h]),void 0!=u[h]&&(e[s]||(e[s]={},e[s].type=s),e[s][h]=u[h])}else for(var h in this.replaceOldName(t),t){for(var l in this.spliceProp)n.contains(this.spliceProp[l],h)&&(e[l]?e[l]:e[l]={},e[l][h]=t[h]);void 0!=t[h]&&(e.chart[h]=t[h])}this._buildLegendTag(e),this._buildFloatTag(e),this._buildTitle(e)},h.prototype.calculatePos=function(t){var n=this,e=0,i=0,o=r(this.node).width(),a=r(this.node).height(),s=initWidth=o,u=initHeight=a;return t.forEach(function(t){var r=t.st.getBBox(),o=r.height,a=r.x,c=r.y,h=r.x2,l=r.y2;switch(t.type){case"Title":var f=s,d=l;switch(n.titleCanvas.setSize(f,d),t.defaults.position){case"top":u-=i=d;break;case"bottom":u-=o}break;case"Legend":switch(t.defaults.position){case"left":f=h+10,d=l;n.legendCanvas.setSize(f,d),s-=e=h+10;break;case"right":f=h,d=l;n.legendCanvas.setSize(f,d),s=a-e;break;case"top":f=h,d=l;n.legendCanvas.setSize(f,d),i=l,u=initHeight-i;break;case"bottom":f=initWidth,d=l;n.legendCanvas.setSize(f,d),u=c-i}}}),r(this.canvas.canvas).css({left:Math.round(e),top:Math.round(i)}),n.canvas.setSize(s,u),{left:Math.round(e),top:Math.round(i),width:Math.round(s),height:Math.round(u)}},h.prototype._createCanvas=function(){var t=r(this.node).width(),n=r(this.node).height();this.canvas=o.createCanvas(this.node,t,n),this.options.title&&(this.titleCanvas=o.createCanvas(this.node,t,n)),this.options.legend&&(this.legendCanvas=o.createCanvas(this.node,t,n))},h.prototype.clear=function(t){if(this.chart){for(var e in this.chart)(n.isArray(this.chart[e])||this.chart[e]&&this.chart[e].type&&"set"==this.chart[e].type)&&this.chart[e].length&&this.chart[e][0]&&this.chart[e][0].paper&&("Pinterest"==this.type?(r(this.chart[e][0].node).unbind(),r(document).unbind("contextmenu.pinterest")):"Tree"==this.type&&this.chart.nodes&&this.chart.nodes.onAnimation(),n.each(this.chart[e],function(t){t.removeData(),t.unhover(),t.unmouseover(),t.unmouseout(),t.unclick(),t.undblclick(),t.unmouseup(),t.untouchstart(),t.untouchend(),t.unmousemove()}),delete this.chart[e]);"Stream"==this.type&&(this.chart.hoverLine.highlightLine.unmouseout(),this.chart.hoverLine.highlightLine.unmouseover(),this.chart.hoverLine.clear(),this.chart.pathLabel&&this.chart.pathLabel.clear(),this.chart.__proto__.widgets.splice(0,this.chart.__proto__.widgets.length)),this.chart.floatTag&&(r(this.chart.node).off("changeLoc"),r(this.chart.node).off("mousemove"),r(this.chart.node).off("tap")),delete this.chart}if(this.legend&&this.legend.st&&(n.each(this.legend.st,function(t){t.removeData(),t.unhover(),t.unmouseover(),t.unmouseout(),t.unclick(),t.undblclick(),t.unmouseup(),t.untouchstart()}),this.legend.st.remove()),this.title&&this.title.st&&n.each(this.title.st,function(t){t.removeData(),t.unhover(),t.unmouseover(),t.unmouseout(),t.unclick(),t.undblclick()}),this.canvas=this.canvas||this.paper,this.canvas&&(this.canvas.clear(),this.canvas.remove(),delete this.canvas),this.legend&&this.legend.canvas&&(this.legend.canvas.clear(),this.legend.canvas.remove(),this.legendCanvas.clear(),this.legendCanvas.remove(),delete this.legend,delete this.legendCanvas),this.titleCanvas&&(this.titleCanvas.clear(),this.titleCanvas.remove(),delete this.titleCanvas),this.floatTag&&(this.floatTag.div.empty(),delete this.floatTag),this.instances&&this.instances.splice(0,this.instances.length),this.widgets&&this.widgets.splice(0,this.widgets.length),r(this.node).empty(),t){for(var i,a=0,s=o.instances.length;a<s;a++)if(o.instances[a]===this){i=a;break}for(var e in o.instances.splice(i,1),o.idBase--,delete this.node,this)this.hasOwnProperty(e)&&delete this[e];for(a=0,s=o.adaption.length;a<s;a++)if(o.adaption[a]===this){i=a;break}o.adaption.splice(i,1)}},h.prototype.judgeLegendDimension=function(){var t=arguments[0],e=arguments[1];if(t){var r=t.data;if(n.contains(e,r))return;throw new Error("DataViz Error # Legend Error :Property data must be included in "+e.toString())}},t.exports=h}(t)}).call(this,e(10)(t),e(16),e(18))},595:function(t,n,e){(function(t,n,i){
/*!***********************************************
Copyright (c) 2014, Neusoft Inc.
All rights reserved.
SaCa DataViz Version 2.0.0
************************************************/
!function(t){var o=e(531),a=e(561),s=e(563),u=o.extend(o.Chart,{initialize:function(t,n){this.type="SunBurstChart",this.node=this.checkContainer(t),this.defaults.width=800,this.defaults.height=800,this.defaults.textShowMode=0,this.defaults.isSorted=!1,this.defaults.radiusArray,this.defaults.isShowNumber=!1,this.defaults.numberShowMode="showPercentage",this.defaults.showPercentage=!1,this.defaults.textAlign="innerCircle",this.defaults.decimalFormat=0,this.defaults.target,this.defaults.arcStyle={stroke:"#fff","fill-opacity":.6},this.defaults.tipStyle={textAlign:"left",margin:"auto",color:"#ffffff","font-family":"Microsoft Yahei"},this.defaults.onLeafClick=function(t){},this.defaults.onClick=function(t){},this.defaults.onMouseOver=function(t){},this.defaults.onMouseOut=function(t){},this.defaults.onDblClick=function(t){},this.defaults.onTouchStart=function(t){},this.defaults.onTouchEnd=function(t){},this.defaults.onSpecialColor=void 0,this.setOptions(n),this.dimension={},this.source,this.colorCount,this.drillTag,this.amount=[],this._initEvent()}});u.prototype._setColor=function(){var t=this.owner.theme;this.owner.colorArray=0==this.owner.colorArray.length?s.getThemeColor(t):this.owner.colorArray},u.prototype._initEvent=function(){var t=this,n=this.defaults,e=1e3,i=Math.min(n.width,n.height)/2-45;function o(t){return t.children?Math.max.apply(Math,t.children.map(o)):t.y+t.dy}function s(t,n){return t===n||!!t.children&&t.children.some(function(t){return s(t,n)})}this.on("mouseclick",function(u,c){var h={};h[t.dimension.ID]=c.id,h[t.dimension.name]=c[t.dimension.name],h[t.dimension.size]=c.value,h[t.dimension.info]=c.info,c.parent&&(h[t.dimension.parentID]=c.parent.id),n.onClick(u,h),c.children?(t.drillTag=c[t.dimension.name],t.path.transition().duration(e).attrTween("d",function(n){var e=o(n),r=a.d3.interpolate(t.x.domain(),[n.x,n.x+n.dx]),s=a.d3.interpolate(t.y.domain(),[n.y,e]),u=a.d3.interpolate(t.y.range(),[n.y?20:0,i]);return function(n){return function(e){return t.x.domain(r(e)),t.y.domain(s(e)).range(u(e)),t.arc(n)}}}(c)),t.text.style("visibility",function(t){return s(c,t)?null:a.d3.select(this).style("visibility")}).transition().duration(e).attrTween("text-anchor",function(e){return function(){switch(n.textAlign){case"innerCircle":return t.x(e.x+e.dx/2)>Math.PI?"end":"start";case"center":case"middle":return"center";case"outerCircle":return t.x(e.x+e.dx/2)>Math.PI?"start":"end"}}}).attrTween("transform",function(e){return function(){if(0==e.y)angle=0,r=-t.y(e.dy)/4;else switch(angle=180*t.x(e.x+e.dx/2)/Math.PI-90,n.textAlign){case"innerCircle":r=t.y(e.y)+(t.amount[e.depth-1]||0);break;case"center":case"middle":r=t.y(e.y+e.dy/2)+(t.amount[e.depth-1]||0);break;case"outerCircle":r=t.y(e.y+e.dy)+(t.amount[e.depth-1]||0)}return"rotate("+angle+")translate("+r+")rotate("+(angle>90?-180:0)+")"}}).style("fill-opacity",function(t){return s(c,t)?1:1e-6}).each("end",function(n){a.d3.select(this).style("visibility",s(c,n)?null:"hidden"),t.textEnter.filter(function(n,e){return 180*Math.abs(t.x(n.dx+c.x))/Math.PI>4}).attr("display",null),t.textEnter.filter(function(n,e){return 180*Math.abs(t.x(n.dx+c.x))/Math.PI<4}).attr("display","none")})):n.onLeafClick(u,h)}),this.on("mouseup",function(e,r){var i={};i[t.dimension.ID]=r.id,i[t.dimension.name]=r[t.dimension.name],i[t.dimension.size]=r.value,i[t.dimension.info]=r.info,r.parent&&(i[t.dimension.parentID]=r.parent.id),n.onMouseUp&&n.onMouseUp(e,i)}),this.on("mousedblclick",function(n,e){t.defaults.onDblClick(n,e)}),this.on("mouseover",function(){var e=arguments[0],r=arguments[1];r=!(void 0!==r||!t.floatTag),t.pathEnter[0].forEach(function(i){if(i.__data__[t.dimension.ID]==e){var o={};o[t.dimension.name]=i.__data__[t.dimension.name],o[t.dimension.size]=i.__data__.value,o[t.dimension.info]=i.__data__[t.dimension.info],n.onMouseOver&&n.onMouseOver(o),r&&t.floatTag.show(o,t.floatTag.defaults.format,t)}})}),this.on("mouseout",function(){var e=arguments[0],r=arguments[1];r=!(void 0!==r||!t.floatTag),t.pathEnter[0].forEach(function(i){i.__data__[t.dimension.ID]==e&&(n.onMouseOut&&n.onMouseOut(i.__data__),r&&t.floatTag.hide())})}),this.on("touchstart",function(e,r){var i={};i[t.dimension.ID]=r.id,i[t.dimension.name]=r[t.dimension.name],i[t.dimension.size]=r.value,i[t.dimension.info]=r.info,r.parent&&(i[t.dimension.parentID]=r.parent.id),n.onTouchStart&&n.onTouchStart(e,i)}),this.on("touchend",function(e,r){var i={};i[t.dimension.ID]=r.id,i[t.dimension.name]=r[t.dimension.name],i[t.dimension.size]=r.value,i[t.dimension.info]=r.info,r.parent&&(i[t.dimension.parentID]=r.parent.id),n.onTouchEnd&&n.onTouchEnd(e,i)})},u.prototype._layout=function(){this._setColor();var t=this.svg,e=this,i=this.defaults,u=null,c=null,h=i.width,l=i.height,f=Math.min(h,l)/2-45,p=a.d3.scale.linear().range([0,2*Math.PI]),g=(a.d3.scale.category20c(),a.d3.scale.pow().exponent(1.3).domain([0,1]).range([0,f]));this.x=p,this.y=g;this.floatTag;var m=n.clone(i.textStyle);m.fontSize=m.fontSize?parseInt(m.fontSize):20;var v=[],y=[];e.colorCount=0,this.addStyle=function(t,n){if(n)for(var e in n)t.style(e,n[e])};var b=i.isSorted?function(t,n){return n.value-t.value}:null,x=a.d3.layout.partition().sort(b).value(function(t){return t[e.dimension.size]});if(i.radiusArray){(function(){for(var t=0,n=i.radiusArray.length;t<n;t++)y.push(i.radiusArray[t]);v=y;for(t=1,n=y.length;t<n;t++)v[t]+=v[t-1]})();var M=a.d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,p(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,p(t.x+t.dx)))}).innerRadius(function(t){return 0==t.depth?0:Math.max(0,t.y?g(t.y):t.y)+v[t.depth-1]}).outerRadius(function(t){return Math.max(0,g(t.y+t.dy))+v[t.depth]})}else M=a.d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,p(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,p(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,t.y?g(t.y):t.y)}).outerRadius(function(t){return Math.max(0,g(t.y+t.dy))});this.amount=v,this.arc=M;var k=t.datum(this.source).selectAll("path").data(x.nodes);this.path=k;var C=function(t){if(t.parent)return t.parent.color?t.parent.color:C(t.parent)},_=k.enter().append("path").attr("d",M).style("fill",function(t,n){var r;return i.onSpecialColor?i.onSpecialColor(t):(t.depth<=1?(r=s.getColor(t[e.dimension.name],e.owner.colorDict,e.owner.colorArray),t.color=r):((r=C(t))||(r="red"),r=a.d3.rgb(s.rgbToHex(r)).darker(t.depth/7)),r)}).style("stroke","#fff").style("fill-rule","evenodd").each(S);this.addStyle(_,i.arcStyle),a.d3.selectAll("input").on("change",function(){var t="count"===this.value?function(){return 1}:function(t){return t[e.dimension.size]};_.data(x.value(t).nodes).transition().duration(1e3).attrTween("d",F)}),_.on("mouseover",function(t){e.fire("mouseover",t[e.dimension.ID])}).on("mouseout",function(t){e.fire("mouseout",t[e.dimension.ID])}).on("click",function(t){o.isMobile||e.fire("mouseclick",event,t)}).on("mouseup",function(t){e.fire("mouseup",event,t)}).on("dblclick",function(t){e.fire("mousedblclick",event,t)}).on("touchstart",function(t){c=new Date,o.isMobile&&(u&&clearTimeout(u),e.fire("mouseover",t[e.dimension.ID]),u=setTimeout(function(){e.fire("mouseout",t[e.dimension.ID]),u&&clearTimeout(u)},3e3)),e.fire("touchstart",event,t)}).on("touchend",function(t){if(new Date-c<400)e.fire("mouseclick",event,t);else if(new Date-c>500)return;e.fire("touchend",event,t)}),this.pathEnter=_;var w=t.datum(this.source).selectAll("text").data(x.nodes);this.text=w;var T=w.enter().append("text").style("fill-opacity",1).style("fill","blue").attr("text-anchor",function(t){switch(i.textAlign){case"innerCircle":return p(t.x+t.dx/2)>Math.PI?"end":"start";case"center":case"middle":return"center";case"outerCircle":return p(t.x+t.dx/2)>Math.PI?"start":"end"}}).attr("dy",".2em").attr("transform",function(t){if(0==t.y)angle=0,r=-g(t.dy)/4;else switch(angle=180*p(t.x+t.dx/2)/Math.PI-90,i.textAlign){case"innerCircle":r=g(t.y)+(v[t.depth-1]||0);break;case"center":case"middle":r=g(t.y+t.dy/2)+(v[t.depth-1]||0);break;case"outerCircle":r=g(t.y+t.dy)+(v[t.depth-1]||0)}return"rotate("+angle+")translate("+r+")rotate("+(angle>90?-180:0)+")"}).each(S);function S(t){t.x0=t.x,t.dx0=t.dx}function F(t){var n=a.d3.interpolate({x:t.x0,dx:t.dx0},t);return function(e){var r=n(e);return t.x0=r.x,t.dx0=r.dx,M(r)}}this.addStyle(T,m),this.textEnter=T,T.append("tspan").attr("x",0).text(function(t){switch(!!i.isShowNumber){case!1:switch(!!i.showPercentage){case!1:switch(i.textShowMode){case 0:return t[e.dimension.name].length>5?t[e.dimension.name].substring(0,5)+"..":t[e.dimension.name];case 1:return t[e.dimension.name]}break;case!0:switch(i.textShowMode){case 0:return t[e.dimension.name].length>5?t[e.dimension.name].substring(0,5)+".. "+(100*t.dx).toFixed(i.decimalFormat)+"%":t[e.dimension.name]+" "+(100*t.dx).toFixed(i.decimalFormat)+"%";case 1:return t[e.dimension.name]+" "+(100*t.dx).toFixed(i.decimalFormat)+"%"}}break;case!0:switch(i.textShowMode){case 0:return"showNumber"===i.numberShowMode?t[e.dimension.name].length>5?t[e.dimension.name].substring(0,5)+".. "+t.value.toFixed(i.decimalFormat):t[e.dimension.name]+" "+t.value.toFixed(i.decimalFormat):t[e.dimension.name].length>5?t[e.dimension.name].substring(0,5)+".. "+(100*t.dx).toFixed(i.decimalFormat)+"%":t[e.dimension.name]+" "+(100*t.dx).toFixed(i.decimalFormat)+"%";case 1:return"showNumber"===i.numberShowMode?t[e.dimension.name]+" "+t.value.toFixed(i.decimalFormat):t[e.dimension.name]+" "+(100*t.dx).toFixed(i.decimalFormat)+"%"}}}),T.filter(function(t,n){return 180*p(t.dx)/Math.PI<4}).attr("display","none"),T.on("mouseover",function(t){e.fire("mouseover",t[e.dimension.ID])}).on("mouseout",function(t){e.fire("mouseout",t[e.dimension.ID])}).on("dblclick",function(){e.fire("mousedblclick",event,d)}).on("click",function(t){e.fire("mouseclick",event,t)}).on("mouseup",function(t){e.fire("mouseup",event,t)}).on("touchstart",function(t){c=new Date,o.isMobile&&(u&&clearTimeout(u),e.fire("mouseover",t[e.dimension.ID]),u=setTimeout(function(){e.fire("mouseout",t[e.dimension.ID]),u&&clearTimeout(u)},3e3)),e.fire("touchstart",event,t)}).on("touchend",function(t){if(new Date-c<400)e.fire("mouseclick",event,t);else if(new Date-c>500)return;e.fire("touchend",event,t)}),"string"==typeof i.target&&this.drill(i.target)},u.prototype.clearDiv=function(){i(this.node).empty(),this.svg=void 0},u.prototype.clear=function(){i(this.node).find("svg").remove(),this.svg=void 0},u.prototype.drill=function(t){var n,e=0,r="#"+this.node.id;switch(typeof t){case"string":selector=" text:contains("+t+")";break;case"object":default:throw new Error("DataViz Error #"+t+"is not a String type!")}for(var o=0,a=i(r+selector).length;o<a;o++)i(r+selector)[o].__data__[this.dimension.name]==t&&(n=o,e++);1==e?(this.drillTag=t,this.fire("mouseclick",event,i(r+selector)[n].__data__)):alert("注意：数据中包含多个或没有("+t+")标签节点")},u.prototype.setSource=function(t){this.source=t.source,this.dimensions=t.dimensions,this.dimension={},this.dimension.ID=t.dimensions[0],this.dimension.name=t.dimensions[1],this.dimension.size=t.dimensions[2],this.dimension.parentID=t.dimensions[3],this.dimension.info=t.dimensions[4]},u.prototype.render=function(){this._layout()},u.prototype.mousedblclick=function(t,n,e){this.defaults.onDblClick&&this.defaults.onDblClick(t,n,e)},t.exports=u}(t)}).call(this,e(10)(t),e(16),e(18))},597:function(t,n,e){(function(t,n,r){
/*!***********************************************
Copyright (c) 2014, Neusoft Inc.
All rights reserved.
SaCa DataViz Version 2.0.0
************************************************/
!function(t){var i=e(596),o=e(531);var a=function(t,e){"function"!=typeof t&&(e=t,t=function(){}),e=e||{};var r=function(){t.apply(this,arguments),this.constructor===t&&this.initialize&&(this.initialize.apply(this,arguments),arguments.length>0&&(o.instances[o.idBase-1]=this))};return(r.prototype=new t).constructor=t,n.extend(r.prototype,e),r}(i,{type:"Chart",initialize:function(){this.defaults={},this.plugins={},this.dimension={},this.formatter={},this.widgets=[]}});a.prototype.getType=function(){return this.type},a.prototype.getNode=function(){return this.node},a.prototype.getId=function(){return this.id},a.prototype.getFormatter=function(t){return this.defaults[t]||this.formatter[t]||function(t){return""+t}},a.prototype.checkContainer=function(t){var n=null;if("string"==typeof t?n=document.getElementById(t):t.nodeName?n=t:t.size()>0&&(n=t[0]),!n)throw new Error("DataViz Error # DOM Error : Please specify a correct node to render.");return n},a.prototype.setOptions=function(t){return r.extend(this.defaults,t)},a.prototype.plug=function(t,n){return this[t]=n,this.plugins[t]=n,this},a.prototype.unplug=function(t){return this.plugins.hasOwnProperty(t)&&(delete this.plugins[t],delete this[t]),this},a.prototype.map=function(t){var n=this;r.forEach(t,function(e,r){n.dimension.hasOwnProperty(r)&&(n.dimension[r].index=t[r])});var e={};return r.forEach(n.dimension,function(t,n){e[n]=t.index}),e.hasField=r.any(e,function(t){return"string"==typeof t}),this.mapping=e,e},a.prototype.createCanvas=function(){var t=this.defaults;this.node.style.position="relative",this.paper=o.createCanvas(this.node,t.width,t.height)},a.prototype.own=function(t){return t.setOptions(this.defaults),t.owner=this,this.widgets.push(t),t},a.prototype.show=function(){n(this.node).each(function(t,e){n(e).css("visibility","visible")})},a.prototype.hidden=function(){n(this.node).each(function(t,e){n(e).css("visibility","hidden")})},a.prototype.destroy=function(){for(var t in this)"function"!=typeof t&&delete this[t]},a.prototype.clear=function(){this.canvas=this.canvas||this.paper,this.canvas.clear()},a.prototype.clearDiv=function(){n(this.node).empty()},a.prototype.createGeneralObj=function(t,n){var e={};return r.each(n,function(n){e[n]=t[n]}),e},t.exports=a}(t)}).call(this,e(10)(t),e(18),e(16))},792:function(t,n,e){(function(t){!function(t){var n=e(531),r=e(566),i=e(567),o=n.extend(i,{initialize:function(t,e){this.type="Tree",this.id=n.idBase++,this.node=this.checkContainer(t),this._compatibility(e),this.checkOptions(this.options),this.isV2=this.isV2(e),n.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=n.Theme.current,this.isDataValidated=!0}});o.prototype.setSource=function(t,n){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;!n&&this.isV2&&(n={ID:0,name:1,size:2,parentID:3,info:4}),this.source=r.toList(t,n),this.chartSource=r.getSource(this.source,this.options.chart)},o.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t)):this.options=t},o.prototype.own=function(t){return t.setOptions(this.defaults),t.owner=this,t},o.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},o.prototype.mouseClick=function(t){this.chart.update(t)},o.prototype._init=function(){var t=this;if(t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.mousedblclick(e,n,"title")})}},o.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},o.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},t.exports=o}(t)}).call(this,e(10)(t))},793:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(566),o=e(567),a=r.extend(o,{initialize:function(t,n){this.type="Tagcloud",this.id=r.idBase++,this.node=this.checkContainer(t),this._compatibility(n),this.checkOptions(this.options),this.isV2=this.isV2(n),r.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=r.Theme.current,this.isDataValidated=!0}});a.prototype.setSource=function(t,e){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;!e&&this.isV2&&(e={text:0,weight:1,info:2}),this.source=i.toList(t,e);var r=n.invert(e);this.source.dimensionType={},this.source.dimensionType[r[0]]="ordinal",this.source.dimensionType[r[1]]="quantitative",this.chartSource=i.getSource(this.source,this.options.chart)},a.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t)):this.options=t},a.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},a.prototype._init=function(){var t=this;if(t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.mousedblclick(e,n,"title")})}},a.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},a.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},a.prototype.chooseText=function(t){return this.chart.chooseText(t)},a.prototype.chooseWeight=function(t){return this.chart.chooseWeight(t)},a.prototype.restore=function(){this.chart.restore()},t.exports=a}(t)}).call(this,e(10)(t),e(16))},794:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(567),o=e(566),a=e(561),s=e(595),u=r.extend(i,{initialize:function(t,n){this.type="SunBurst",this.id=r.idBase++,this.node=this.checkContainer(t),this._compatibility(n),this.checkOptions(this.options),this.isV2=this.isV2(n),r.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=r.Theme.current,this.isDataValidated=!0}});u.prototype.setSource=function(t,n){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;!n&&this.isV2&&(n={ID:0,name:1,size:2,parentID:3,info:4}),this.chartSource={};var e,r=o.getDimensions(n);if("List"==a.detect(t))if(t[0].children)r.splice(0,0,"ID"),r.splice(2,1),r.splice(3,0,"parentID"),e=t[0];else{var i=a.tablify(t);e=o.arrayToTreeJson(i,n)}else e=o.arrayToTreeJson(t,n);this.chartSource.dimensions=r,this.chartSource.source=e},u.prototype.getLastOneLeafDimensionsOfTree=function(t){if(t.children)return this.getLastOneLeafDimensionsOfTree(t.children[0]);var n=t,e=[];return e.push(n),a.tablify(e)[0]},u.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t)):this.options=t},u.prototype.createChart=function(){var t=arguments[0],n=arguments[1],e=arguments[2],i=arguments[3];if(!n)throw new Error("DataViz Error # Chart Error : Please create a chart module.");var o=this.calculatePos(this.instances),a={type:n.type,width:o.width,height:o.height,left:o.left,top:o.top},u=(r.svg,this.merge(n,a)),c=this.own(new s(t,u));c.setSource(e),c.svg=this.svg,c.floatTag=this.floatTag,c.render(),this.chart=c,i&&i.call(this)},u.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createLegend(e,n.legend,this.legendSource),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},u.prototype._init=function(){var t=this;if(t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.mousedblclick(e,n,"title")})}},u.prototype.calculatePos=function(t){var e=this,i=0,o=0,a=n(this.node).width(),s=n(this.node).height(),u=n(this.node).height(),c=n(this.node).width();(t.forEach(function(t){var n=t.st.getBBox(),r=n.height,h=n.x,l=n.y,f=n.x2,d=n.y2;switch(t.type){case"Title":var p=a,g=d;switch(e.titleCanvas.setSize(p,g),t.defaults.position){case"top":s-=o=g;break;case"bottom":s-=r}break;case"Legend":switch(t.defaults.position){case"left":p=f,g=u;e.legendCanvas.setSize(p,g),a-=i=f;break;case"right":p=f,g=u;e.legendCanvas.setSize(p,g),a=h-i;break;case"top":p=c,g=d;e.legendCanvas.setSize(p,g),s=u-(o=d);break;case"bottom":p=c,g=d;e.legendCanvas.setSize(p,g),s=l-o}}}),r.svg)?n("#chartSVG").css({position:"absolute",left:Math.round(i),top:Math.round(o)}):(n(this.canvas.canvas).css({left:Math.round(i),top:Math.round(o)}),e.canvas.setSize(a,s));return{left:Math.round(i),top:Math.round(o),width:Math.round(a),height:Math.round(s)}},u.prototype._createCanvas=function(){if(this.options.title&&(this.titleCanvas=r.createCanvas(this.node,this.options.chart.width,50)),r.svg){var t=n(this.node).width(),e=n(this.node).height();this.svg=a.d3.select(this.node).append("svg").attr("width",t).attr("height",e).attr("id","chartSVG").append("g").attr("transform","translate("+t/2+","+.5*e+")")}else this.canvas=r.createCanvas(this.node,this.options.chart.width,this.options.chart.height)},u.prototype.drill=function(t){this.chart.drill(t)},u.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this._init(),this.isLoaded(this.node)},u.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},t.exports=u}(t)}).call(this,e(10)(t),e(18))},795:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(566),o=e(567),a=e(561),s=r.extend(o,{initialize:function(t,n){this.type="Stream",this.id=r.idBase++,this.node=this.checkContainer(t),void 0==n.showLegend?n.showLegend=!0:n.showLegend=n.showLegend,this._compatibility(n),this.checkOptions(this.options),this.isV2=this.isV2(n),this.options.chart.gradientColor&&this.options.legend&&(this.options.legend.colorMode="gradient",this.options.legend.legendColor=this.options.chart.gradientColor),r.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=r.Theme.current,this.isDataValidated=!0}});s.prototype.setSource=function(t,e){var r=this;if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;!e&&this.isV2&&(e={x:0,type:1,value:2,info:3}),this.source=i.toList(t,e);var o=n.invert(e);this.source.dimensionType={},this.source.dimensionType[o[0]]="ordinal",this.source.dimensionType[o[1]]="ordinal",this.source.dimensionType[o[2]]="quantitative",this.chartSource=i.getSource(this.source,this.options.chart),this.chartSource.source=n.sortBy(this.chartSource.source,function(t){return parseInt(t[r.source.dimensions[0]])}),!this.options.legend||1!=this.options.legend.showLegend&&void 0!=this.options.legend.showLegend||(this.options.legend.data=this.chartSource.dimensions[1],this.legendSource=this.getLegendSource(this.source.source,this.chartSource.dimensions));var a=[];a.push(this.chartSource.dimensions[1]),this.judgeLegendDimension(this.options.legend,a)},s.prototype.getLegendSource=function(t,e){var i=n.groupBy(t,e[1]),o=n.sortBy(i,function(t){return-a.sum(t,e[2])}).map(function(t){return t[0][e[1]]});if(this.options.chart.more){var s=this;return r.more(o,this.options.chart.level||0,this.options.chart.max||20,function(){return s.options.chart.moreLabel||"more"})}return o.slice(0)},s.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t),this.options.legend&&1==this.options.legend.showLegend&&(this.options.legend.position=this.options.legend.position||"left",this.options.legend.marginTop=30,this.options.legend.item={},this.options.legend.item.marginTop=3,this.options.legend.item.marginBottom=4,this.options.legend.item.marginLeft=10,this.options.legend.item.marginRight=0,this.options.legend.item.markStyle="rect",this.options.legend.item.markWidth=12,this.options.legend.item.markHeight=11,this.options.legend.item.markTextWidth=100,this.options.legend.item.font="normal 14px Microsoft Yahei",this.options.legend.item.fontColor="black")):this.options=t},s.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createLegend(e,n.legend,this.legendSource),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},s.prototype._init=function(){var t=this;if(t.legend&&(t.legend.on("hoverIn",function(n){t.chart.fire("mouseover",n.index,!1)}).on("hoverOut",function(n){t.chart.fire("mouseout",n.index,!1)}),t.chart.on("hoverIn",function(n){t.legend.highlight(n)}).on("hoverOut",function(n){t.legend.lowlight(n)})),t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.fire("mousedblclick",e,n,"title")})}},s.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isV2&&(this.floatTag.mapping=this.chartSource.dimensions),this.isLoaded(this.node)},s.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},t.exports=s}(t)}).call(this,e(10)(t),e(16))},796:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(566),o=e(567),a=r.extend(o,{initialize:function(t,n){this.type="Rose",this.id=r.idBase++,this.node=this.checkContainer(t),this._compatibility(n),this.options.legend&&(this.options.legend.opacity=this.options.legend.opacity||.5),this.checkOptions(this.options),this.isV2=this.isV2(n),r.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=r.Theme.current,this.isDataValidated=!0}});a.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t),this.options.legend&&!this.options.legend.data&&(this.options.legend.data="name")):this.options=t},a.prototype.setSource=function(t,e){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;var r,o,a;switch(!e&&this.isV2&&(e={name:0,innerSize:1,outerSize:2}),this.source=i.toList(t,e),o=this.source.dimensions[1],a=this.source.dimensions[2],this.options.chart.sortType){case 0:r=function(t){return null};break;case 1:r=function(t){return t[o]};break;case 2:r=function(t){return t[a]};break;case 3:default:r=function(t){return t[a]/t[o]}}this.source.source=n.sortBy(this.source.source,r),this.legendSource=i.getSource(this.source.source,this.options.legend),this.chartSource=i.getSource(this.source,this.options.chart);var s=[];s.push(this.chartSource.dimensions[0]),s.push(this.chartSource.dimensions[1]),s.push(this.chartSource.dimensions[2]),this.judgeLegendDimension(this.options.legend,s)},a.prototype._draw=function(t){var n=this.options,e=this.node;this.legendData=n.legend.data,this.createTitle(e,n.title),this.createLegend(e,n.legend,this.legendSource),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},a.prototype._init=function(){var t=this;if(t.legend&&(t.legend.on("hoverIn",function(n){t.chart.fire("mouseover",n.text,!1)}).on("hoverOut",function(n){t.chart.fire("mouseout",n.text,!1)}),t.chart.on("hoverIn",function(n){t.legend.highlight(n)}).on("hoverOut",function(n){t.legend.lowlight(n)})),t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.fire("mousedblclick",e,n,"title")})}},a.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},a.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},a.prototype.mouseClick=function(){this.chart.fire("mouseclick",arguments[0])},a.prototype.mouseOver=function(){this.chart.fire("mouseover",arguments[0])},a.prototype.mouseOut=function(){this.chart.fire("mouseout",arguments[0])},t.exports=a}(t)}).call(this,e(10)(t),e(16))},797:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(566),o=e(567),a=r.extend(o,{initialize:function(t,n){this.type="Pinterest",this.id=r.idBase++,this.node=this.checkContainer(t),this._compatibility(n),this.checkOptions(n),r.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=r.Theme.current,this.isDataValidated=!0}});a.prototype.setSource=function(t,e){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;this.source=i.toList(t,e);var r=n.invert(e);this.source.dimensionType={},this.source.dimensionType[r[0]]="ordinal",this.source.dimensionType[r[1]]="ordinal",this.source.dimensionType[r[2]]="quantitative",this.legendSource=i.getSource(this.source.source,this.options.legend),this.chartSource=i.getSource(this.source,this.options.chart)},a.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t),this.options.legend&&!this.options.legend.data&&(this.options.legend.data="name")):this.options=t},a.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createLegend(e,n.legend,this.legendSource),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},a.prototype._init=function(){var t=this;if(t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.fire("mousedblclick",e,n,"title")})}},a.prototype.mouseClick=function(t){this.chart._click(t)},a.prototype.rightClick=function(){this.chart.rightClick()},a.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},a.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},t.exports=a}(t)}).call(this,e(10)(t),e(16))},798:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(566),o=e(567),a=r.extend(o,{initialize:function(t,n){this.type="Hotmap",this.id=r.idBase++,this.node=this.checkContainer(t),n.showLegend=!0,n.colorMode="custom",this._compatibility(n),this.checkOptions(this.options),this.isV2=this.isV2(n),r.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=r.Theme.current,this.isDataValidated=!0}});a.prototype.setSource=function(t,e){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;e&&!this.isV2||(e={row:0,col:1,value:2,info:3}),this.source=i.toList(t,e),this.legendSource=i.getSource(this.source.source,this.options.legend);var r=n.invert(e);if(this.source.dimensionType={},this.source.dimensionType[r[0]]="ordinal",this.source.dimensionType[r[1]]="ordinal",this.source.dimensionType[r[2]]="quantitative",this.chartSource=i.getSource(this.source,this.options.chart),this.options.legend){if(!n.isArray(this.options.legend.data))throw new Error("DataViz Error # Legend Error :Property data limited to the following format : [[0,20],[20,100],[100,150],[150,250],[250,300],[300,450],[450,600]]");var o=this.options.legend.colorMode,a=this.options.legend.legendColor;if("custom"==o&&a)for(var s=0;s<a.length;s++)for(var u=0;u<this.legendSource.length;u++)-1!=this.legendSource[u].indexOf(a[s].name.replace(",","-"))&&(a[s].name=this.legendSource[u])}},a.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t),this.options.legend&&1==this.options.legend.showLegend&&(this.options.legend.position="bottom",this.options.legend.marginTop=460,this.options.legend.item={},this.options.legend.item.marginTop=0,this.options.legend.item.marginBottom=0,this.options.legend.item.marginLeft=10,this.options.legend.item.marginRight=0,this.options.legend.item.markStyle="rect",this.options.legend.item.markWidth=23,this.options.legend.item.markHeight=23,this.options.legend.item.isRoundCorner=!0,this.options.legend.item.isMarkAboveMarkText=!0,this.options.legend.item.markTextWidth=80,this.options.legend.item.font="normal 12px Microsoft Yahei",this.options.legend.item.fontColor="black"),this.options.legend&&"custom"==this.options.legend.colorMode&&!this.options.legend.data&&(this.options.legend.data=[[0,20],[20,100],[100,150],[150,250],[250,300],[300,450],[450,600]])):this.options=t},a.prototype._getIndexOfValueRange=function(t,n){for(var e=0;e<t.length;e++)if(n>=t[e][0]&&n<=t[e][1])return e;alert("您设置的图例区间与您的数据不符，请重新设定")},a.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createLegend(e,n.legend,this.legendSource),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},a.prototype._init=function(){var t=this;if(t.legend&&t.legend.on("hoverIn",function(n){t.chart.highlight(n.text)}).on("hoverOut",function(n){t.chart.lowlight(n.text)}),t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.mousedblclick(e,n,"title")})}},a.prototype.legendMouseOver=function(t){this.legend&&this.legend.highlight(t),this.chart.highlight(t)},a.prototype.legendMouseOut=function(t){this.legend&&this.legend.lowlight(t),this.chart.lowlight(t)},a.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},a.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},t.exports=a}(t)}).call(this,e(10)(t),e(16))},799:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(566),o=e(567),a=r.extend(o,{initialize:function(t,n){this.type="DoubleLine",this.id=r.idBase++,this.node=this.checkContainer(t),this._compatibility(n),this.options.legend&&(this.options.legend.opacity=.5),this.checkOptions(this.options),r.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=r.Theme.current,this.isDataValidated=!0}});a.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t)):this.options=t},a.prototype.setSource=function(t,e){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;this.source=i.toList(t,e);var r=n.invert(e);this.source.dimensionType={},this.source.dimensionType[r[0]]="ordinal",this.source.dimensionType[r[1]]="ordinal",this.source.dimensionType[r[2]]="quantitative",this.source.dimensionType[r[3]]="ordinal",this.chartSource=i.getSource(this.source,this.options.chart)},a.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},a.prototype._init=function(){var t=this;if(t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.mousedblclick(e,n,"title")})}},a.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},a.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},a.prototype.mouseOver=function(t){this.chart.fire("mouseover",[0,t])},a.prototype.mouseOut=function(t){this.chart.fire("mouseout",[0,t])},a.prototype.mouseOver_right=function(t){this.chart.fire("mouseoverS",[1,t])},a.prototype.mouseOut_right=function(t){this.chart.fire("mouseoutS",[1,t])},t.exports=a}(t)}).call(this,e(10)(t),e(16))},800:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(566),o=e(567),a=r.extend(o,{initialize:function(t,n){this.type="Dot",this.id=r.idBase++,this.node=this.checkContainer(t),this._compatibility(n),this.checkOptions(this.options),r.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=r.Theme.current,this.isDataValidated=!0}});a.prototype.setSource=function(t,e){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;e||(e={row:0,col:1,value:2,class:3,info:4}),this.source=i.toList(t,e);var r=n.invert(e);this.source.dimensionType={},this.source.dimensionType[r[0]]="ordinal",this.source.dimensionType[r[1]]="ordinal",this.source.dimensionType[r[2]]="quantitative",this.source.dimensionType[r[3]]="ordinal",this.legendSource=i.getSource(this.source.source,this.options.legend),this.chartSource=i.getSource(this.source,this.options.chart);var o=[];o.push(this.chartSource.dimensions[0]),o.push(this.chartSource.dimensions[3]),this.judgeLegendDimension(this.options.legend,o)},a.prototype._compatibility=function(t){if(this.isV2(t)){this.replaceOldName(t);var n=t.colorMode;this.options=this.buildStructure(t),this.options.legend&&delete this.options.legend,this.options.chart.colorMode=n}else this.options=t},a.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createLegend(e,n.legend,this.legendSource),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},a.prototype._init=function(){var t=this;if(t.legend&&(t.chart.on("hoverIn",function(n){t.legend.highlight(n)}).on("hoverOut",function(n){t.legend.lowlight(n)}),t.legend.on("hoverIn",function(n){t.chart.legendMouseover(n)}).on("hoverOut",function(n){t.chart.legendMouseout(n)})),t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.mousedblclick(e,n,"title")})}},a.prototype.rowTextMouseOver=function(t){this.chart.rowTextMouseover(t)},a.prototype.colTextMouseOut=function(t){this.chart.colTextMouseout(t)},a.prototype.colTextMouseOver=function(t){this.chart.colTextMouseover(t)},a.prototype.rowTextMouseOut=function(t){this.chart.rowTextMouseout(t)},a.prototype.legendMouseOver=function(t){this.chart.legendMouseover(t)},a.prototype.legendMouseOut=function(t){this.chart.legendMouseout(t)},a.prototype.mouseClick=function(t,n){this.chart.mouseclick(t,n)},a.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},a.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},t.exports=a}(t)}).call(this,e(10)(t),e(16))},801:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=e(566),o=e(567),a=r.extend(o,{initialize:function(t,n){this.type="Chord",this.id=r.idBase++,this.node=this.checkContainer(t),void 0==n.showLegend?n.showLegend=!0:n.showLegend=n.showLegend,this._compatibility(n),this.checkOptions(this.options),this.isV2=this.isV2(n),r.instances[this.id]=this,this.instances=[],this.widgets=[],this.colorDict=[],this.colorArray=[],this.theme=r.Theme.current,this.isDataValidated=!0}});a.prototype.setSource=function(t,e){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;var r,o,a,s;if(!e&&this.isV2&&(e={from:0,to:1,value:2}),this.source=i.toList(t,e),a=this.source.dimensions[0],s=this.source.dimensions[2],this.options.chart.isSorted){r=function(t){return t[a]},o=function(t){for(var n=0,e=0;e<t.length;e++)n+=t[e][s];return n};var u=n.groupBy(this.source.source,r);u=n.sortBy(u,o).reverse();for(var c=[],h=0;h<u.length;h++)c=n.union(c,u[h]);this.source.source=c}this.legendSource=i.getSource(this.source.source,this.options.legend),invertMap=n.invert(e),this.source.dimensionType={},this.source.dimensionType[invertMap[0]]="ordinal",this.source.dimensionType[invertMap[1]]="ordinal",this.source.dimensionType[invertMap[2]]="quantitative",this.chartSource=i.getSource(this.source,this.options.chart);var l=[];l.push(this.chartSource.dimensions[0]),l.push(this.chartSource.dimensions[1]),this.judgeLegendDimension(this.options.legend,l)},a.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t),this.options.legend&&1==this.options.legend.showLegend&&(this.options.legend.position="left",this.options.legend.item={},this.options.legend.item.markStyle="rect",this.options.legend.item.markWidth=16,this.options.legend.item.markHeight=8,this.options.legend.item.markTextWidth=60,this.options.legend.item.font="normal 14px Microsoft Yahei",this.options.legend.item.fontColor="black",this.options.legend.data||(this.options.legend.data="from"))):this.options=t},a.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createLegend(e,n.legend,this.legendSource),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},a.prototype.mouseClick=function(t,n){this.chart.mouseclick(t,n)},a.prototype.mouseOver=function(t,n){this.chart.highlight(t,n)},a.prototype.mouseOut=function(){this.chart.lowlight()},a.prototype.legendClick=function(t){this.chart.legendClick(t)},a.prototype._init=function(){var t=this;if(t.legend&&(t.chart.on("hoverIn",function(n){t.legend.highlight(n)}).on("hoverOut",function(n){t.legend.lowlight(n),t.legend.holdLightCancel(n)}),t.legend.on("click",function(n){t.legend.holdLight(n.text),t.chart.legendClick(n.text)})),t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.mousedblclick(e,n,"title")})}},a.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},a.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorArray=[],this.applyAdaption(this.options),this.render()},t.exports=a}(t)}).call(this,e(10)(t),e(16))},802:function(t,n,e){(function(r){var i,o;void 0===(o="function"==typeof(i=function(t){var n=t("../DataViz.js"),e=t("DataProcessor"),i=t("BaseComponent"),o=n.extend(i,{initialize:function(t,e){this.type="Calendar",this.id=n.idBase++,this.node=this.checkContainer(t),this._compatibility(e),this.checkOptions(this.options),this.isV2=this.isV2(e),n.instances[this.id]=this,this.instances=[],this.widgets=[],this.legend=this.options.legend,this.theme=n.Theme.current,this.isDataValidated=!0}});return o.prototype.setSource=function(t,n){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;!n&&this.isV2&&(n={date:0,value:1,group:2,info:3}),this.source=e.toList(t,n),invertMap=r.invert(n),this.source.dimensionType={},this.source.dimensionType[invertMap[0]]="ordinal",this.source.dimensionType[invertMap[1]]="quantitative",this.source.dimensionType[invertMap[2]]="ordinal",this.chartSource=e.getSource(this.source,this.options.chart),this.legend=this.options.legend},o.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t)):this.options=t},o.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createFloatTag(e,n.floatTag),this.createChart(e,n.chart,this.chartSource,t)},o.prototype._init=function(){var t=this;if(t.title){var n=t.title.defaults.text;t.title.on("dblclick",function(e){t.chart.mousedblclick(e,n,"title")})}},o.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},o.prototype.reRender=function(){this.clear(),this.instances=[],this.colorDict=[],this.colorToIndex=[],this.applyAdaption(this.options),this.render()},o})?i.call(n,e,n,t):i)||(t.exports=o)}).call(this,e(16))},803:function(t,n,e){var r,i;void 0===(i="function"==typeof(r=function(t){var n=t("../DataViz.js"),e=t("DataProcessor"),r=t("BaseComponent"),i=n.extend(r,{initialize:function(t,e){this.type="Bundle",this.node=this.checkContainer(t),this.id=n.idBase++,this._compatibility(e),this.checkOptions(this.options),this.isV2=this.isV2(e),n.instances[this.id]=this,this.instances=[],this.widgets=[],this.isDataValidated=!0}});return i.prototype.setSource=function(t,n){if(this.isDataValidated=this.validateSource(t),!this.isDataValidated)return!1;this.source=e.toList(t,n),this.source.source=t,this.chartSource=e.getSource(this.source,this.options.chart)},i.prototype._compatibility=function(t){this.isV2(t)?(this.replaceOldName(t),this.options=this.buildStructure(t)):this.options=t},i.prototype._draw=function(t){var n=this.options,e=this.node;this.createTitle(e,n.title),this.createChart(e,n.chart,this.chartSource,t)},i.prototype._init=function(){},i.prototype.render=function(){if(!this.isDataValidated)return!1;this._createCanvas(),this._draw(this.options.chart.renderCallback),this.isLoaded(this.node)},i.prototype.reRender=function(){this.clear(),this.instances=[],this.applyAdaption(this.options),this.render()},i})?r.call(n,e,n,t):r)||(t.exports=i)},804:function(t,n,e){(function(t,n){!function(t){var r=e(531),i=r.extend(r.Chart,{initialize:function(t,n){this.type="floatTag",this.defaults.border="3px solid",this.defaults.borderColor="black",this.defaults.borderRadius="10px",this.defaults.backgroundColor="white",this.defaults.fontSize="12px",this.defaults.fontFamily="Microsoft Yahei",this.defaults.fontColor="black",this.defaults.textAlign="left",this.defaults.margin=0,this.defaults.opacity=1,this.defaults.tipFormat=function(t){var n="";for(var e in t)void 0!==t[e]&&(n=n+e+": "+t[e]+"<br/>");return n},this.setOptions(n)}});i.prototype.createFloatTag=function(){var t,e,r=20,i=20,o=this,a=function(o){var a=o.x||arguments[1]&&arguments[1].x,s=o.y||arguments[1]&&arguments[1].y,u=t.outerWidth?t.outerWidth():t.width(),c=t.outerHeight?t.outerHeight():t.height();u+a+2*r<=n(e).width()?a+=r:a=a-u-r,a<0&&(a=0),s>=c+i?s=s-i-c:s+=i,t.css("left",a),t.css("top",s)},s=function(t){var r=n(e).offset();if(!t.pageX||!t.pageY)return!1;var i=t.pageX-r.left,s=t.pageY-r.top;o.currentPosition={x:i,y:s},function(){}.call(this),a({x:i,y:s})},u=function(r){return e=n(r),t=n("<div/>").css({padding:"12px 8px","box-shadow":"3px 3px 6px 0px rgba(0,0,0,0.58)","z-index":1e3,display:"none",position:"absolute"}),e.append(t),e.on("mousemove",s),e.on("tap",s),e.on("changeLoc",a),t.creator=u,t};return u.changeLoc=a,u},i.prototype._getTip=function(t){return this.defaults.tipFormat.call(this,t)},i.prototype.show=function(t){var n=this.defaults;this.div.html(this._getTip(t)),arguments[1]&&this.div.trigger("changeLoc",[arguments[1]]),this.div.css({border:n.border,"border-color":n.borderColor,"border-radius":n.borderRadius,"background-color":n.backgroundColor,color:n.fontColor,"font-size":n.fontSize,"font-family":n.fontFamily,"text-align":n.textAlign,display:"block",margin:n.margin,opacity:n.opacity})},i.prototype.hide=function(){this.div.css({display:"none"})},t.exports=i}(t)}).call(this,e(10)(t),e(18))},805:function(t,n,e){(function(t){!function(t){var n=e(531),r=n.extend(n.Chart,{initialize:function(t,n){this.type="Title",this.defaults.position="top",this.defaults.marginTop=0,this.defaults.marginLeft=void 0,this.defaults.marginBottom=0,this.defaults.text=n.caption||"主标题",this.defaults.fontFamily="Microsoft YaHei",this.defaults.fontSize="16px",this.defaults.fontWeight="normal",this.defaults.color="#333",this.defaults.subTitle=void 0,this.setOptions(n)}});r.prototype.render=function(){this.defaults.width=this.canvas.width,this.defaults.height=this.canvas.height,this.defaults.subTitle&&(this.defaults.subTitle.percentageW=this.defaults.subTitle.percentageW,this.defaults.subTitle.percentageH=this.defaults.subTitle.percentageH,this.defaults.subTitle.marginTop=this.defaults.subTitle.marginTop||5,this.defaults.subTitle.text=this.defaults.subTitle.text||"副标题",this.defaults.subTitle.fontFamily=this.defaults.subTitle.fontFamily||"Microsoft YaHei",this.defaults.subTitle.fontSize=this.defaults.subTitle.fontSize||"14px",this.defaults.subTitle.fontWeight=this.defaults.subTitle.fontWeight||"normal",this.defaults.subTitle.color=this.defaults.subTitle.color||"#999",((this.defaults.subTitle.marginLeft+"").indexOf("%")>-1||this.defaults.subTitle.percentageW)&&(this.defaults.subTitle.percentageW=this.defaults.subTitle.percentageW||this.defaults.subTitle.marginLeft,this.defaults.subTitle.marginLeft=this.defaults.subTitle.percentageW.replace("%","")/100*this.defaults.width),((this.defaults.subTitle.marginTop+"").indexOf("%")>-1||this.defaults.subTitle.percentageH)&&(this.defaults.subTitle.percentageH=this.defaults.subTitle.percentageH||this.defaults.subTitle.marginTop,this.defaults.subTitle.marginTop=this.defaults.subTitle.percentageH.replace("%","")/100*this.defaults.height));var t,e=this.defaults;switch(e.marginLeft){case"0%":t="start";break;case"50%":t="middle";break;case"100%":t="end"}e.marginTop=(e.marginTop+"").indexOf("%")>-1?e.marginTop.replace("%","")/100*e.height:e.marginTop,e.marginLeft=(e.marginLeft+"").indexOf("%")>-1?e.marginLeft.replace("%","")/100*e.width:e.marginLeft;var r=e.marginLeft||0,i=e.marginTop+3,o=this.canvas.text(r,i,e.text),a={"text-anchor":t,y:i,"font-family":e.fontFamily,"font-size":e.fontSize,"font-weight":e.fontWeight,fill:e.color,cursor:"pointer"},s=this;o.attr(a).dblclick(function(t){if(n.isMobile)return null;s.fire("dblclick",t)});var u=o.getBBox().height;if(i+=u/2,o.attr({y:i}),void 0==e.marginLeft&&(r=e.width/2,o.attr({x:r})),e.subTitle){var c=e.subTitle,h=c.marginLeft||0,l=c.marginTop+e.marginTop+3+u,f=this.canvas.text(h,l,c.text),d={"text-anchor":"middle",y:l,"font-family":c.fontFamily,"font-size":c.fontSize,"font-weight":c.fontWeight,fill:c.color};f.attr(d);var p=f.getBBox().height;f.attr({y:l+p/2}),void 0==c.marginLeft&&(h=e.width/2,f.attr({x:h})),this.canvas.rect(0,l+p,e.width,e.marginBottom).attr({"stroke-opacity":0})}else this.canvas.rect(0,e.marginTop+3+u,e.width,e.marginBottom).attr({"stroke-opacity":0})},t.exports=r}(t)}).call(this,e(10)(t))},806:function(t,n,e){(function(t,n){
/*!
 * LegendNew 图例
 */
!function(t){var r=e(531),i=e(563),o=r.extend(r.Chart,{initialize:function(t,n){n.showLegend=!0,this.type="Legend",this.defaults.colorMode="random",this.defaults.position="left",this.defaults.roundRatio=void 0,this.defaults.opacity=1,this.defaults.onClick=function(t){},this.defaults.onMouseOver=function(t){},this.defaults.onMouseOut=function(t){},this.defaults.item={},this.defaults.item.marginTop=5,this.defaults.item.marginBottom=5,this.defaults.item.marginLeft=10,this.defaults.item.marginRight=10,this.defaults.item.markStyle="rect",this.defaults.item.markWidth=15,this.defaults.item.markHeight=7,this.defaults.item.markRadius=7,this.defaults.item.isRoundCorner=!1,this.defaults.item.isMarkAboveMarkText=!1,this.defaults.item.fontFamily="Microsoft Yahei",this.defaults.item.fontSize="14px",this.defaults.item.fontWeight="normal",this.defaults.item.fontColor="#333",this.defaults.item.mouseOverColor="#333",this.defaults.item.mouseOverBgColor="#ccc",this.setOptions(n),this.defaults.marginLeft=this.defaults.leftLegendWidth||this.defaults.marginLeft,1==this.defaults.item.isRoundCorner&&(this.defaults.roundRatio=4),this.LegendSource=[],this.underBn={},this.legendText={},this.lastClickText=void 0}});o.prototype._setColor=function(){this.owner.colorArray=i.setColor(this.defaults.colorMode,this.defaults.legendColor,this.LegendSource.length,this.owner.theme),"custom"==this.defaults.colorMode&&(this.owner.themeColor=i.setColor("random",this.defaults.legendColor,this.LegendSource.length,this.owner.theme),this.owner.colorDict=this.defaults.legendColor||[])},o.prototype.setSource=function(t){this.LegendSource=t},o.prototype.render=function(){this._setColor(),this.owner.legendData=this.defaults.data,this.defaults.canvasWidth=this.canvas.width,this.defaults.canvasHeight=this.canvas.height,this.tempMarkTextWidth=void 0,this.tempMarkTextHeight=void 0;var t=this.defaults.marginLeft;if(this.defaults.marginLeft=this.defaults.marginLeft||0,void 0===this.defaults.marginTop)if("left"==this.defaults.position||"right"==this.defaults.position){switch(this.defaults.item.markStyle){case"rect":this.defaults.height=this.LegendSource.length*(this.defaults.item.markHeight+this.defaults.item.marginTop+this.defaults.item.marginBottom+2);break;case"circle":this.defaults.height=this.LegendSource.length*(2*this.defaults.item.markRadius+this.defaults.item.marginTop+this.defaults.item.marginBottom+2);break;default:this.defaults.height=this.LegendSource.length*(this.defaults.item.markHeight+this.defaults.item.marginTop+this.defaults.item.marginBottom+2)}this.defaults.height>this.defaults.canvasHeight?this.defaults.marginTop=0:this.defaults.marginTop=this.defaults.canvasHeight-this.defaults.height}else this.defaults.marginTop=.01*this.defaults.canvasHeight;this.defaults.marginLeft=(this.defaults.marginLeft+"").indexOf("%")>-1?this.defaults.marginLeft.replace("%","")/100*this.defaults.canvasWidth:this.defaults.marginLeft,this.defaults.marginTop=(this.defaults.marginTop+"").indexOf("%")>-1?this.defaults.marginTop.replace("%","")/100*this.defaults.canvasHeight:this.defaults.marginTop;var n=this.defaults;if(this.canvas.setStart(),"top"==n.position||"bottom"==n.position?this.renderHorizon(this.canvas,n):"left"!=n.position&&"right"!=n.position||this.renderVertical(this.canvas,n),this.st=this.canvas.setFinish(),("top"==n.position||"bottom"==n.position)&&void 0==t){var e=0;if(1==n.item.isMarkAboveMarkText){switch(n.item.markStyle){case"rect":e=((this.tempMarkTextWidth>n.item.markWidth?this.tempMarkTextWidth:n.item.markWidth)+5+n.item.marginLeft+n.item.marginRight)*this.LegendSource.length;break;case"circle":e=((this.tempMarkTextWidth>2*n.item.markRadius?this.tempMarkTextWidth:2*n.item.markRadius)+5+n.item.marginLeft+n.item.marginRight)*this.LegendSource.length;break;default:e=((this.tempMarkTextWidth>n.item.markWidth?this.tempMarkTextWidth:n.item.markWidth)+5+n.item.marginLeft+n.item.marginRight)*this.LegendSource.length}}else switch(n.item.markStyle){case"rect":e=(this.tempMarkTextWidth+10+n.item.markWidth+n.item.marginLeft+n.item.marginRight)*this.LegendSource.length;break;case"circle":e=(this.tempMarkTextWidth+10+n.item.marginLeft+2*n.item.markRadius+n.item.marginRight)*this.LegendSource.length;break;default:e=(this.tempMarkTextWidth+10+n.item.markWidth+n.item.marginLeft+n.item.marginRight)*this.LegendSource.length}e<this.defaults.canvasWidth&&this.st.transform("t"+(this.defaults.canvasWidth-e)/2+",0")}},o.prototype.renderHorizon=function(t,e){var o=e.item,a=e.marginLeft,s=0,u=1,c=(o.markTextWidth,n.max(this.LegendSource,function(t){return t.length})),h=t.text(a,o.marginTop,c);h.attr({"text-anchor":"start","font-family":o.fontFamily,"font-size":o.fontSize,"font-weight":o.fontWeight}).attr(this.defaults.legendStyle&&this.defaults.legendStyle);var l=h.getBBox().width;h.remove();for(var f=0;f<this.LegendSource.length;f++){var d,p,g,m=0,v=0,y=0,b=0;switch(o.markStyle){case"rect":m=(a+=o.marginLeft)-2,"top"===e.position?(s=1==o.isMarkAboveMarkText?e.marginTop+30+u*o.marginTop+(u-1)*(o.markHeight+o.markHeight/2+(this.tempMarkTextHeight||0)+o.marginBottom):e.marginTop+u*o.marginTop+(u-1)*o.markHeight+(u-1)*o.marginBottom,g=e.marginTop+u*o.marginTop+o.markHeight/2+(u-1)*o.markHeight+(u-1)*o.marginBottom):g=(s=1==o.isMarkAboveMarkText?e.canvasHeight-u*o.marginTop-(u-1)*(o.markHeight+o.markHeight/2+(this.tempMarkTextHeight||0)+o.marginBottom):e.canvasHeight-u*o.marginBottom-u*o.markHeight)+o.markHeight/2,v=s-4,p=t.rect(a,s,o.markWidth,o.markHeight,this.defaults.roundRatio),a+=5+o.markWidth;break;case"circle":m=(a+=o.marginLeft+o.markRadius)-o.markRadius-2,g="top"===e.position?1==o.isMarkAboveMarkText?(s=e.marginTop+30+u*(o.marginTop+o.markRadius)+(u-1)*(o.marginBottom+o.markRadius+(this.tempMarkTextHeight||0)))+o.markRadius+17:s=e.marginTop+u*(o.marginTop+o.markRadius)+(u-1)*(o.marginBottom+o.markRadius):1==o.isMarkAboveMarkText?(s=e.canvasHeight-u*(o.marginTop+o.markRadius)-(u-1)*(o.marginBottom+o.markRadius+(this.tempMarkTextHeight||0)))+o.markRadius+17:s=e.canvasHeight-u*(o.marginTop+o.markRadius)-(u-1)*(o.marginBottom+o.markRadius),v=s-o.markRadius-4,p=t.circle(a,s,o.markRadius),a+=o.markRadius+5;break;default:m=(a+=o.marginLeft)-2,"top"===e.position?(s=1==o.isMarkAboveMarkText?e.marginTop+30+u*o.marginTop+(u-1)*(o.markHeight+o.markHeight/2+(this.tempMarkTextHeight||0)+o.marginBottom):e.marginTop+u*o.marginTop+(u-1)*o.markHeight+(u-1)*o.marginBottom,g=e.marginTop+u*o.marginTop+o.markHeight/2+(u-1)*o.markHeight+(u-1)*o.marginBottom):(s=1==o.isMarkAboveMarkText?e.canvasHeight-u*o.marginTop-(u-1)*(o.markHeight+o.markHeight/2+(this.tempMarkTextHeight||0)+o.marginBottom):e.canvasHeight-u*o.marginTop-(u-1)*o.markHeight+(u-1)*o.marginBottom,g=e.canvasHeight-u*o.marginTop-o.markHeight/2-(u-1)*o.markHeight-(u-1)*o.marginBottom),v=s-4,p=t.rect(a,s,o.markWidth,o.markHeight,this.defaults.roundRatio),a+=5+o.markWidth}var x=i.getColor(this.LegendSource[f],this.owner.colorDict,this.owner.colorArray,this.owner.themeColor,this.defaults.colorMode);p.attr({"text-anchor":"start",stroke:x,"stroke-opacity":.5,"fill-opacity":this.defaults.opacity,fill:x});var M=t.text(a,o.marginTop,this.LegendSource[f]);M.attr({"font-family":o.fontFamily,"font-size":o.fontSize,"font-weight":o.fontWeight,fill:o.fontColor});var k=t.set();k.push(p),k.push(M);var C=this;this.LegendSource[f].index=f,k.data("obj",this.LegendSource[f]).data("index",f).hover(function(){var t={text:this.data("obj"),index:this.data("index")};C.highlight(t.text),C.fire("hoverIn",t),C.defaults.onMouseOver(t)},function(){var t={text:this.data("obj"),index:this.data("index")};C.lowlight(t.text),C.fire("hoverOut",t),C.defaults.onMouseOut(t)}).click(function(){if(r.isMobile)return null;var t={text:this.data("obj"),index:this.data("index")};C.fire("click",t),C.defaults.onClick(t)}).touchstart(function(){var t={text:this.data("obj"),index:this.data("index")};C.fire("click",t),C.defaults.onClick(t)});var _=M.getBBox();this.tempMarkTextWidth=l;var w=g,T=a;if(1==o.isMarkAboveMarkText)switch(o.markStyle){case"rect":w=g+u*(o.markHeight/2+_.height);var S=(T=a-o.markWidth-5)+((E=o.markWidth>this.tempMarkTextWidth?o.markWidth:this.tempMarkTextWidth)-o.markWidth)/2;T+=(E-l)/2,p.attr({x:""+S}),o.markWidth<=this.tempMarkTextWidth?a=a-o.markWidth-5+o.marginRight+this.tempMarkTextWidth:(a=a-o.markWidth-5+o.marginRight+o.markWidth,T-=3),m=o.markWidth>l?S-2:T-2;break;case"circle":S=(T=a-2*o.markRadius)+((E=2*o.markRadius>this.tempMarkTextWidth?2*o.markRadius:this.tempMarkTextWidth)-2*o.markRadius)/2+o.markRadius;T=T+(E-l)/2-l/2+o.markRadius,p.attr({cx:""+S}),2*o.markRadius<=this.tempMarkTextWidth?a=a-2*o.markRadius+o.marginRight+o.markRadius+this.tempMarkTextWidth:(a=a-2*o.markRadius+o.marginRight+o.markRadius+2*o.markRadius,T=T-o.markRadius+l/2-3),m=2*o.markRadius>l?S-o.markRadius-2:T-2;break;default:w=g+u*(o.markHeight/2+_.height);S=(T=a-o.markWidth-5)+((E=o.markWidth>this.tempMarkTextWidth?o.markWidth:this.tempMarkTextWidth)-o.markWidth)/2;T+=(E-l)/2,p.attr({x:""+S}),o.markWidth<=this.tempMarkTextWidth?a=a-o.markWidth-5+o.marginRight+this.tempMarkTextWidth:(a=a-o.markWidth-5+o.marginRight+o.markWidth,T-=3),m=o.markWidth>l?S-2:T-2}M.attr({x:T,"text-anchor":"start",y:w}).attr(this.defaults.legendStyle&&this.defaults.legendStyle);var F=a+5+l+o.marginRight;if(1==o.isMarkAboveMarkText&&(F=a+o.marginRight),F>e.canvasWidth){switch(a=e.marginLeft,u+=1,this.tempMarkTextHeight=_.height,o.markStyle){case"rect":m=(a+=o.marginLeft)-2,"top"===e.position?(s=1==o.isMarkAboveMarkText?e.marginTop+30+u*o.marginTop+(u-1)*(o.markHeight+o.markHeight/2+_.height+o.marginBottom):e.marginTop+u*o.marginTop+(u-1)*o.markHeight+(u-1)*o.marginBottom,g=e.marginTop+u*o.marginTop+o.markHeight/2+(u-1)*o.markHeight+(u-1)*o.marginBottom):g=(s=1==o.isMarkAboveMarkText?e.canvasHeight-u*o.marginTop-(u-1)*(o.markHeight+o.markHeight/2+_.height+o.marginBottom):e.canvasHeight-u*o.marginBottom-u*o.markHeight)+o.markHeight/2,v=s-4,p.attr({x:a,y:s}),a+=5+o.markWidth;break;case"circle":m=(a+=o.marginLeft+o.markRadius)-o.markRadius-2,g="top"===e.position?1==o.isMarkAboveMarkText?(s=e.marginTop+30+u*(o.marginTop+o.markRadius)+(u-1)*(o.marginBottom+o.markRadius+(this.tempMarkTextHeight||0)))+o.markRadius+17:s=e.marginTop+u*(o.marginTop+o.markRadius)+(u-1)*(o.marginBottom+o.markRadius):1==o.isMarkAboveMarkText?(s=e.canvasHeight-u*(o.marginTop+o.markRadius)-(u-1)*(o.marginBottom+o.markRadius+(this.tempMarkTextHeight||0)))+o.markRadius+17:s=e.canvasHeight-u*(o.marginTop+o.markRadius)-(u-1)*(o.marginBottom+o.markRadius),v=s-o.markRadius-4,p.attr({cx:a,cy:s}),a+=o.markRadius+5;break;default:m=(a+=o.marginLeft)-2,"top"===e.position?(s=1==o.isMarkAboveMarkText?e.marginTop+30+u*o.marginTop+(u-1)*(o.markHeight+o.markHeight/2+_.height+o.marginBottom):e.marginTop+u*o.marginTop+(u-1)*o.markHeight+(u-1)*o.marginBottom,g=e.marginTop+u*o.marginTop+o.markHeight/2+(u-1)*o.markHeight+(u-1)*o.marginBottom):(s=1==o.isMarkAboveMarkText?e.canvasHeight-u*o.marginTop-(u-1)*(o.markHeight+o.markHeight/2+_.height+o.marginBottom):e.canvasHeight-u*o.marginTop-(u-1)*o.markHeight+(u-1)*o.marginBottom,g=e.canvasHeight-u*o.marginTop-o.markHeight/2-(u-1)*o.markHeight-(u-1)*o.marginBottom),v=s-4,p.attr({x:a,y:s}),a+=5+o.markWidth}T=a;if(1==o.isMarkAboveMarkText)switch(o.markStyle){case"rect":T=a-o.markWidth-5,a=a-o.markWidth-5;S=T+((E=o.markWidth>this.tempMarkTextWidth?o.markWidth:this.tempMarkTextWidth)-o.markWidth)/2;T+=(E-l)/2,p.attr({x:""+S}),o.markWidth<=this.tempMarkTextWidth?a=a+o.marginRight+this.tempMarkTextWidth+o.marginLeft:(a=a+o.marginRight+o.markWidth+o.marginLeft,T-=3),m=o.markWidth>l?S-2:T-2,M.attr({x:T,y:g+u*(o.markHeight/2+_.height)});break;case"circle":w=g;var E;S=(T=a-2*o.markRadius)+((E=2*o.markRadius>this.tempMarkTextWidth?2*o.markRadius:this.tempMarkTextWidth)-2*o.markRadius)/2+o.markRadius;T=T+(E-l)/2-l/2+o.markRadius,p.attr({cx:""+S}),2*o.markRadius<=this.tempMarkTextWidth?a=a-2*o.markRadius+o.marginRight+o.markRadius+this.tempMarkTextWidth+o.marginLeft:(a=a-2*o.markRadius+o.marginRight+o.markRadius+2*o.markRadius+o.marginLeft,T=T-o.markRadius+l/2-3),m=2*o.markRadius>l?S-o.markRadius-2:T-2,M.attr({x:T,y:w});break;default:if(T=T-o.markWidth-5,a=a-o.markWidth-5,o.markWidth<=_.width){S=T+(_.width-o.markWidth)/2;p.attr({x:""+S}),a+=_.width+o.marginRight+o.marginLeft}else T+=(o.markWidth-_.width)/2,a+=o.markWidth+o.marginRight+o.marginLeft;M.attr({x:T,y:g+u*(o.markHeight/2+_.height)})}else M.attr({x:T,y:g}),a+=5+l+o.marginRight}else 1==o.isMarkAboveMarkText?a+=o.marginRight+10:a+=5+l+o.marginRight;var A=p.getBBox(),L=M.getBBox();1==o.isMarkAboveMarkText?(y=l+4,b=p.getBBox().height+L.height+12):(y=A.width+5+l+4,b=A.height+8),d=t.rect(m,v,y,b).attr({"stroke-width":"0",fill:o.mouseOverBgColor}).hide().toBack(),this.underBn[this.LegendSource[f]]=d,this.legendText[this.LegendSource[f]]=M}},o.prototype.renderVertical=function(t,e){for(var o,a,s,u=[],c=e.item,h=0,l=0,f=1,d=1,p=c.markTextWidth,g=0,m=0,v=0,y=this.LegendSource.length;v<y;v++){var b=this.LegendSource[v].length;m<b&&(m=b,a=v)}s=this.LegendSource[a],(S=t.text(h,c.marginTop,s)).attr({"text-anchor":"start","font-family":c.fontFamily,"font-size":c.fontSize,"font-weight":c.fontWeight}).attr(this.defaults.legendStyle&&this.defaults.legendStyle),p=S.getBBox().width,S.remove();for(v=0;v<this.LegendSource.length;v++){var x,M,k,C,_=0,w=0;switch(c.markStyle){case"rect":_=(h="left"===e.position?e.marginLeft+d*c.marginLeft+(d-1)*(c.markWidth+5+(g<p?p:g)+c.marginBottom):e.canvasWidth-10-p-d*c.marginLeft+(d-1)*(c.markWidth+5+(g<p?p:g)+c.marginBottom))-2,w=(l=e.marginTop+f*c.marginTop+(f-1)*c.markHeight+(f-1)*c.marginBottom)-4,M=e.marginTop+f*c.marginTop+c.markHeight/2+(f-1)*c.markHeight+(f-1)*c.marginBottom,x=t.rect(h,l,c.markWidth,c.markHeight,this.defaults.roundRatio),h+=5+c.markWidth;break;case"circle":_=(h="left"===e.position?e.marginLeft+d*(c.marginLeft+c.markRadius)+(d-1)*(2*c.markRadius+5+(g<p?p:g)+c.marginBottom):e.canvasWidth-10-p-d*(c.marginLeft+c.markRadius)+(d-1)*(2*c.markRadius+5+(g<p?p:g)+c.marginBottom))-c.markRadius-2,w=(l=e.marginTop+f*c.marginTop+f*c.markRadius+(f-1)*c.marginBottom+(f-1)*c.markRadius)-c.markRadius-4,M=e.marginTop+f*c.marginTop+f*c.markRadius+(f-1)*c.marginBottom+(f-1)*c.markRadius,x=t.circle(h,l,c.markRadius),h+=5+c.markRadius;break;default:_=(h="left"===e.position?e.marginLeft+d*c.marginLeft+(d-1)*(c.markWidth+5+(g<p?p:g)+c.marginBottom):e.canvasWidth-10-p-d*c.marginLeft+(d-1)*(c.markWidth+5+(g<p?p:g)+c.marginBottom))-2,w=(l=e.marginTop+f*c.marginTop+(f-1)*c.markHeight+(f-1)*c.marginBottom)-4,M=e.marginTop+f*c.marginTop+c.markHeight/2+(f-1)*c.markHeight+(f-1)*c.marginBottom,x=t.rect(h,l,c.markWidth,c.markHeight),h+=5+c.markWidth}var T=i.getColor(this.LegendSource[v],this.owner.colorDict,this.owner.colorArray,this.owner.themeColor,this.defaults.colorMode);x.attr({"text-anchor":"start",stroke:T,"stroke-opacity":.5,fill:T,"fill-opacity":this.defaults.opacity});var S=t.text(h,c.marginTop,this.LegendSource[v]),F=t.set();F.push(x),F.push(S);var E=this;this.LegendSource[v].index=v,F.data("obj",this.LegendSource[v]).data("index",v).hover(function(){var t={text:this.data("obj"),index:this.data("index")};E.highlight(t.text),E.fire("hoverIn",t),E.defaults.onMouseOver(t)},function(){var t={text:this.data("obj"),index:this.data("index")};E.lowlight(t.text),E.fire("hoverOut",t),E.defaults.onMouseOut(t)}).click(function(){if(r.isMobile)return null;var t={text:this.data("obj"),index:this.data("index")};E.fire("click",t),E.defaults.onClick(t)}).touchstart(function(){var t={text:this.data("obj"),index:this.data("index")};E.fire("click",t),E.defaults.onClick(t)}),S.attr({"text-anchor":"start",y:M,"font-family":c.fontFamily,"font-size":c.fontSize,"font-weight":c.fontWeight,fill:c.fontColor}).attr(this.defaults.legendStyle&&this.defaults.legendStyle);var A=x.getBBox().height;if(g=S.getBBox().width,u.push(g),g=n.sortBy(u,function(t){return t}).reverse()[0],l+A>e.canvasHeight){switch(f=1,d+=1,c.markStyle){case"rect":_=(h=e.marginLeft+d*c.marginLeft+(d-1)*(c.markWidth+5+(g<p?p:g)+c.marginBottom))-2,w=(l=e.marginTop+f*c.marginTop+(f-1)*c.markHeight+(f-1)*c.marginBottom)-4,M=e.marginTop+f*c.marginTop+c.markHeight/2+(f-1)*c.markHeight+(f-1)*c.marginBottom,x.attr({x:h,y:l}),h+=5+c.markWidth;break;case"circle":_=(h=e.marginLeft+d*(c.marginLeft+c.markRadius)+(d-1)*(2*c.markRadius+5+(g<p?p:g)+c.marginBottom))-c.markRadius-2,w=(l=e.marginTop+f*c.marginTop+f*c.markRadius+(f-1)*c.marginBottom+(f-1)*c.markRadius)-c.markRadius-4,M=e.marginTop+f*c.marginTop+f*c.markRadius+(f-1)*c.marginBottom+(f-1)*c.markRadius,x.attr({cx:h,cy:l}),h+=5+c.markRadius;break;default:_=(h=e.marginLeft+d*c.marginLeft+(d-1)*(c.markWidth+5+(g<p?p:g)+c.marginBottom))-2,w=(l=e.marginTop+f*c.marginTop+(f-1)*c.markHeight+(f-1)*c.marginBottom)-4,M=e.marginTop+f*c.marginTop+c.markHeight/2+(f-1)*c.markHeight+(f-1)*c.marginBottom,x.attr({x:h,y:l}),h+=5+c.markWidth}S.attr({x:h,y:M}),f+=1}else f+=1;var L=x.getBBox(),R=S.getBBox();k=L.width+5+R.width+4,C=L.height+8,o=t.rect(_,w,k,C).attr({"stroke-width":"0",fill:c.mouseOverBgColor}).hide().toBack(),this.underBn[this.LegendSource[v]]=o,this.legendText[this.LegendSource[v]]=S}},o.prototype.highlight=function(t){var e=n.keys(this.underBn);t&&n.contains(e,t+"")&&(this.underBn[t].show(),this.legendText[t].attr({fill:this.defaults.item.mouseOverColor}))},o.prototype.lowlight=function(t){var e=this;n.each(this.underBn,function(t,n){t.hide&&t.hide()}),n.each(this.legendText,function(t,n){t.attr&&t.attr({fill:e.defaults.item.fontColor})}),this.lastClickText&&(this.underBn[this.lastClickText].show(),this.legendText[this.lastClickText].attr({fill:this.defaults.item.mouseOverColor}))},o.prototype.holdLight=function(t){t==this.lastClickText?(t&&this.underBn[t].hide(),t&&this.legendText[t].attr({fill:this.defaults.item.fontColor}),this.lastClickText=void 0):(this.lastClickText=void 0,this.lowlight(),t&&this.underBn[t].show(),t&&this.legendText[t].attr({fill:this.defaults.item.mouseOverColor}),this.lastClickText=t)},o.prototype.holdLightCancel=function(){this.lastClickText=void 0,this.lowlight()},t.exports=o}(t)}).call(this,e(10)(t),e(16))},807:function(t,n,e){(function(t){
/*!***********************************************
Copyright (c) 2014, Neusoft Inc.
All rights reserved.
SaCa Theme Version 2.0.0
************************************************/
!function(t){var n=function(){};n.get=function(t,e,r,i){var o=n.current||"default";return n._currentTheme||(n._currentTheme=n[o]),n[i]?n[i][t]:n._currentTheme[t]},n.add=function(){var t=[].slice.call(arguments,0),e=t.pop();if(arguments.length<2)throw new Error("DataViz Error # Theme Error : Arguments format error. should be: (themsName, theme)");if("object"!=typeof e)throw new Error("DataViz Error # Theme Error : Second argument theme should be a json object");if(!e.COLOR_ARGS)throw new Error("DataViz Error # Theme Error : theme.COLOR_ARGS is needed");if(!e.COLOR_ARGS instanceof Array)throw new Error("DataViz Error # Theme Error : theme.COLOR_ARGS should be an array");if(!(e.COLOR_ARGS[0]instanceof Array))throw new Error("DataViz Error # Theme Error : theme.COLOR_ARGS[0] should be an array");for(var r=0,i=t.length;r<i;r++){var o=t[r];n[o]=e}},n.reColor=function(t){t=t.substring(1);var n=Math.round(.299*parseInt(t.substring(0,2),16)).toString(16);1==n.length&&(n="0"+n);var e=Math.round(.587*parseInt(t.substring(2,4),16)).toString(16);1==e.length&&(e="0"+e);var r=Math.round(.114*parseInt(t.substring(4,6),16)).toString(16);return 1==r.length&&(r="0"+r),"#"+n+e+r},n.changeTheme=function(t){var e=n[t];return e&&(n.current=t,n._currentTheme=null),!!e},n.add("default","theme0",{COLOR_ARGS:[["#3dc6f4","#8ce3ff"],["#214fd9","#7396ff"],["#4f21d9","#9673ff"],["#c43df2","#e38cff"],["#d8214f","#ff7396"],["#f3c53c","#ffe38c"]]}),n.add("theme1",{COLOR_ARGS:[["#e72e8b","#ff7fbf"],["#d94f21","#ff9673"],["#f3c53c","#ffe38c"],["#8be62f","#bfff7f"],["#14cc14","#66ff66"],["#2fe68a","#7fffc0"]]}),n.add("theme2",{COLOR_ARGS:[["#2f8ae7","#7fc0ff"],["#8a2ee7","#bf7fff"],["#f33dc6","#ff8ce3"],["#8be62f","#bfff7f"],["#14cc14","#66ff66"],["#2fe68a","#7fffc0"]]}),n.add("theme3",{COLOR_ARGS:[["#2f8ae7","#896DA3"],["#8e34df","#FFADA6"],["#f738c0","#65FCFC"],["#84e653","#555566"],["#0cc53e","#db3f7c"],["#00e793","#db3f7c"]]}),n.add("theme4",{COLOR_ARGS:[["#d94f21","#7a88d1"],["#579ce2","#87bdf4"],["#3bb4df","#7fd1ef"],["#a380ff","#baa0ff"],["#a164c5","#c28fe1"],["#d93a92","#ec74b6"],["#b82377","#d569a7"],["#bb3ca3","#d381c2"],["#da2d57","#ec6b8a"],["#4ca716","#4ce845"],["#5b63c2","#8e93d7"],["#15a9a3","#4ecac5"],["#a9ab48","#e8c670"],["#2aa5f5","#73c4fa"],["#f67e10","#feb648"],["#1faa77","#62c8a2"],["#eb4f20","#f58563"],["#ffc000","#ffd659"],["#f16ebc","#f6a1d3"],["#d23457","#e27b92"]]}),n.add("2DChordTheme",{COLOR_ARGS:[["#0000e8","#b500b5"],["#0030e8","#d500d5"],["#0060e8","#f500f5"],["#0090e8","#f520f5"],["#00c0e8","#f540f5"],["#00f0e8","#f560f5"],["#30f0e8","#f580f5"],["#60f0e8","#f5a0f5"],["#90f0e8","#f5c0f5"],["#c0f0e8","#f5e0f5"]]}),n.add("calendar-RdYlGn",{COLOR_ARGS:[["#1A9850","#66BD63"],["#A6CF6A","#D9EF8B"],["#FFFFBF","#FEE08B"],["#FDAE61","#F46D43"],["#D73027","#118342"]]}),n.add("tagcloud-gradient",{COLOR_ARGS:[["#33FF00","#33FF11"],["#33FF22","#33FF33"],["#33FF44","#33FF55"],["#33FF66","#33FF77"],["#33FF88","#33FF99"],["#33FFAA","#33FFBB"],["#33FFCC","#33FFDD"],["#33FFEE","#33FFFF"]]}),n.add("red",{COLOR_ARGS:[["#FFFFCC","#CCFFFF"],["#99CCCC","#FFCC99"],["#FF9999","#996699"],["#CC9999","#FFFFCC"],["#FFCCCC","#FFFF99"],["#0099CC","#CCCCCC"],["#FF9966","#FF6666"],["#CC9966","#666666"],["#FF6666","#FFFF66"],["#CC3333","#CCCCCC"],["#993333","#CCCC00"],["#CCCC99","#666666"],["#FF6666","#FFFF00"],["#CC0033","#333333"],["#336633","#990033"],["#993333","#CC9966"],["#FF0033","#333399"],["#CC0033","#000000"],["#000000","#99CC00"],["#999933","#993333"]]}),n.add("nature",{COLOR_ARGS:[["#FFFF99","#99CC99"],["#996633","#BBFF99"],["#006600","#66CC66"],["#666600","#CCCC66"],["#669933","#CCCC33"],["#666633","#999933"],["#003300","#669933"],["#006633","#663300"],["#666600","#FFFFCC"],["#006633","#333300"]]}),n.add("classical",{COLOR_ARGS:[["#6699CC","#663366"],["#990033","#CCFF66"],["#666699","#660033"],["#663300","#FF9933"],["#990033","#006633"],["#660033","#999933"],["#993366","#CCCC33"],["#996600","#CCCC66"],["#009933","#CC9900"],["#666633","#CCCC33"]]}),n.add("simple",{COLOR_ARGS:[["#CCCCCC","#FFFFFF"],["#CCFF66","#EEFFFF"],["#99CCFF","#FFBBFF"],["#CCCC33","#EEFFFF"],["#0099FF","#FEFFCC"],["#99CC33","#CCCCCC"],["#CCCCCC","#003366"],["#0099CC","#CCFF66"],["#3399CC","#003366"],["#ABCDEF","#ABCDEF"]]}),n.add("women",{COLOR_ARGS:[["#CCCCCC","#CC99CC"],["#FFCCCC","#FF99CC"],["#CC3399","#9933CC"],["#9999CC","#FFFFCC"],["#663366","#CCCCCC"],["#FF9999","#FFCCCC"],["#996666","#CC99CC"],["#CC9999","#CCCCCC"],["#FF9999","#996699"],["#996699","#FFCCCC"]]}),n.add("sports",{COLOR_ARGS:[["#FF6666","#FFFF00"],["#FF9944","#FFFFFF"],["#339933","#FFCC33"],["#FF9900","#FFFFCC"],["#CC6600","#CCCC44"],["#99CC33","#FFFFFF"],["#99BB33","#FF6666"],["#336699","#FFFFFF"],["#FF0033","#333399"],["#33CC99","#FFFF00"]]}),n.add("fashion",{COLOR_ARGS:[["#333366","#99CC33"],["#999999","#003366"],["#003399","#CCFF99"],["#999933","#336699"],["#666666","#99CC33"],["#999999","#336699"],["#3366CC","#CCCC66"],["#6699CC","#006699"],["#003366","#CCCCCC"],["#000000","#999999"]]}),n.add("flower",{COLOR_ARGS:[["#B90091","#540EAD"],["#1142AA","#009B95"],["#00CC00","#AEF100"],["#FFDF00","#FFC000"],["#FFA200","#FF3900"]]}),n.add("rainbow",{COLOR_ARGS:[["#3366CC","#DC3912"],["#FF9900","#109618"],["#990099","#0099C6"]]}),n.add("business0",{COLOR_ARGS:[["#94D4D3","#366F8A"],["#FFC620","#B6B7B9"],["#B2918B","#EACDC7"],["#EDD697","#C9E2E0"],["#71A0CE","#B7CEE5"]]}),n.add("business1",{COLOR_ARGS:[["#EAA13A","#2E677A"],["#BDC033","#2F124A"],["#E85045","#A6A6A6"]]}),n.add("business2",{COLOR_ARGS:[["#378FB5","#29A78F"],["#9EC45F","#FBB320"],["#C74839","#45214D"]]}),n.add("business3",{COLOR_ARGS:[["#FFAB03","#E74A65"],["#0070B0","#6F2FA1"],["#456083","#E288E2"],["#02C876","#465F85"]]}),n.add("business4",{COLOR_ARGS:[["#58C6E7","#446087"],["#CD2056","#446087"]]}),n.add("gradient_earth",{COLOR_ARGS:[["#7487AF","#B4B6CB"],["#D3C1CD","#B7AB9F"],["#B5A38B","#B9A175"],["#AAA69B","#988259"]]}),n.add("gradient_blue",{COLOR_ARGS:[["#D7E9EF","#B6DAE3"],["#A1D2D8","#70B3CD"],["#3C8EB9","#41618D"]]}),n.add("gradient_green",{COLOR_ARGS:[["#D0D807","#B1C101"],["#91AE00","#5D8800"],["#316C05","#0A4807"]]}),n.add("gradient_grey",{COLOR_ARGS:[["#E1E2E4","#CFD0D2"],["#C6CACD","#AAAEB9"],["#909090","#61666A"]]}),n.add("gradient_orange",{COLOR_ARGS:[["#FAF3CD","#FDEEA9"],["#FDE06B","#F8B600"],["#F39801","#E3742D"]]}),n.add("gradient_purple",{COLOR_ARGS:[["#F9D5D5","#F6C6DC"],["#D076AC","#BE4C92"],["#9C3E8C","#6B1A80"]]}),n.add("chinaTelecom",{COLOR_ARGS:[["#00479C","#9FD10F"],["#F0861D","#577403"]]}),n.add("macarons",{COLOR_ARGS:[["#2ec7c9","#b6a2de"],["#5ab1ef","#ffb980"],["#d87a80","#8d98b3"],["#e5cf0d","#97b552"],["#95706d","#dc69aa"],["#07a2a4","#9a7fd1"],["#588dd5","#f5994e"],["#c05050","#59678c"],["#c9ab00","#7eb00a"],["#6f5553","#c14089"]]}),t.exports=n}(t)}).call(this,e(10)(t))},812:function(t,n,e){(function(t){!function(){var n={version:"3.1.7"};Date.now||(Date.now=function(){return+new Date});var e=document,r=window;try{e.createElement("div").style.setProperty("opacity",0,"")}catch(t){if(void 0!==r.CSSStyleDeclaration){var i=r.CSSStyleDeclaration.prototype,o=i.setProperty;i.setProperty=function(t,n,e){o.call(this,t,n+"",e)}}}function a(t){return null!=t&&!isNaN(t)}n.ascending=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},n.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},n.min=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&(null==(e=t[i])||e!=e);)e=void 0;for(;++i<o;)null!=(r=t[i])&&e>r&&(e=r)}else{for(;++i<o&&(null==(e=n.call(t,t[i],i))||e!=e);)e=void 0;for(;++i<o;)null!=(r=n.call(t,t[i],i))&&e>r&&(e=r)}return e},n.max=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&(null==(e=t[i])||e!=e);)e=void 0;for(;++i<o;)null!=(r=t[i])&&r>e&&(e=r)}else{for(;++i<o&&(null==(e=n.call(t,t[i],i))||e!=e);)e=void 0;for(;++i<o;)null!=(r=n.call(t,t[i],i))&&r>e&&(e=r)}return e},n.extent=function(t,n){var e,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a&&(null==(e=i=t[o])||e!=e);)e=i=void 0;for(;++o<a;)null!=(r=t[o])&&(e>r&&(e=r),i<r&&(i=r))}else{for(;++o<a&&(null==(e=i=n.call(t,t[o],o))||e!=e);)e=void 0;for(;++o<a;)null!=(r=n.call(t,t[o],o))&&(e>r&&(e=r),i<r&&(i=r))}return[e,i]},n.sum=function(t,n){var e,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)isNaN(e=+t[o])||(r+=e);else for(;++o<i;)isNaN(e=+n.call(t,t[o],o))||(r+=e);return r},n.mean=function(t,n){var e,r=t.length,i=0,o=-1,s=0;if(1===arguments.length)for(;++o<r;)a(e=t[o])&&(i+=(e-i)/++s);else for(;++o<r;)a(e=n.call(t,t[o],o))&&(i+=(e-i)/++s);return s?i:void 0},n.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],o=e-r;return o?i+o*(t[r]-i):i},n.median=function(t,e){return arguments.length>1&&(t=t.map(e)),(t=t.filter(a)).length?n.quantile(t.sort(n.ascending),.5):void 0},n.bisector=function(t){return{left:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;t.call(n,n[o],o)<e?r=o+1:i=o}return r},right:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;e<t.call(n,n[o],o)?i=o:r=o+1}return r}}};var s=n.bisector(function(t){return t});function u(t){return t.length}function c(t,n){try{for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}catch(e){t.prototype=n}}function h(){}n.bisectLeft=s.left,n.bisect=n.bisectRight=s.right,n.shuffle=function(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t},n.permute=function(t,n){for(var e=[],r=-1,i=n.length;++r<i;)e[r]=t[n[r]];return e},n.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=n.min(arguments,u),r=new Array(e);++t<e;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=arguments[o][t];return r},n.transpose=function(t){return n.zip.apply(n,t)},n.keys=function(t){var n=[];for(var e in t)n.push(e);return n},n.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},n.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},n.merge=function(t){return Array.prototype.concat.apply([],t)},n.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,i=[],o=function(t){var n=1;for(;t*n%1;)n*=10;return n}(Math.abs(e)),a=-1;if(t*=o,n*=o,(e*=o)<0)for(;(r=t+e*++a)>n;)i.push(r/o);else for(;(r=t+e*++a)<n;)i.push(r/o);return i},n.map=function(t){var n=new h;for(var e in t)n.set(e,t[e]);return n},c(h,{has:function(t){return l+t in this},get:function(t){return this[l+t]},set:function(t,n){return this[l+t]=n},remove:function(t){return(t=l+t)in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(n){t.push(n)}),t},values:function(){var t=[];return this.forEach(function(n,e){t.push(e)}),t},entries:function(){var t=[];return this.forEach(function(n,e){t.push({key:n,value:e})}),t},forEach:function(t){for(var n in this)n.charCodeAt(0)===f&&t.call(this,n.substring(1),this[n])}});var l="\0",f=l.charCodeAt(0);function d(){}function p(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function g(){}function m(t){var n=[],e=new h;function r(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}return r.on=function(r,i){var o,a=e.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),e.remove(r)),i&&n.push(e.set(r,{on:i})),t)},r}function v(){n.event.stopPropagation(),n.event.preventDefault()}function y(){for(var t,e=n.event;t=e.sourceEvent;)e=t;return e}function x(t,n){function e(){t.on(n,null)}t.on(n,function(){v(),e()},!0),setTimeout(e,0)}function M(t){for(var e=new g,r=0,i=arguments.length;++r<i;)e[arguments[r]]=m(e);return e.of=function(r,i){return function(o){try{var a=o.sourceEvent=n.event;o.target=t,n.event=o,e[o.type].apply(r,i)}finally{n.event=a}}},e}n.nest=function(){var t,e,r={},i=[],o=[];function a(n,o,s){if(s>=i.length)return e?e.call(r,o):t?o.sort(t):o;for(var u,c,l,f,d=-1,p=o.length,g=i[s++],m=new h;++d<p;)(f=m.get(u=g(c=o[d])))?f.push(c):m.set(u,[c]);return n?(c=n(),l=function(t,e){c.set(t,a(n,e,s))}):(c={},l=function(t,e){c[t]=a(n,e,s)}),m.forEach(l),c}return r.map=function(t,n){return a(n,t,0)},r.entries=function(t){return function t(n,e){if(e>=i.length)return n;var r=[],a=o[e++];return n.forEach(function(n,i){r.push({key:n,values:t(i,e)})}),a?r.sort(function(t,n){return a(t.key,n.key)}):r}(a(n.map,t,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return o[i.length-1]=t,r},r.sortValues=function(n){return t=n,r},r.rollup=function(t){return e=t,r},r},n.set=function(t){var n=new d;if(t)for(var e=0;e<t.length;e++)n.add(t[e]);return n},c(d,{has:function(t){return l+t in this},add:function(t){return this[l+t]=!0,t},remove:function(t){return(t=l+t)in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(n){t.push(n)}),t},forEach:function(t){for(var n in this)n.charCodeAt(0)===f&&t.call(this,n.substring(1))}}),n.behavior={},n.rebind=function(t,n){for(var e,r=1,i=arguments.length;++r<i;)t[e=arguments[r]]=p(t,n,n[e]);return t},n.dispatch=function(){for(var t=new g,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=m(t);return t},g.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.substring(e+1),t=t.substring(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},n.event=null,n.mouse=function(t){return C(t,y())};var k=/WebKit/.test(r.navigator.userAgent)?-1:0;function C(t,i){var o=t.ownerSVGElement||t;if(o.createSVGPoint){var a=o.createSVGPoint();if(k<0&&(r.scrollX||r.scrollY)){var s=(o=n.select(e.body).append("svg").style("position","absolute").style("top",0).style("left",0))[0][0].getScreenCTM();k=!(s.f||s.e),o.remove()}return k?(a.x=i.pageX,a.y=i.pageY):(a.x=i.clientX,a.y=i.clientY),[(a=a.matrixTransform(t.getScreenCTM().inverse())).x,a.y]}var u=t.getBoundingClientRect();return[i.clientX-u.left-t.clientLeft,i.clientY-u.top-t.clientTop]}var _=function(t){return Array.prototype.slice.call(t)};try{_(e.documentElement.childNodes)[0].nodeType}catch(t){_=function(t){for(var n=-1,e=t.length,r=[];++n<e;)r.push(t[n]);return r}}var w=[].__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]};function T(t){return w(t,R),t}n.touches=function(t,n){return arguments.length<2&&(n=y().touches),n?_(n).map(function(n){var e=C(t,n);return e.identifier=n.identifier,e}):[]},n.behavior.drag=function(){var t=M(i,"drag","dragstart","dragend"),e=null;function i(){this.on("mousedown.drag",o).on("touchstart.drag",o)}function o(){var i,o=this,a=t.of(o,arguments),s=n.event.target,u=n.event.touches?n.event.changedTouches[0].identifier:null,c=f(),h=0,l=n.select(r).on(null!=u?"touchmove.drag-"+u:"mousemove.drag",function(){if(!o.parentNode)return d();var t=f(),n=t[0]-c[0],e=t[1]-c[1];h|=n|e,c=t,v(),a({type:"drag",x:t[0]+i[0],y:t[1]+i[1],dx:n,dy:e})}).on(null!=u?"touchend.drag-"+u:"mouseup.drag",d,!0);function f(){var t=o.parentNode;return null!=u?n.touches(t).filter(function(t){return t.identifier===u})[0]:n.mouse(t)}function d(){a({type:"dragend"}),h&&(v(),n.event.target===s&&x(l,"click")),l.on(null!=u?"touchmove.drag-"+u:"mousemove.drag",null).on(null!=u?"touchend.drag-"+u:"mouseup.drag",null)}i=e?[(i=e.apply(o,arguments)).x-c[0],i.y-c[1]]:[0,0],null==u&&v(),a({type:"dragstart"})}return i.origin=function(t){return arguments.length?(e=t,i):e},n.rebind(i,t,"on")};var S=function(t,n){return n.querySelector(t)},F=function(t,n){return n.querySelectorAll(t)},E=e.documentElement,A=E.matchesSelector||E.webkitMatchesSelector||E.mozMatchesSelector||E.msMatchesSelector||E.oMatchesSelector,L=function(t,n){return A.call(t,n)};"function"==typeof Sizzle&&(S=function(t,n){return Sizzle(t,n)[0]||null},F=function(t,n){return Sizzle.uniqueSort(Sizzle(t,n))},L=Sizzle.matchesSelector),n.selection=function(){return tt};var R=n.selection.prototype=[];function D(t){return function(){return S(t,this)}}function O(t){return function(){return F(t,this)}}R.select=function(t){var n,e,r,i,o=[];"function"!=typeof t&&(t=D(t));for(var a=-1,s=this.length;++a<s;){o.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var u=-1,c=r.length;++u<c;)(i=r[u])?(n.push(e=t.call(i,i.__data__,u)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return T(o)},R.selectAll=function(t){var n,e,r=[];"function"!=typeof t&&(t=O(t));for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,u=a.length;++s<u;)(e=a[s])&&(r.push(n=_(t.call(e,e.__data__,s))),n.parentNode=e);return T(r)};var B={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function N(t,e){return t=n.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function z(t){return t.trim().replace(/\s+/g," ")}n.ns={prefix:B,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&(e=t.substring(0,n),t=t.substring(n+1)),B.hasOwnProperty(e)?{space:B[e],local:t}:t}},R.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node();return(t=n.ns.qualify(t)).local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(e in t)this.each(N(e,t[e]));return this}return this.each(N(t,e))},n.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function V(t){return new RegExp("(?:^|\\s+)"+n.requote(t)+"(?:\\s+|$)","g")}function W(t,n){var e=(t=t.trim().split(/\s+/).map(q)).length;return"function"==typeof n?function(){for(var r=-1,i=n.apply(this,arguments);++r<e;)t[r](this,i)}:function(){for(var r=-1;++r<e;)t[r](this,n)}}function q(t){var n=V(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",z(i+" "+t))):e.setAttribute("class",z(i.replace(n," ")))}}function j(t,n,e){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}:function(){this.style.setProperty(t,n,e)}}function I(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function P(t){return{__data__:t}}function G(t){return function(){return L(this,t)}}function U(){}function Y(t,e,r){var i="__on"+t,o=t.indexOf("."),a=Z;o>0&&(t=t.substring(0,o));var s=$.get(t);function u(){var n=this[i];n&&(this.removeEventListener(t,n,n.$),delete this[i])}return s&&(t=s,a=X),o?e?function(){var n=a(e,_(arguments));u.call(this),this.addEventListener(t,this[i]=n,n.$=r),n._=e}:u:e?U:function(){var e,r=new RegExp("^__on([^.]+)"+n.requote(t)+"$");for(var i in this)if(e=i.match(r)){var o=this[i];this.removeEventListener(e[1],o,o.$),delete this[i]}}}R.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=t.trim().split(/^|\s+/g)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!V(t[i]).test(n))return!1;return!0}for(n in t)this.each(W(n,t[n]));return this}return this.each(W(t,n))},R.style=function(t,n,e){var i=arguments.length;if(i<3){if("string"!=typeof t){for(e in i<2&&(n=""),t)this.each(j(e,t[e],n));return this}if(i<2)return r.getComputedStyle(this.node(),null).getPropertyValue(t);e=""}return this.each(j(t,n,e))},R.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(I(n,t[n]));return this}return this.each(I(t,n))},R.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},R.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},R.append=function(t){return t=n.ns.qualify(t),this.select(t.local?function(){return this.appendChild(e.createElementNS(t.space,t.local))}:function(){return this.appendChild(e.createElementNS(this.namespaceURI,t))})},R.insert=function(t,r){return t=n.ns.qualify(t),"function"!=typeof r&&(r=D(r)),this.select(t.local?function(n,i){return this.insertBefore(e.createElementNS(t.space,t.local),r.call(this,n,i))}:function(n,i){return this.insertBefore(e.createElementNS(this.namespaceURI,t),r.call(this,n,i))})},R.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},R.data=function(t,n){var e,r,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(e=this[0]).length);++i<o;)(r=e[i])&&(t[i]=r.__data__);return t}function a(t,e){var r,i,o,a=t.length,l=e.length,f=Math.min(a,l),d=new Array(l),p=new Array(l),g=new Array(a);if(n){var m,v=new h,y=new h,b=[];for(r=-1;++r<a;)m=n.call(i=t[r],i.__data__,r),v.has(m)?g[r]=i:v.set(m,i),b.push(m);for(r=-1;++r<l;)m=n.call(e,o=e[r],r),(i=v.get(m))?(d[r]=i,i.__data__=o):y.has(m)||(p[r]=P(o)),y.set(m,o),v.remove(m);for(r=-1;++r<a;)v.has(b[r])&&(g[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],o=e[r],i?(i.__data__=o,d[r]=i):p[r]=P(o);for(;r<l;++r)p[r]=P(e[r]);for(;r<a;++r)g[r]=t[r]}p.update=d,p.parentNode=d.parentNode=g.parentNode=t.parentNode,s.push(p),u.push(d),c.push(g)}var s=K([]),u=T([]),c=T([]);if("function"==typeof t)for(;++i<o;)a(e=this[i],t.call(e,e.parentNode.__data__,i));else for(;++i<o;)a(e=this[i],t);return u.enter=function(){return s},u.exit=function(){return c},u},R.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},R.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=G(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var s=0,u=e.length;s<u;s++)(r=e[s])&&t.call(r,r.__data__,s)&&n.push(r)}return T(i)},R.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},R.sort=function(t){t=function(t){arguments.length||(t=n.ascending);return function(n,e){return!n-!e||t(n.__data__,e.__data__)}}.apply(this,arguments);for(var e=-1,r=this.length;++e<r;)this[e].sort(t);return this.order()},R.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){for(e in r<2&&(n=!1),t)this.each(Y(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(Y(t,n,e))};var $=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Z(t,e){return function(r){var i=n.event;n.event=r,e[0]=this.__data__;try{t.apply(this,e)}finally{n.event=i}}}function X(t,n){var e=Z(t,n);return function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function J(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],a=0,s=o.length;a<s;a++)(i=o[a])&&n(i,a,e);return t}function K(t){return w(t,Q),t}$.forEach(function(t){"on"+t in e&&$.remove(t)}),R.each=function(t){return J(this,function(n,e,r){t.call(n,n.__data__,e,r)})},R.call=function(t){var n=_(arguments);return t.apply(n[0]=this,n),this},R.empty=function(){return!this.node()},R.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null};var Q=[];n.selection.enter=K,n.selection.enter.prototype=Q,Q.append=R.append,Q.insert=R.insert,Q.empty=R.empty,Q.node=R.node,Q.select=function(t){for(var n,e,r,i,o,a=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,a.push(n=[]),n.parentNode=i.parentNode;for(var c=-1,h=i.length;++c<h;)(o=i[c])?(n.push(r[c]=e=t.call(i.parentNode,o.__data__,c)),e.__data__=o.__data__):n.push(null)}return T(a)},R.transition=function(){var t,n,e=ho||++fo,r=[],i=Object.create(po);i.time=Date.now();for(var o=-1,a=this.length;++o<a;){r.push(t=[]);for(var s=this[o],u=-1,c=s.length;++u<c;)(n=s[u])&&vo(n,u,e,i),t.push(n)}return co(r,e)},n.select=function(t){var n=["string"==typeof t?S(t,e):t];return n.parentNode=E,T([n])},n.selectAll=function(t){var n=_("string"==typeof t?F(t,e):t);return n.parentNode=E,T([n])};var tt=n.select(E);n.behavior.zoom=function(){var t,e,i,o,a,s,u,c=[0,0],h=1,l=et,f=M(d,"zoom");function d(){this.on("mousedown.zoom",k).on("mousemove.zoom",_).on(rt+".zoom",C).on("dblclick.zoom",w).on("touchstart.zoom",T).on("touchmove.zoom",S).on("touchend.zoom",T)}function p(t){return[(t[0]-c[0])/h,(t[1]-c[1])/h]}function g(t){h=Math.max(l[0],Math.min(l[1],t))}function m(t,n){n=function(t){return[t[0]*h+c[0],t[1]*h+c[1]]}(n),c[0]+=t[0]-n[0],c[1]+=t[1]-n[1]}function y(){o&&o.domain(i.range().map(function(t){return(t-c[0])/h}).map(i.invert)),s&&s.domain(a.range().map(function(t){return(t-c[1])/h}).map(a.invert))}function b(t){y(),n.event.preventDefault(),t({type:"zoom",scale:h,translate:c})}function k(){var t=this,e=f.of(t,arguments),i=n.event.target,o=0,a=n.select(r).on("mousemove.zoom",function(){o=1,m(n.mouse(t),s),b(e)}).on("mouseup.zoom",function(){o&&v();a.on("mousemove.zoom",null).on("mouseup.zoom",null),o&&n.event.target===i&&x(a,"click.zoom")}),s=p(n.mouse(t));r.focus(),v()}function C(){t||(t=p(n.mouse(this))),g(Math.pow(2,.002*nt())*h),m(n.mouse(this),t),b(f.of(this,arguments))}function _(){t=null}function w(){var t=n.mouse(this),e=p(t),r=Math.log(h)/Math.LN2;g(Math.pow(2,n.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)),m(t,e),b(f.of(this,arguments))}function T(){var r=n.touches(this),i=Date.now();if(e=h,t={},r.forEach(function(n){t[n.identifier]=p(n)}),v(),1===r.length){if(i-u<500){var o=r[0],a=p(r[0]);g(2*h),m(o,a),b(f.of(this,arguments))}u=i}}function S(){var r=n.touches(this),i=r[0],o=t[i.identifier];if(a=r[1]){var a,s=t[a.identifier];i=[(i[0]+a[0])/2,(i[1]+a[1])/2],o=[(o[0]+s[0])/2,(o[1]+s[1])/2],g(n.event.scale*e)}m(i,o),u=null,b(f.of(this,arguments))}return d.translate=function(t){return arguments.length?(c=t.map(Number),y(),d):c},d.scale=function(t){return arguments.length?(h=+t,y(),d):h},d.scaleExtent=function(t){return arguments.length?(l=null==t?et:t.map(Number),d):l},d.x=function(t){return arguments.length?(o=t,i=t.copy(),c=[0,0],h=1,d):o},d.y=function(t){return arguments.length?(s=t,a=t.copy(),c=[0,0],h=1,d):s},n.rebind(d,f,"on")};var nt,et=[0,1/0],rt="onwheel"in e?(nt=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in e?(nt=function(){return n.event.wheelDelta},"mousewheel"):(nt=function(){return-n.event.detail},"MozMousePixelScroll");function it(){}function ot(t,n,e){return new at(t,n,e)}function at(t,n,e){this.h=t,this.s=n,this.l=e}it.prototype.toString=function(){return this.rgb()+""},n.hsl=function(t,n,e){return 1===arguments.length?t instanceof at?ot(t.h,t.s,t.l):Bt(""+t,Nt,ot):ot(+t,+n,+e)};var st=at.prototype=new it;function ut(t,n,e){var r,i;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:n<0?0:n>1?1:n,r=2*(e=e<0?0:e>1?1:e)-(i=e<=.5?e*(1+n):e+n-e*n),Lt(o(t+120),o(t),o(t-120))}st.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),ot(this.h,this.s,this.l/t)},st.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),ot(this.h,this.s,t*this.l)},st.rgb=function(){return ut(this.h,this.s,this.l)};var ct=Math.PI,ht=1e-6,lt=ct/180,ft=180/ct;function dt(t){return t>0?1:t<0?-1:0}function pt(t){return(t=Math.sin(t/2))*t}function gt(t,n,e){return new mt(t,n,e)}function mt(t,n,e){this.h=t,this.c=n,this.l=e}n.hcl=function(t,e,r){return 1===arguments.length?t instanceof mt?gt(t.h,t.c,t.l):St(t instanceof xt?t.l:(t=zt((t=n.rgb(t)).r,t.g,t.b)).l,t.a,t.b):gt(+t,+e,+r)};var vt=mt.prototype=new it;function yt(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),bt(e,Math.cos(t*=lt)*n,Math.sin(t)*n)}function bt(t,n,e){return new xt(t,n,e)}function xt(t,n,e){this.l=t,this.a=n,this.b=e}vt.brighter=function(t){return gt(this.h,this.c,Math.min(100,this.l+Mt*(arguments.length?t:1)))},vt.darker=function(t){return gt(this.h,this.c,Math.max(0,this.l-Mt*(arguments.length?t:1)))},vt.rgb=function(){return yt(this.h,this.c,this.l).rgb()},n.lab=function(t,e,r){return 1===arguments.length?t instanceof xt?bt(t.l,t.a,t.b):t instanceof mt?yt(t.l,t.c,t.h):zt((t=n.rgb(t)).r,t.g,t.b):bt(+t,+e,+r)};var Mt=18,kt=.95047,Ct=1,_t=1.08883,wt=xt.prototype=new it;function Tt(t,n,e){var r=(t+16)/116,i=r+n/500,o=r-e/200;return Lt(At(3.2404542*(i=Ft(i)*kt)-1.5371385*(r=Ft(r)*Ct)-.4985314*(o=Ft(o)*_t)),At(-.969266*i+1.8760108*r+.041556*o),At(.0556434*i-.2040259*r+1.0572252*o))}function St(t,n,e){return t>0?gt(Math.atan2(e,n)*ft,Math.sqrt(n*n+e*e),t):gt(NaN,NaN,t)}function Ft(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function Et(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function At(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function Lt(t,n,e){return new Rt(t,n,e)}function Rt(t,n,e){this.r=t,this.g=n,this.b=e}wt.brighter=function(t){return bt(Math.min(100,this.l+Mt*(arguments.length?t:1)),this.a,this.b)},wt.darker=function(t){return bt(Math.max(0,this.l-Mt*(arguments.length?t:1)),this.a,this.b)},wt.rgb=function(){return Tt(this.l,this.a,this.b)},n.rgb=function(t,n,e){return 1===arguments.length?t instanceof Rt?Lt(t.r,t.g,t.b):Bt(""+t,Lt,ut):Lt(~~t,~~n,~~e)};var Dt=Rt.prototype=new it;function Ot(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Bt(t,n,e){var r,i,o,a=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(Vt(i[0]),Vt(i[1]),Vt(i[2]))}return(o=Wt.get(t))?n(o.r,o.g,o.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(a=t.charAt(1),a+=a,s=t.charAt(2),s+=s,u=t.charAt(3),u+=u):7===t.length&&(a=t.substring(1,3),s=t.substring(3,5),u=t.substring(5,7)),a=parseInt(a,16),s=parseInt(s,16),u=parseInt(u,16)),n(a,s,u))}function Nt(t,n,e){var r,i,o=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),s=a-o,u=(a+o)/2;return s?(i=u<.5?s/(a+o):s/(2-a-o),r=t==a?(n-e)/s+(n<e?6:0):n==a?(e-t)/s+2:(t-n)/s+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),ot(r,i,u)}function zt(t,n,e){var r=Et((.4124564*(t=Ht(t))+.3575761*(n=Ht(n))+.1804375*(e=Ht(e)))/kt),i=Et((.2126729*t+.7151522*n+.072175*e)/Ct);return bt(116*i-16,500*(r-i),200*(i-Et((.0193339*t+.119192*n+.9503041*e)/_t)))}function Ht(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Vt(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}Dt.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,i=30;return n||e||r?(n&&n<i&&(n=i),e&&e<i&&(e=i),r&&r<i&&(r=i),Lt(Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(r/t)))):Lt(i,i,i)},Dt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),Lt(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},Dt.hsl=function(){return Nt(this.r,this.g,this.b)},Dt.toString=function(){return"#"+Ot(this.r)+Ot(this.g)+Ot(this.b)};var Wt=n.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});function qt(t){return"function"==typeof t?t:function(){return t}}function jt(t){return t}function It(t,e){var r=new RegExp('["'+t+"\n]"),i=t.charCodeAt(0);function o(t,r,i){arguments.length<3&&(i=r,r=null);var s=n.xhr(t,e,i);return s.row=function(t){return arguments.length?s.response(null==(r=t)?a:function(t){return function(n){return o.parse(n.responseText,t)}}(t)):r},s.row(r)}function a(t){return o.parse(t.responseText)}function s(n){return n.map(u).join(t)}function u(t){return r.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return o.parse=function(t,n){var e;return o.parseRows(t,function(t,r){if(e)return e(t,r-1);var i=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");e=n?function(t,e){return n(i(t),e)}:i})},o.parseRows=function(t,n){var e,r,o={},a={},s=[],u=t.length,c=0,h=0;function l(){if(c>=u)return a;if(r)return r=!1,o;var n=c;if(34===t.charCodeAt(n)){for(var e=n;e++<u;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}return c=e+2,13===(s=t.charCodeAt(e+1))?(r=!0,10===t.charCodeAt(e+2)&&++c):10===s&&(r=!0),t.substring(n+1,e).replace(/""/g,'"')}for(;c<u;){var s,h=1;if(10===(s=t.charCodeAt(c++)))r=!0;else if(13===s)r=!0,10===t.charCodeAt(c)&&(++c,++h);else if(s!==i)continue;return t.substring(n,c-h)}return t.substring(n)}for(;(e=l())!==a;){for(var f=[];e!==o&&e!==a;)f.push(e),e=l();n&&!(f=n(f,h++))||s.push(f)}return s},o.format=function(n){if(Array.isArray(n[0]))return o.formatRows(n);var e=new d,r=[];return n.forEach(function(t){for(var n in t)e.has(n)||r.push(e.add(n))}),[r.map(u).join(t)].concat(n.map(function(n){return r.map(function(t){return u(n[t])}).join(t)})).join("\n")},o.formatRows=function(t){return t.map(s).join("\n")},o}Wt.forEach(function(t,n){Wt.set(t,Bt(n,Lt,ut))}),n.functor=qt,n.xhr=function(t,e,i){var o={},a=n.dispatch("progress","load","error"),s={},u=jt,c=new(r.XDomainRequest&&/^(http(s)?:)?\/\//.test(t)?XDomainRequest:XMLHttpRequest);function h(){var t=c.status;!t&&c.responseText||t>=200&&t<300||304===t?a.load.call(o,u.call(o,c)):a.error.call(o,c)}return"onload"in c?c.onload=c.onerror=h:c.onreadystatechange=function(){c.readyState>3&&h()},c.onprogress=function(t){var e=n.event;n.event=t;try{a.progress.call(o,c)}finally{n.event=e}},o.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==n?delete s[t]:s[t]=n+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.response=function(t){return u=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(_(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),c.setRequestHeader)for(var a in s)c.setRequestHeader(a,s[a]);return null!=e&&c.overrideMimeType&&c.overrideMimeType(e),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),c.send(null==r?null:r),o},o.abort=function(){return c.abort(),o},n.rebind(o,a,"on"),2===arguments.length&&"function"==typeof e&&(i=e,e=null),null==i?o:o.get(function(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}(i))},n.csv=It(",","text/csv"),n.tsv=It("\t","text/tab-separated-values");var Pt,Gt,Ut=0,Yt={},$t=null;function Zt(){for(var t,n=Date.now(),e=$t;e;)(t=n-e.then)>=e.delay&&(e.flush=e.callback(t)),e=e.next;var r=Xt()-n;r>24?(isFinite(r)&&(clearTimeout(Gt),Gt=setTimeout(Zt,r)),Pt=0):(Pt=1,Jt(Zt))}function Xt(){for(var t=null,n=$t,e=1/0;n;)n.flush?(delete Yt[n.callback.id],n=t?t.next=n.next:$t=n.next):(e=Math.min(e,n.then+n.delay),n=(t=n).next);return e}n.timer=function(t,n,e){if(arguments.length<3){if(arguments.length<2)n=0;else if(!isFinite(n))return;e=Date.now()}var r=Yt[t.id];r&&r.callback===t?(r.then=e,r.delay=n):Yt[t.id=++Ut]=$t={callback:t,then:e,delay:n,next:$t},Pt||(Gt=clearTimeout(Gt),Pt=1,Jt(Zt))},n.timer.flush=function(){for(var t,n=Date.now(),e=$t;e;)t=n-e.then,e.delay||(e.flush=e.callback(t)),e=e.next;Xt()};var Jt=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame||function(t){setTimeout(t,17)},Kt=[3,3],Qt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,n){var e=Math.pow(10,3*Math.abs(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}});n.formatPrefix=function(t,e){var r=0;return t&&(t<0&&(t*=-1),e&&(t=n.round(t,en(t,e))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r<=0?r+1:r-1)/3)))),Qt[8+r/3]},n.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)},n.format=function(t){var e=tn.exec(t),r=e[1]||" ",i=e[2]||">",o=e[3]||"",a=e[4]||"",s=e[5],u=+e[6],c=e[7],h=e[8],l=e[9],f=1,d="",p=!1;switch(h&&(h=+h.substring(1)),(s||"0"===r&&"="===i)&&(s=r="0",i="=",c&&(u-=Math.floor((u-1)/4))),l){case"n":c=!0,l="g";break;case"%":f=100,d="%",l="f";break;case"p":f=100,d="%",l="r";break;case"b":case"o":case"x":case"X":a&&(a="0"+l.toLowerCase());case"c":case"d":p=!0,h=0;break;case"s":f=-1,l="r"}"#"===a&&(a=""),"r"!=l||h||(l="g"),null!=h&&("g"==l?h=Math.max(1,Math.min(21,h)):"e"!=l&&"f"!=l||(h=Math.max(0,Math.min(20,h)))),l=nn.get(l)||rn;var g=s&&c;return function(t){if(p&&t%1)return"";var e=t<0||0===t&&1/t<0?(t=-t,"-"):o;if(f<0){var m=n.formatPrefix(t,h);t=m.scale(t),d=m.symbol}else t*=f;t=l(t,h),!s&&c&&(t=on(t));var v=a.length+t.length+(g?0:e.length),y=v<u?new Array(v=u-v+1).join(r):"";return g&&(t=on(y+t)),t.replace(".","."),e+=a,("<"===i?e+t+y:">"===i?y+e+t:"^"===i?y.substring(0,v>>=1)+e+t+y.substring(v):e+(g?t:y+t))+d}};var tn=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,nn=n.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,e){return(t=n.round(t,en(t,e))).toFixed(Math.max(0,Math.min(20,en(t*(1+1e-15),e))))}});function en(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function rn(t){return t+""}var on=jt;if(Kt){var an=Kt.length;on=function(t){for(var n=t.lastIndexOf("."),e=n>=0?"."+t.substring(n+1):(n=t.length,""),r=[],i=0,o=Kt[0];n>0&&o>0;)r.push(t.substring(n-=o,n+o)),o=Kt[i=(i+1)%an];return r.reverse().join(",")+e}}function sn(t,n){t&&ln.hasOwnProperty(t.type)&&ln[t.type](t,n)}n.geo={},n.geo.stream=function(t,n){t&&hn.hasOwnProperty(t.type)?hn[t.type](t,n):sn(t,n)};var un,cn,hn={Feature:function(t,n){sn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)sn(e[r].geometry,n)}},ln={Sphere:function(t,n){n.sphere()},Point:function(t,n){var e=t.coordinates;n.point(e[0],e[1])},MultiPoint:function(t,n){for(var e,r=t.coordinates,i=-1,o=r.length;++i<o;)e=r[i],n.point(e[0],e[1])},LineString:function(t,n){fn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)fn(e[r],n,0)},Polygon:function(t,n){dn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)dn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)sn(e[r],n)}};function fn(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1]);n.lineEnd()}function dn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)fn(t[e],n,1);n.polygonEnd()}n.geo.area=function(t){return un=0,n.geo.stream(t,bn),un};var pn,gn,mn,vn,yn,bn={sphere:function(){un+=4*ct},point:U,lineStart:U,lineEnd:U,polygonStart:function(){cn=0,bn.lineStart=xn},polygonEnd:function(){var t=2*cn;un+=t<0?4*ct+t:t,bn.lineStart=bn.lineEnd=bn.point=U}};function xn(){var t,n,e,r,i;function o(t,n){n=n*lt/2+ct/4;var o=(t*=lt)-e,a=Math.cos(n),s=Math.sin(n),u=i*s,c=r*a+u*Math.cos(o),h=u*Math.sin(o);cn+=Math.atan2(h,c),e=t,r=a,i=s}bn.point=function(a,s){bn.point=o,e=(t=a)*lt,r=Math.cos(s=(n=s)*lt/2+ct/4),i=Math.sin(s)},bn.lineEnd=function(){o(t,n)}}function Mn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function kn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Cn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function _n(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function wn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Tn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Sn(t){return[Math.atan2(t[1],t[0]),Math.asin(Math.max(-1,Math.min(1,t[2])))]}function Fn(t,n){return Math.abs(t[0]-n[0])<ht&&Math.abs(t[1]-n[1])<ht}n.geo.bounds=function(){var t,e,r,i,o,a,s,u,c,h,l,f={point:d,lineStart:g,lineEnd:m,polygonStart:function(){f.point=v,f.lineStart=y,f.lineEnd=b,c=0,bn.polygonStart()},polygonEnd:function(){bn.polygonEnd(),f.point=d,f.lineStart=g,f.lineEnd=m,cn<0?(t=-(r=180),e=-(i=90)):c>ht?i=90:c<-ht&&(e=-90),l[0]=t,l[1]=r}};function d(n,o){h.push(l=[t=n,r=n]),o<e&&(e=o),o>i&&(i=o)}function p(n,a){var s=Mn([n*lt,a*lt]);if(u){var c=Cn(u,s),h=Cn([c[1],-c[0],0],c);Tn(h),h=Sn(h);var l=n-o,f=l>0?1:-1,p=h[0]*ft*f,g=Math.abs(l)>180;if(g^(f*o<p&&p<f*n))(m=h[1]*ft)>i&&(i=m);else if(g^(f*o<(p=(p+360)%360-180)&&p<f*n)){var m;(m=-h[1]*ft)<e&&(e=m)}else a<e&&(e=a),a>i&&(i=a);g?n<o?x(t,n)>x(t,r)&&(r=n):x(n,r)>x(t,r)&&(t=n):r>=t?(n<t&&(t=n),n>r&&(r=n)):n>o?x(t,n)>x(t,r)&&(r=n):x(n,r)>x(t,r)&&(t=n)}else d(n,a);u=s,o=n}function g(){f.point=p}function m(){l[0]=t,l[1]=r,f.point=d,u=null}function v(t,n){if(u){var e=t-o;c+=Math.abs(e)>180?e+(e>0?360:-360):e}else a=t,s=n;bn.point(t,n),p(t,n)}function y(){bn.lineStart()}function b(){v(a,s),bn.lineEnd(),Math.abs(c)>ht&&(t=-(r=180)),l[0]=t,l[1]=r,u=null}function x(t,n){return(n-=t)<0?n+360:n}function M(t,n){return t[0]-n[0]}function k(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}return function(o){i=r=-(t=e=1/0),h=[],n.geo.stream(o,f),h.sort(M);for(var a=1,s=h.length,u=[g=h[0]];a<s;++a)k((d=h[a])[0],g)||k(d[1],g)?(x(g[0],d[1])>x(g[0],g[1])&&(g[1]=d[1]),x(d[0],g[1])>x(g[0],g[1])&&(g[0]=d[0])):u.push(g=d);for(var c,d,p=-1/0,g=(a=0,u[s=u.length-1]);a<=s;g=d,++a)d=u[a],(c=x(g[1],d[0]))>p&&(p=c,t=d[0],r=g[1]);return h=l=null,[[t,e],[r,i]]}}(),n.geo.centroid=function(t){var e;if(pn=gn=mn=vn=yn=0,n.geo.stream(t,En),gn&&Math.abs(e=Math.sqrt(mn*mn+vn*vn+yn*yn))>ht)return[Math.atan2(vn,mn)*ft,Math.asin(Math.max(-1,Math.min(1,yn/e)))*ft]};var En={sphere:function(){pn<2&&(pn=2,gn=mn=vn=yn=0)},point:An,lineStart:Rn,lineEnd:Dn,polygonStart:function(){pn<2&&(pn=2,gn=mn=vn=yn=0),En.lineStart=Ln},polygonEnd:function(){En.lineStart=Rn}};function An(t,n){if(!pn){++gn,t*=lt;var e=Math.cos(n*=lt);mn+=(e*Math.cos(t)-mn)/gn,vn+=(e*Math.sin(t)-vn)/gn,yn+=(Math.sin(n)-yn)/gn}}function Ln(){var t,n;pn=1,Rn(),pn=2;var e=En.point;En.point=function(r,i){e(t=r,n=i)},En.lineEnd=function(){En.point(t,n),Dn(),En.lineEnd=Dn}}function Rn(){var t,n,e;function r(r,i){r*=lt;var o=Math.cos(i*=lt),a=o*Math.cos(r),s=o*Math.sin(r),u=Math.sin(i),c=Math.atan2(Math.sqrt((c=n*u-e*s)*c+(c=e*a-t*u)*c+(c=t*s-n*a)*c),t*a+n*s+e*u);gn+=c,mn+=c*(t+(t=a)),vn+=c*(n+(n=s)),yn+=c*(e+(e=u))}pn>1||(pn<1&&(pn=1,gn=mn=vn=yn=0),En.point=function(i,o){i*=lt;var a=Math.cos(o*=lt);t=a*Math.cos(i),n=a*Math.sin(i),e=Math.sin(o),En.point=r})}function Dn(){En.point=An}function On(){return!0}function Bn(t,n,e,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(Fn(e,r)){i.lineStart();for(var s=0;s<n;++s)i.point((e=t[s])[0],e[1]);i.lineEnd()}else{var u={point:e,points:t,other:null,visited:!1,entry:!0,subject:!0},c={point:e,points:[e],other:u,visited:!1,entry:!1,subject:!1};u.other=c,o.push(u),a.push(c),c={point:r,points:[r],other:u={point:r,points:[r],other:null,visited:!1,entry:!1,subject:!0},visited:!1,entry:!0,subject:!1},u.other=c,o.push(u),a.push(c)}}}),a.sort(n),Nn(o),Nn(a),o.length){if(e)for(var s=1,u=!e(a[0].point),c=a.length;s<c;++s)a[s].entry=u=!u;for(var h,l,f,d=o[0];;){for(h=d;h.visited;)if((h=h.next)===d)return;l=h.points,i.lineStart();do{if(h.visited=h.other.visited=!0,h.entry){if(h.subject)for(s=0;s<l.length;s++)i.point((f=l[s])[0],f[1]);else r(h.point,h.next.point,1,i);h=h.next}else{if(h.subject)for(s=(l=h.prev.points).length;--s>=0;)i.point((f=l[s])[0],f[1]);else r(h.point,h.prev.point,-1,i);h=h.prev}l=(h=h.other).points}while(!h.visited);i.lineEnd()}}}function Nn(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.next=e=t[r],e.prev=i,i=e;i.next=e=t[0],e.prev=i}}function zn(t,e,r){return function(i){var o,a,s,u,c=e(i),h={point:l,lineStart:d,lineEnd:p,polygonStart:function(){h.point=y,h.lineStart=b,h.lineEnd=x,u=!1,s=a=0,o=[],i.polygonStart()},polygonEnd:function(){h.point=l,h.lineStart=d,h.lineEnd=p,(o=n.merge(o)).length?Bn(o,qn,null,r,i):(a<-ht||u&&s<-ht)&&(i.lineStart(),r(null,null,1,i),i.lineEnd()),i.polygonEnd(),o=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function l(n,e){t(n,e)&&i.point(n,e)}function f(t,n){c.point(t,n)}function d(){h.point=f,c.lineStart()}function p(){h.point=l,c.lineEnd()}var g,m=Vn(),v=e(m);function y(t,n){v.point(t,n),g.push([t,n])}function b(){v.lineStart(),g=[]}function x(){y(g[0][0],g[0][1]),v.lineEnd();var t,n=v.clean(),e=m.buffer();if(!(c=e.length))return u=!0,s+=Wn(g,-1),void(g=null);if(g=null,1&n){t=e[0],a+=Wn(t,1);var r,c=t.length-1,h=-1;for(i.lineStart();++h<c;)i.point((r=t[h])[0],r[1]);i.lineEnd()}else c>1&&2&n&&e.push(e.pop().concat(e.shift())),o.push(e.filter(Hn))}return h}}function Hn(t){return t.length>1}function Vn(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:U,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Wn(t,n){if(!(e=t.length))return 0;for(var e,r,i,o=0,a=0,s=t[0],u=s[0],c=s[1],h=Math.cos(c),l=Math.atan2(n*Math.sin(u)*h,Math.sin(c)),f=1-n*Math.cos(u)*h,d=l;++o<e;)s=t[o],h=Math.cos(c=s[1]),r=Math.atan2(n*Math.sin(u=s[0])*h,Math.sin(c)),i=1-n*Math.cos(u)*h,Math.abs(f-2)<ht&&Math.abs(i-2)<ht||(Math.abs(i)<ht||Math.abs(f)<ht||(Math.abs(Math.abs(r-l)-ct)<ht?i+f>2&&(a+=4*(r-l)):Math.abs(f-2)<ht?a+=4*(r-d):a+=((3*ct+r-l)%(2*ct)-ct)*(f+i)),d=l,l=r,f=i);return a}function qn(t,n){return((t=t.point)[0]<0?t[1]-ct/2-ht:ct/2-t[1])-((n=n.point)[0]<0?n[1]-ct/2-ht:ct/2-n[1])}var jn=zn(On,function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var s=o>0?ct:-ct,u=Math.abs(o-e);Math.abs(u-ct)<ht?(t.point(e,r=(r+a)/2>0?ct/2:-ct/2),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),n=0):i!==s&&u>=ct&&(Math.abs(e-i)<ht&&(e-=i*ht),Math.abs(o-s)<ht&&(o-=s*ht),r=function(t,n,e,r){var i,o,a=Math.sin(t-e);return Math.abs(a)>ht?Math.atan((Math.sin(n)*(o=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(n))*Math.sin(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),n=0),t.point(e=o,r=a),i=s},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*ct/2,r.point(-ct,i),r.point(0,i),r.point(ct,i),r.point(ct,0),r.point(ct,-i),r.point(0,-i),r.point(-ct,-i),r.point(-ct,0),r.point(-ct,i);else if(Math.abs(t[0]-n[0])>ht){var o=(t[0]<n[0]?1:-1)*ct;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])});var In,Pn=1e9;function Gn(t,e,r,i){return function(u){var c,h,l,f,d,p,g,m,v,y,x=u,M=Vn(),k={point:F,lineStart:function(){k.point=E,h&&h.push(l=[]);y=!0,v=!1,g=m=NaN},lineEnd:function(){c&&(E(f,d),p&&v&&M.rejoin(),c.push(M.buffer()));k.point=F,v&&u.lineEnd()},polygonStart:function(){u=M,c=[],h=[]},polygonEnd:function(){u=x,(c=n.merge(c)).length?(u.polygonStart(),Bn(c,a,C,T,u),u.polygonEnd()):_([t,e])&&(u.polygonStart(),u.lineStart(),T(null,null,1,u),u.lineEnd(),u.polygonEnd()),c=h=l=null}};function C(n){var a=o(n,-1);return _([0===a||3===a?t:r,a>1?i:e])}function _(t){for(var n=0,e=h.length,r=t[1],i=0;i<e;++i)for(var o=1,a=h[i],s=a.length,u=a[0];o<s;++o)b=a[o],u[1]<=r?b[1]>r&&w(u,b,t)>0&&++n:b[1]<=r&&w(u,b,t)<0&&--n,u=b;return 0!==n}function w(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(n[1]-t[1])}function T(n,a,u,c){var h=0,l=0;if(null==n||(h=o(n,u))!==(l=o(a,u))||s(n,a)<0^u>0)do{c.point(0===h||3===h?t:r,h>1?i:e)}while((h=(h+u+4)%4)!==l);else c.point(a[0],a[1])}function S(n,o){return t<=n&&n<=r&&e<=o&&o<=i}function F(t,n){S(t,n)&&u.point(t,n)}function E(n,o){var a=S(n=Math.max(-Pn,Math.min(Pn,n)),o=Math.max(-Pn,Math.min(Pn,o)));if(h&&l.push([n,o]),y)f=n,d=o,p=a,y=!1,a&&(u.lineStart(),u.point(n,o));else if(a&&v)u.point(n,o);else{var s=[g,m],c=[n,o];!function(n,o){var a=o[0]-n[0],s=o[1]-n[1],u=[0,1];if(Math.abs(a)<ht&&Math.abs(s)<ht)return t<=n[0]&&n[0]<=r&&e<=n[1]&&n[1]<=i;if(Un(t-n[0],a,u)&&Un(n[0]-r,-a,u)&&Un(e-n[1],s,u)&&Un(n[1]-i,-s,u))return u[1]<1&&(o[0]=n[0]+u[1]*a,o[1]=n[1]+u[1]*s),u[0]>0&&(n[0]+=u[0]*a,n[1]+=u[0]*s),!0;return!1}(s,c)?a&&(u.lineStart(),u.point(n,o)):(v||(u.lineStart(),u.point(s[0],s[1])),u.point(c[0],c[1]),a||u.lineEnd())}g=n,m=o,v=a}return k};function o(n,i){return Math.abs(n[0]-t)<ht?i>0?0:3:Math.abs(n[0]-r)<ht?i>0?2:1:Math.abs(n[1]-e)<ht?i>0?1:0:i>0?3:2}function a(t,n){return s(t.point,n.point)}function s(t,n){var e=o(t,1),r=o(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}}function Un(t,n,e){if(Math.abs(n)<ht)return t<=0;var r=t/n;if(n>0){if(r>e[1])return!1;r>e[0]&&(e[0]=r)}else{if(r<e[0])return!1;r<e[1]&&(e[1]=r)}return!0}function Yn(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function $n(t){var n=.5,e=16;function r(n){var r,o,a,s,u,c,h={point:l,lineStart:f,lineEnd:p,polygonStart:function(){n.polygonStart(),h.lineStart=g},polygonEnd:function(){n.polygonEnd(),h.lineStart=f}};function l(e,r){e=t(e,r),n.point(e[0],e[1])}function f(){o=NaN,h.point=d,n.lineStart()}function d(h,l){var f=Mn([h,l]),d=t(h,l);i(o,a,r,s,u,c,o=d[0],a=d[1],r=h,s=f[0],u=f[1],c=f[2],e,n),n.point(o,a)}function p(){h.point=l,n.lineEnd()}function g(){var t,l,g,m,v,y;f(),h.point=function(n,e){d(t=n,e),l=o,g=a,m=s,v=u,y=c,h.point=d},h.lineEnd=function(){i(o,a,r,s,u,c,l,g,t,m,v,y,e,n),h.lineEnd=p,p()}}return h}function i(e,r,o,a,s,u,c,h,l,f,d,p,g,m){var v=c-e,y=h-r,b=v*v+y*y;if(b>4*n&&g--){var x=a+f,M=s+d,k=u+p,C=Math.sqrt(x*x+M*M+k*k),_=Math.asin(k/=C),w=Math.abs(Math.abs(k)-1)<ht?(o+l)/2:Math.atan2(M,x),T=t(w,_),S=T[0],F=T[1],E=S-e,A=F-r,L=y*E-v*A;(L*L/b>n||Math.abs((v*E+y*A)/b-.5)>.3)&&(i(e,r,o,a,s,u,S,F,w,x/=C,M/=C,k,g,m),m.point(S,F),i(S,F,w,x,M,k,c,h,l,f,d,p,g,m))}}return r.precision=function(t){return arguments.length?(e=(n=t*t)>0&&16,r):Math.sqrt(n)},r}function Zn(t){return Xn(function(){return t})()}function Xn(t){var e,r,i,o,a,s=$n(function(t,n){return[(t=e(t,n))[0]*u+o,a-t[1]*u]}),u=150,c=480,h=250,l=0,f=0,d=0,p=0,g=0,m=jn,v=jt,y=null,b=null;function x(t){return[(t=i(t[0]*lt,t[1]*lt))[0]*u+o,a-t[1]*u]}function M(t){return(t=i.invert((t[0]-o)/u,(a-t[1])/u))&&[t[0]*ft,t[1]*ft]}function k(){i=Yn(r=Kn(d,p,g),e);var t=e(l,f);return o=c-t[0]*u,a=h+t[1]*u,x}return x.stream=function(t){return function(t,n){return{point:function(e,r){r=t(e*lt,r*lt),e=r[0],n.point(e>ct?e-2*ct:e<-ct?e+2*ct:e,r[1])},sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}(r,m(s(v(t))))},x.clipAngle=function(t){return arguments.length?(m=null==t?(y=t,jn):function(t){var n=Math.cos(t),e=n>0,r=Math.abs(n)>ht;return zn(i,function(t){var n,s,u,c,h;return{lineStart:function(){c=u=!1,h=1},point:function(l,f){var d,p=[l,f],g=i(l,f),m=e?g?0:a(l,f):g?a(l+(l<0?ct:-ct),f):0;if(!n&&(c=u=g)&&t.lineStart(),g!==u&&(d=o(n,p),(Fn(n,d)||Fn(p,d))&&(p[0]+=ht,p[1]+=ht,g=i(p[0],p[1]))),g!==u)h=0,g?(t.lineStart(),d=o(p,n),t.point(d[0],d[1])):(d=o(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(r&&n&&e^g){var v;m&s||!(v=o(p,n,!0))||(h=0,e?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&Fn(n,p)||t.point(p[0],p[1]),n=p,u=g,s=m},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return h|(c&&u)<<1}}},ee(t,6*lt));function i(t,e){return Math.cos(t)*Math.cos(e)>n}function o(t,e,r){var i=[1,0,0],o=Cn(Mn(t),Mn(e)),a=kn(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=n*a/u,h=-n*s/u,l=Cn(i,o),f=wn(i,c);_n(f,wn(o,h));var d=l,p=kn(f,d),g=kn(d,d),m=p*p-g*(kn(f,f)-1);if(!(m<0)){var v=Math.sqrt(m),y=wn(d,(-p-v)/g);if(_n(y,f),y=Sn(y),!r)return y;var b,x=t[0],M=e[0],k=t[1],C=e[1];M<x&&(b=x,x=M,M=b);var _=M-x,w=Math.abs(_-ct)<ht;if(!w&&C<k&&(b=k,k=C,C=b),w||_<ht?w?k+C>0^y[1]<(Math.abs(y[0]-x)<ht?k:C):k<=y[1]&&y[1]<=C:_>ct^(x<=y[0]&&y[0]<=M)){var T=wn(d,(-p+v)/g);return _n(T,f),[y,Sn(T)]}}}function a(n,r){var i=e?t:ct-t,o=0;return n<-i?o|=1:n>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}((y=+t)*lt),x):y},x.clipExtent=function(t){return arguments.length?(b=t,v=null==t?jt:Gn(t[0][0],t[0][1],t[1][0],t[1][1]),x):b},x.scale=function(t){return arguments.length?(u=+t,k()):u},x.translate=function(t){return arguments.length?(c=+t[0],h=+t[1],k()):[c,h]},x.center=function(t){return arguments.length?(l=t[0]%360*lt,f=t[1]%360*lt,k()):[l*ft,f*ft]},x.rotate=function(t){return arguments.length?(d=t[0]%360*lt,p=t[1]%360*lt,g=t.length>2?t[2]%360*lt:0,k()):[d*ft,p*ft,g*ft]},n.rebind(x,s,"precision"),function(){return e=t.apply(this,arguments),x.invert=e.invert&&M,k()}}function Jn(t,n){return[t,n]}function Kn(t,n,e){return t?n||e?Yn(te(t),ne(n,e)):te(t):n||e?ne(n,e):Jn}function Qn(t){return function(n,e){return[(n+=t)>ct?n-2*ct:n<-ct?n+2*ct:n,e]}}function te(t){var n=Qn(t);return n.invert=Qn(-t),n}function ne(t,n){var e=Math.cos(t),r=Math.sin(t),i=Math.cos(n),o=Math.sin(n);function a(t,n){var a=Math.cos(n),s=Math.cos(t)*a,u=Math.sin(t)*a,c=Math.sin(n),h=c*e+s*r;return[Math.atan2(u*i-h*o,s*e-c*r),Math.asin(Math.max(-1,Math.min(1,h*i+u*o)))]}return a.invert=function(t,n){var a=Math.cos(n),s=Math.cos(t)*a,u=Math.sin(t)*a,c=Math.sin(n),h=c*i-u*o;return[Math.atan2(u*i+c*o,s*e+h*r),Math.asin(Math.max(-1,Math.min(1,h*e-s*r)))]},a}function ee(t,n){var e=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var u;null!=i?(i=re(e,i),o=re(e,o),(a>0?i<o:i>o)&&(i+=2*a*ct)):(i=t+2*a*ct,o=t);for(var c=a*n,h=i;a>0?h>o:h<o;h-=c)s.point((u=Sn([e,-r*Math.cos(h),-r*Math.sin(h)]))[0],u[1])}}function re(t,n){var e=Mn(n);e[0]-=t,Tn(e);var r=function(t){return Math.acos(Math.max(-1,Math.min(1,t)))}(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-ht)%(2*Math.PI)}function ie(t,e,r){var i=n.range(t,e-ht,r).concat(e);return function(t){return i.map(function(n){return[t,n]})}}function oe(t,e,r){var i=n.range(t,e-ht,r).concat(e);return function(t){return i.map(function(n){return[n,t]})}}function ae(t){return t.source}function se(t){return t.target}n.geo.projection=Zn,n.geo.projectionMutator=Xn,(n.geo.equirectangular=function(){return Zn(Jn)}).raw=Jn.invert=Jn,n.geo.rotation=function(t){function n(n){return(n=t(n[0]*lt,n[1]*lt))[0]*=ft,n[1]*=ft,n}return t=Kn(t[0]%360*lt,t[1]*lt,t.length>2?t[2]*lt:0),n.invert=function(n){return(n=t.invert(n[0]*lt,n[1]*lt))[0]*=ft,n[1]*=ft,n},n},n.geo.circle=function(){var t,n,e=[0,0],r=6;function i(){var t="function"==typeof e?e.apply(this,arguments):e,r=Kn(-t[0]*lt,-t[1]*lt,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=r(t,n)),t[0]*=ft,t[1]*=ft}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(e=t,i):e},i.angle=function(e){return arguments.length?(n=ee((t=+e)*lt,r*lt),i):t},i.precision=function(e){return arguments.length?(n=ee(t*lt,(r=+e)*lt),i):r},i.angle(90)},n.geo.distance=function(t,n){var e,r=(n[0]-t[0])*lt,i=t[1]*lt,o=n[1]*lt,a=Math.sin(r),s=Math.cos(r),u=Math.sin(i),c=Math.cos(i),h=Math.sin(o),l=Math.cos(o);return Math.atan2(Math.sqrt((e=l*a)*e+(e=c*h-u*l*s)*e),u*h+c*l*s)},n.geo.graticule=function(){var t,e,r,i,o,a,s,u,c,h,l,f,d=10,p=d,g=90,m=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return n.range(Math.ceil(i/g)*g,r,g).map(l).concat(n.range(Math.ceil(u/m)*m,s,m).map(f)).concat(n.range(Math.ceil(e/d)*d,t,d).filter(function(t){return Math.abs(t%g)>ht}).map(c)).concat(n.range(Math.ceil(a/p)*p,o,p).filter(function(t){return Math.abs(t%m)>ht}).map(h))}return y.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[l(i).concat(f(s).slice(1),l(r).reverse().slice(1),f(u).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.majorExtent(t).minorExtent(t):y.minorExtent()},y.majorExtent=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],u=+t[0][1],s=+t[1][1],i>r&&(t=i,i=r,r=t),u>s&&(t=u,u=s,s=t),y.precision(v)):[[i,u],[r,s]]},y.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],o=+n[1][1],e>t&&(n=e,e=t,t=n),a>o&&(n=a,a=o,o=n),y.precision(v)):[[e,a],[t,o]]},y.step=function(t){return arguments.length?y.majorStep(t).minorStep(t):y.minorStep()},y.majorStep=function(t){return arguments.length?(g=+t[0],m=+t[1],y):[g,m]},y.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],y):[d,p]},y.precision=function(n){return arguments.length?(v=+n,c=ie(a,o,90),h=oe(e,t,v),l=ie(u,s,90),f=oe(i,r,v),y):v},y.majorExtent([[-180,-90+ht],[180,90-ht]]).minorExtent([[-180,-80-ht],[180,80+ht]])},n.geo.greatArc=function(){var t,e,r=ae,i=se;function o(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||i.apply(this,arguments)]}}return o.distance=function(){return n.geo.distance(t||r.apply(this,arguments),e||i.apply(this,arguments))},o.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,o):r},o.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,o):i},o.precision=function(){return arguments.length?o:0},o},n.geo.interpolate=function(t,n){return function(t,n,e,r){var i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),s=Math.sin(r),u=i*Math.cos(t),c=i*Math.sin(t),h=a*Math.cos(e),l=a*Math.sin(e),f=2*Math.asin(Math.sqrt(pt(r-n)+i*a*pt(e-t))),d=1/Math.sin(f),p=f?function(t){var n=Math.sin(t*=f)*d,e=Math.sin(f-t)*d,r=e*u+n*h,i=e*c+n*l,a=e*o+n*s;return[Math.atan2(i,r)*ft,Math.atan2(a,Math.sqrt(r*r+i*i))*ft]}:function(){return[t*ft,n*ft]};return p.distance=f,p}(t[0]*lt,t[1]*lt,n[0]*lt,n[1]*lt)},n.geo.length=function(t){return In=0,n.geo.stream(t,ue),In};var ue={sphere:U,point:U,lineStart:function(){var t,n,e;function r(r,i){var o=Math.sin(i*=lt),a=Math.cos(i),s=Math.abs((r*=lt)-t),u=Math.cos(s);In+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=e*o-n*a*u)*s),n*o+e*a*u),t=r,n=o,e=a}ue.point=function(i,o){t=i*lt,n=Math.sin(o*=lt),e=Math.cos(o),ue.point=r},ue.lineEnd=function(){ue.point=ue.lineEnd=U}},lineEnd:U,polygonStart:U,polygonEnd:U};function ce(t){var n=0,e=ct/3,r=Xn(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*ct/180,e=t[1]*ct/180):[n/ct*180,e/ct*180]},i}function he(t,n){var e=Math.sin(t),r=(e+Math.sin(n))/2,i=1+e*(2*r-e),o=Math.sqrt(i)/r;function a(t,n){var e=Math.sqrt(i-2*r*Math.sin(n))/r;return[e*Math.sin(t*=r),o-e*Math.cos(t)]}return a.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/r,Math.asin((i-(t*t+e*e)*r*r)/(2*r))]},a}function le(t,n){var e=t(n[0]),r=t([.5*(n[0][0]+n[1][0]),n[0][1]]),i=t([n[1][0],n[0][1]]),o=t(n[1]),a=(r[1]-e[1])/(r[0]-e[0]),s=(i[1]-r[1])/(i[0]-r[0]),u=.5*(a*s*(e[1]-i[1])+s*(e[0]+r[0])-a*(r[0]+i[0]))/(s-a),c=(.5*(e[0]+r[0])-u)/a+.5*(e[1]+r[1]),h=o[0]-u,l=o[1]-c,f=e[0]-u,d=e[1]-c,p=h*h+l*l,g=f*f+d*d,m=Math.atan2(l,h),v=Math.atan2(d,f);return function(n){var e=n[0]-u,r=n[1]-c,i=e*e+r*r,o=Math.atan2(r,e);if(p<i&&i<g&&m<o&&o<v)return t.invert(n)}}(n.geo.conicEqualArea=function(){return ce(he)}).raw=he,n.geo.albersUsa=function(){var t,e,r,i=n.geo.conicEqualArea().rotate([98,0]).center([0,38]).parallels([29.5,45.5]),o=n.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),a=n.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),s=n.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);function u(t){return function(t){var n=t[0],e=t[1];return e>50?o:n<-140?a:e<21?s:i}(t)(t)}return u.invert=function(n){return t(n)||e(n)||r(n)||i.invert(n)},u.scale=function(t){return arguments.length?(i.scale(t),o.scale(.6*t),a.scale(t),s.scale(1.5*t),u.translate(i.translate())):i.scale()},u.translate=function(n){if(!arguments.length)return i.translate();var c=i.scale(),h=n[0],l=n[1];return i.translate(n),o.translate([h-.4*c,l+.17*c]),a.translate([h-.19*c,l+.2*c]),s.translate([h+.58*c,l+.43*c]),t=le(o,[[-180,50],[-130,72]]),e=le(a,[[-164,18],[-154,24]]),r=le(s,[[-67.5,17.5],[-65,19]]),u},u.scale(1e3)};var fe,de,pe,ge,me,ve,ye={point:U,lineStart:U,lineEnd:U,polygonStart:function(){de=0,ye.lineStart=be},polygonEnd:function(){ye.lineStart=ye.lineEnd=ye.point=U,fe+=Math.abs(de/2)}};function be(){var t,n,e,r;function i(t,n){de+=r*t-e*n,e=t,r=n}ye.point=function(o,a){ye.point=i,t=e=o,n=r=a},ye.lineEnd=function(){i(t,n)}}var xe={point:function(t,n){t<pe&&(pe=t);t>me&&(me=t);n<ge&&(ge=n);n>ve&&(ve=n)},lineStart:U,lineEnd:U,polygonStart:U,polygonEnd:U};var Me={point:ke,lineStart:Ce,lineEnd:_e,polygonStart:function(){Me.lineStart=we},polygonEnd:function(){Me.point=ke,Me.lineStart=Ce,Me.lineEnd=_e}};function ke(t,n){pn||(mn+=t,vn+=n,++yn)}function Ce(){var t,n;if(1!==pn){if(!(pn<1))return;pn=1,mn=vn=yn=0}function e(e,r){var i=e-t,o=r-n,a=Math.sqrt(i*i+o*o);mn+=a*(t+e)/2,vn+=a*(n+r)/2,yn+=a,t=e,n=r}Me.point=function(r,i){Me.point=e,t=r,n=i}}function _e(){Me.point=ke}function we(){var t,n,e,r;function i(t,n){var i=r*t-e*n;mn+=i*(e+t),vn+=i*(r+n),yn+=3*i,e=t,r=n}pn<2&&(pn=2,mn=vn=yn=0),Me.point=function(o,a){Me.point=i,t=e=o,n=r=a},Me.lineEnd=function(){i(t,n)}}function Te(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Se(t,n){function e(n,e){var r=Math.cos(n),i=Math.cos(e),o=t(r*i);return[o*i*Math.sin(n),o*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),i=n(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&e*o/r)]},e}n.geo.path=function(){var t,e,r,i,o=4.5;function a(t){return t&&n.geo.stream(t,r(i.pointRadius("function"==typeof o?+o.apply(this,arguments):o))),i.result()}return a.area=function(t){return fe=0,n.geo.stream(t,r(ye)),fe},a.centroid=function(t){return pn=mn=vn=yn=0,n.geo.stream(t,r(Me)),yn?[mn/yn,vn/yn]:void 0},a.bounds=function(t){return me=ve=-(pe=ge=1/0),n.geo.stream(t,r(xe)),[[pe,ge],[me,ve]]},a.projection=function(n){return arguments.length?(r=(t=n)?n.stream||function(t){var n=$n(function(n,e){return t([n*ft,e*ft])});return function(t){return t=n(t),{point:function(n,e){t.point(n*lt,e*lt)},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}}(n):jt,a):t},a.context=function(t){return arguments.length?(i=null==(e=t)?new function(){var t=Te(4.5),n=[],e={point:r,lineStart:function(){e.point=i},lineEnd:a,polygonStart:function(){e.lineEnd=s},polygonEnd:function(){e.lineEnd=a,e.point=r},pointRadius:function(n){return t=Te(n),e},result:function(){if(n.length){var t=n.join("");return n=[],t}}};function r(e,r){n.push("M",e,",",r,t)}function i(t,r){n.push("M",t,",",r),e.point=o}function o(t,e){n.push("L",t,",",e)}function a(){e.point=r}function s(){n.push("Z")}return e}:new function(t){var n=4.5,e={point:r,lineStart:function(){e.point=i},lineEnd:a,polygonStart:function(){e.lineEnd=s},polygonEnd:function(){e.lineEnd=a,e.point=r},pointRadius:function(t){return n=t,e},result:U};function r(e,r){t.moveTo(e,r),t.arc(e,r,n,0,2*ct)}function i(n,r){t.moveTo(n,r),e.point=o}function o(n,e){t.lineTo(n,e)}function a(){e.point=r}function s(){t.closePath()}return e}(t),a):e},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:+t,a):o},a.projection(n.geo.albersUsa()).context(null)},n.geo.albers=function(){return n.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1e3)};var Fe=Se(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(n.geo.azimuthalEqualArea=function(){return Zn(Fe)}).raw=Fe;var Ee=Se(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},jt);function Ae(t,n){var e=Math.cos(t),r=function(t){return Math.tan(ct/4+t/2)},i=t===n?Math.sin(t):Math.log(e/Math.cos(n))/Math.log(r(n)/r(t)),o=e*Math.pow(r(t),i)/i;if(!i)return De;function a(t,n){var e=Math.abs(Math.abs(n)-ct/2)<ht?0:o/Math.pow(r(n),i);return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}return a.invert=function(t,n){var e=o-n,r=dt(i)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/i,2*Math.atan(Math.pow(o/r,1/i))-ct/2]},a}function Le(t,n){var e=Math.cos(t),r=t===n?Math.sin(t):(e-Math.cos(n))/(n-t),i=e/r+t;if(Math.abs(r)<ht)return Jn;function o(t,n){var e=i-n;return[e*Math.sin(r*t),i-e*Math.cos(r*t)]}return o.invert=function(t,n){var e=i-n;return[Math.atan2(t,e)/r,i-dt(r)*Math.sqrt(t*t+e*e)]},o}(n.geo.azimuthalEquidistant=function(){return Zn(Ee)}).raw=Ee,(n.geo.conicConformal=function(){return ce(Ae)}).raw=Ae,(n.geo.conicEquidistant=function(){return ce(Le)}).raw=Le;var Re=Se(function(t){return 1/t},Math.atan);function De(t,n){return[t,Math.log(Math.tan(ct/4+n/2))]}function Oe(t){var n,e=Zn(t),r=e.scale,i=e.translate,o=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=i.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var a=o.apply(e,arguments);if(a===e){if(n=null==t){var s=ct*r(),u=i();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else n&&(a=null);return a},e.clipExtent(null)}(n.geo.gnomonic=function(){return Zn(Re)}).raw=Re,De.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-ct/2]},(n.geo.mercator=function(){return Oe(De)}).raw=De;var Be=Se(function(){return 1},Math.asin);(n.geo.orthographic=function(){return Zn(Be)}).raw=Be;var Ne=Se(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function ze(t,n){var e=Math.cos(n)*Math.sin(t);return[Math.log((1+e)/(1-e))/2,Math.atan2(Math.tan(n),Math.cos(t))]}function He(t){var n=Ve,e=We,r=On,i=je,o=i.key,a=.7;function s(o){var s,u=[],c=[],h=-1,l=o.length,f=qt(n),d=qt(e);function p(){u.push("M",i(t(c),a))}for(;++h<l;)r.call(this,s=o[h],h)?c.push([+f.call(this,s,h),+d.call(this,s,h)]):c.length&&(p(),c=[]);return c.length&&p(),u.length?u.join(""):null}return s.x=function(t){return arguments.length?(n=t,s):n},s.y=function(t){return arguments.length?(e=t,s):e},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=qe.get(t)||je).key,s):o},s.tension=function(t){return arguments.length?(a=t,s):a},s}function Ve(t){return t[0]}function We(t){return t[1]}(n.geo.stereographic=function(){return Zn(Ne)}).raw=Ne,ze.invert=function(t,n){return[Math.atan2(function(t){return(Math.exp(t)-Math.exp(-t))/2}(t),Math.cos(n)),function(t){return t>1?ct/2:t<-1?-ct/2:Math.asin(t)}(Math.sin(n)/function(t){return(Math.exp(t)+Math.exp(-t))/2}(t))]},(n.geo.transverseMercator=function(){return Oe(ze)}).raw=ze,n.geom={},n.svg={},n.svg.line=function(){return He(jt)};var qe=n.map({linear:je,"linear-closed":function(t){return je(t)+"Z"},"step-before":Ie,"step-after":Pe,basis:Ye,"basis-open":function(t){if(t.length<4)return je(t);var n,e=[],r=-1,i=t.length,o=[0],a=[0];for(;++r<3;)n=t[r],o.push(n[0]),a.push(n[1]);e.push($e(Je,o)+","+$e(Je,a)),--r;for(;++r<i;)n=t[r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),Ke(e,o,a);return e.join("")},"basis-closed":function(t){var n,e,r=-1,i=t.length,o=i+4,a=[],s=[];for(;++r<4;)e=t[r%i],a.push(e[0]),s.push(e[1]);n=[$e(Je,a),",",$e(Je,s)],--r;for(;++r<o;)e=t[r%i],a.shift(),a.push(e[0]),s.shift(),s.push(e[1]),Ke(n,a,s);return n.join("")},bundle:function(t,n){var e=t.length-1;if(e)for(var r,i,o=t[0][0],a=t[0][1],s=t[e][0]-o,u=t[e][1]-a,c=-1;++c<=e;)r=t[c],i=c/e,r[0]=n*r[0]+(1-n)*(o+i*s),r[1]=n*r[1]+(1-n)*(a+i*u);return Ye(t)},cardinal:function(t,n){return t.length<3?je(t):t[0]+Ge(t,Ue(t,n))},"cardinal-open":function(t,n){return t.length<4?je(t):t[1]+Ge(t.slice(1,t.length-1),Ue(t,n))},"cardinal-closed":function(t,n){return t.length<3?je(t):t[0]+Ge((t.push(t[0]),t),Ue([t[t.length-2]].concat(t,[t[1]]),n))},monotone:function(t){return t.length<3?je(t):t[0]+Ge(t,function(t){var n,e,r,i,o=[],a=function(t){var n=0,e=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Qe(i,o);for(;++n<e;)r[n]=(a+(a=Qe(i=o,o=t[n+1])))/2;return r[n]=a,r}(t),s=-1,u=t.length-1;for(;++s<u;)n=Qe(t[s],t[s+1]),Math.abs(n)<1e-6?a[s]=a[s+1]=0:(e=a[s]/n,r=a[s+1]/n,(i=e*e+r*r)>9&&(i=3*n/Math.sqrt(i),a[s]=i*e,a[s+1]=i*r));s=-1;for(;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(t))}});function je(t){return t.join("L")}function Ie(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function Pe(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function Ge(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return je(t);var e=t.length!=n.length,r="",i=t[0],o=t[1],a=n[0],s=a,u=1;if(e&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],u=2),n.length>1){s=n[1],o=t[u],u++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var c=2;c<n.length;c++,u++)o=t[u],s=n[c],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(e){var h=t[u];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+h[0]+","+h[1]}return r}function Ue(t,n){for(var e,r=[],i=(1-n)/2,o=t[0],a=t[1],s=1,u=t.length;++s<u;)e=o,o=a,a=t[s],r.push([i*(a[0]-e[0]),i*(a[1]-e[1])]);return r}function Ye(t){if(t.length<3)return je(t);var n=1,e=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],u=[i,",",o];for(Ke(u,a,s);++n<e;)r=t[n],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Ke(u,a,s);for(n=-1;++n<2;)a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Ke(u,a,s);return u.join("")}function $e(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}qe.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Ze=[0,2/3,1/3,0],Xe=[0,1/3,2/3,0],Je=[0,1/6,2/3,1/6];function Ke(t,n,e){t.push("C",$e(Ze,n),",",$e(Ze,e),",",$e(Xe,n),",",$e(Xe,e),",",$e(Je,n),",",$e(Je,e))}function Qe(t,n){return(n[1]-t[1])/(n[0]-t[0])}function tr(t,n,e,r){var i,o,a,s,u,c;return o=(i=r[t])[0],a=i[1],s=(i=r[n])[0],u=i[1],c=(i=r[e])[0],(i[1]-a)*(s-o)-(u-a)*(c-o)>0}function nr(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function er(t,n,e,r){var i=t[0],o=e[0],a=n[0]-i,s=r[0]-o,u=t[1],c=e[1],h=n[1]-u,l=r[1]-c,f=(s*(u-c)-l*(i-o))/(l*a-s*h);return[i+f*a,u+f*h]}n.geom.hull=function(t){var n=Ve,e=We;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i,o,a,s,u,c,h,l,f,d,p,g=qt(n),m=qt(e),v=t.length,y=v-1,b=[],x=[],M=0;if(g===Ve&&e===We)r=t;else for(o=0,r=[];o<v;++o)r.push([+g.call(this,i=t[o],o),+m.call(this,i,o)]);for(o=1;o<v;++o)(r[o][1]<r[M][1]||r[o][1]==r[M][1]&&r[o][0]<r[M][0])&&(M=o);for(o=0;o<v;++o)o!==M&&(u=r[o][1]-r[M][1],s=r[o][0]-r[M][0],b.push({angle:Math.atan2(u,s),index:o}));for(b.sort(function(t,n){return t.angle-n.angle}),d=b[0].angle,f=b[0].index,l=0,o=1;o<y;++o){if(a=b[o].index,d==b[o].angle){if((s=r[f][0]-r[M][0])*s+(u=r[f][1]-r[M][1])*u>=(c=r[a][0]-r[M][0])*c+(h=r[a][1]-r[M][1])*h){b[o].index=-1;continue}b[l].index=-1}d=b[o].angle,l=o,f=a}for(x.push(M),o=0,a=0;o<2;++a)b[a].index>-1&&(x.push(b[a].index),o++);for(p=x.length;a<y;++a)if(!(b[a].index<0)){for(;!tr(x[p-2],x[p-1],b[a].index,r);)--p;x[p++]=b[a].index}var k=[];for(o=p-1;o>=0;--o)k.push(t[x[o]]);return k}return r.x=function(t){return arguments.length?(n=t,r):n},r.y=function(t){return arguments.length?(e=t,r):e},r},n.geom.polygon=function(t){return t.area=function(){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return.5*r},t.centroid=function(n){var e,r,i=-1,o=t.length,a=0,s=0,u=t[o-1];for(arguments.length||(n=-1/(6*t.area()));++i<o;)e=u,u=t[i],r=e[0]*u[1]-u[0]*e[1],a+=(e[0]+u[0])*r,s+=(e[1]+u[1])*r;return[a*n,s*n]},t.clip=function(n){for(var e,r,i,o,a,s,u=-1,c=t.length,h=t[c-1];++u<c;){for(e=n.slice(),n.length=0,o=t[u],a=e[(i=e.length)-1],r=-1;++r<i;)nr(s=e[r],h,o)?(nr(a,h,o)||n.push(er(a,s,h,o)),n.push(s)):nr(a,h,o)&&n.push(er(a,s,h,o)),a=s;h=o}return n},t},n.geom.delaunay=function(t){var n=t.map(function(){return[]}),e=[];return ir(t,function(e){n[e.region.l.index].push(t[e.region.r.index])}),n.forEach(function(n,r){var i=t[r],o=i[0],a=i[1];n.forEach(function(t){t.angle=Math.atan2(t[0]-o,t[1]-a)}),n.sort(function(t,n){return t.angle-n.angle});for(var s=0,u=n.length-1;s<u;s++)e.push([i,n[s],n[s+1]])}),e},n.geom.voronoi=function(t){var e,r=null,i=Ve,o=We;if(arguments.length)return a(t);function a(t){var r,a,s,u=t.map(function(){return[]}),c=qt(i),h=qt(o),l=t.length,f=1e6;if(c===Ve&&h===We)r=t;else for(r=[],s=0;s<l;++s)r.push([+c.call(this,a=t[s],s),+h.call(this,a,s)]);if(ir(r,function(t){var n,e,r,i,o,a;1===t.a&&t.b>=0?(n=t.ep.r,e=t.ep.l):(n=t.ep.l,e=t.ep.r),1===t.a?(o=n?n.y:-f,r=t.c-t.b*o,a=e?e.y:f,i=t.c-t.b*a):(r=n?n.x:-f,o=t.c-t.a*r,i=e?e.x:f,a=t.c-t.a*i);var s=[r,o],c=[i,a];u[t.region.l.index].push(s,c),u[t.region.r.index].push(s,c)}),(u=u.map(function(t,e){var i=r[e][0],o=r[e][1],a=t.map(function(t){return Math.atan2(t[0]-i,t[1]-o)}),s=n.range(t.length).sort(function(t,n){return a[t]-a[n]});return s.filter(function(t,n){return!n||a[t]-a[s[n-1]]>ht}).map(function(n){return t[n]})})).forEach(function(t,n){var e=t.length;if(!e)return t.push([-f,-f],[-f,f],[f,f],[f,-f]);if(!(e>2)){var i=r[n],o=t[0],a=t[1],s=i[0],u=i[1],c=o[0],h=o[1],l=a[0],d=a[1],p=Math.abs(l-c),g=d-h;if(Math.abs(g)<ht){var m=u<h?-f:f;t.push([-f,m],[f,m])}else if(p<ht){var v=s<c?-f:f;t.push([v,-f],[v,f])}else{m=(l-c)*(h-u)<(c-s)*(d-h)?f:-f;var y=Math.abs(g)-p;Math.abs(y)<ht?t.push([g<0?m:-m,m]):(y>0&&(m*=-1),t.push([-f,m],[f,m]))}}}),e)for(s=0;s<l;++s)e(u[s]);for(s=0;s<l;++s)u[s].point=t[s];return u}return a.x=function(t){return arguments.length?(i=t,a):i},a.y=function(t){return arguments.length?(o=t,a):o},a.size=function(t){return arguments.length?(null==t?e=null:(r=[+t[0],+t[1]],e=n.geom.polygon([[0,0],[0,r[1]],r,[r[0],0]]).clip),a):r},a.links=function(t){var n,e,r,a=t.map(function(){return[]}),s=[],u=qt(i),c=qt(o),h=t.length;if(u===Ve&&c===We)n=t;else for(r=0;r<h;++r)n.push([+u.call(this,e=t[r],r),+c.call(this,e,r)]);return ir(n,function(n){var e=n.region.l.index,r=n.region.r.index;a[e][r]||(a[e][r]=a[r][e]=!0,s.push({source:t[e],target:t[r]}))}),s},a.triangles=function(t){if(i===Ve&&o===We)return n.geom.delaunay(t);var e,r,a,s,u,c=qt(i),h=qt(o);for(s=0,e=[],u=t.length;s<u;++s)(r=[+c.call(this,a=t[s],s),+h.call(this,a,s)]).data=a,e.push(r);return n.geom.delaunay(e).map(function(t){return t.map(function(t){return t.data})})},a};var rr={l:"r",r:"l"};function ir(t,n){var e={list:t.map(function(t,n){return{index:n,x:t[0],y:t[1]}}).sort(function(t,n){return t.y<n.y?-1:t.y>n.y?1:t.x<n.x?-1:t.x>n.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(t,n){return{edge:t,side:n,vertex:null,l:null,r:null}},insert:function(t,n){n.l=t,n.r=t.r,t.r.l=n,t.r=n},leftBound:function(t){var n=r.leftEnd;do{n=n.r}while(n!=r.rightEnd&&i.rightOf(n,t));return n=n.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?e.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?e.bottomSite:t.edge.region[rr[t.side]]}},i={bisect:function(t,n){var e={region:{l:t,r:n},ep:{l:null,r:null}},r=n.x-t.x,i=n.y-t.y,o=r>0?r:-r,a=i>0?i:-i;return e.c=t.x*r+t.y*i+.5*(r*r+i*i),o>a?(e.a=1,e.b=i/r,e.c/=r):(e.b=1,e.a=r/i,e.c/=i),e},intersect:function(t,n){var e=t.edge,r=n.edge;if(!e||!r||e.region.r==r.region.r)return null;var i=e.a*r.b-e.b*r.a;if(Math.abs(i)<1e-10)return null;var o,a,s=(e.c*r.b-r.c*e.b)/i,u=(r.c*e.a-e.c*r.a)/i,c=e.region.r,h=r.region.r;c.y<h.y||c.y==h.y&&c.x<h.x?(o=t,a=e):(o=n,a=r);var l=s>=a.region.r.x;return l&&"l"===o.side||!l&&"r"===o.side?null:{x:s,y:u}},rightOf:function(t,n){var e=t.edge,r=e.region.r,i=n.x>r.x;if(i&&"l"===t.side)return 1;if(!i&&"r"===t.side)return 0;if(1===e.a){var o=n.y-r.y,a=n.x-r.x,s=0,u=0;if(!i&&e.b<0||i&&e.b>=0?u=s=o>=e.b*a:(u=n.x+n.y*e.b>e.c,e.b<0&&(u=!u),u||(s=1)),!s){var c=r.x-e.region.l.x;u=e.b*(a*a-o*o)<c*o*(1+2*a/c+e.b*e.b),e.b<0&&(u=!u)}}else{var h=e.c-e.a*n.x,l=n.y-h,f=n.x-r.x,d=h-r.y;u=l*l>f*f+d*d}return"l"===t.side?u:!u},endPoint:function(t,e,r){t.ep[e]=r,t.ep[rr[e]]&&n(t)},distance:function(t,n){var e=t.x-n.x,r=t.y-n.y;return Math.sqrt(e*e+r*r)}},o={list:[],insert:function(t,n,e){t.vertex=n,t.ystar=n.y+e;for(var r=0,i=o.list,a=i.length;r<a;r++){var s=i[r];if(!(t.ystar>s.ystar||t.ystar==s.ystar&&n.x>s.vertex.x))break}i.splice(r,0,t)},del:function(t){for(var n=0,e=o.list,r=e.length;n<r&&e[n]!=t;++n);e.splice(n,1)},empty:function(){return 0===o.list.length},nextEvent:function(t){for(var n=0,e=o.list,r=e.length;n<r;++n)if(e[n]==t)return e[n+1];return null},min:function(){var t=o.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return o.list.shift()}};r.init(),e.bottomSite=e.list.shift();for(var a,s,u,c,h,l,f,d,p,g,m,v,y,b=e.list.shift();;)if(o.empty()||(a=o.min()),b&&(o.empty()||b.y<a.y||b.y==a.y&&b.x<a.x))s=r.leftBound(b),u=r.right(s),f=r.rightRegion(s),v=i.bisect(f,b),l=r.createHalfEdge(v,"l"),r.insert(s,l),(g=i.intersect(s,l))&&(o.del(s),o.insert(s,g,i.distance(g,b))),s=l,l=r.createHalfEdge(v,"r"),r.insert(s,l),(g=i.intersect(l,u))&&o.insert(l,g,i.distance(g,b)),b=e.list.shift();else{if(o.empty())break;s=o.extractMin(),c=r.left(s),u=r.right(s),h=r.right(u),f=r.leftRegion(s),d=r.rightRegion(u),m=s.vertex,i.endPoint(s.edge,s.side,m),i.endPoint(u.edge,u.side,m),r.del(s),o.del(u),r.del(u),y="l",f.y>d.y&&(p=f,f=d,d=p,y="r"),v=i.bisect(f,d),l=r.createHalfEdge(v,y),r.insert(c,l),i.endPoint(v,rr[y],m),(g=i.intersect(c,l))&&(o.del(c),o.insert(c,g,i.distance(g,f))),(g=i.intersect(l,h))&&o.insert(l,g,i.distance(g,f))}for(s=r.right(r.leftEnd);s!=r.rightEnd;s=r.right(s))n(s.edge)}function or(t){return t.x}function ar(t){return t.y}function sr(t,e){t=n.rgb(t),e=n.rgb(e);var r=t.r,i=t.g,o=t.b,a=e.r-r,s=e.g-i,u=e.b-o;return function(t){return"#"+Ot(Math.round(r+a*t))+Ot(Math.round(i+s*t))+Ot(Math.round(o+u*t))}}function ur(t){var n=[t.a,t.b],e=[t.c,t.d],r=hr(n),i=cr(n,e),o=hr(function(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}(e,n,-i))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*ft,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*ft:0}function cr(t,n){return t[0]*n[0]+t[1]*n[1]}function hr(t){var n=Math.sqrt(cr(t,t));return n&&(t[0]/=n,t[1]/=n),n}n.geom.quadtree=function(t,n,e,r,i){var o,a=Ve,s=We;if(o=arguments.length)return a=or,s=ar,3===o&&(i=e,r=n,e=n=0),u(t);function u(t){var u,c,h,l,f,d,p,g,m,v=qt(a),y=qt(s);if(null!=n)d=n,p=e,g=r,m=i;else if(g=m=-(d=p=1/0),c=[],h=[],f=t.length,o)for(l=0;l<f;++l)(u=t[l]).x<d&&(d=u.x),u.y<p&&(p=u.y),u.x>g&&(g=u.x),u.y>m&&(m=u.y),c.push(u.x),h.push(u.y);else for(l=0;l<f;++l){var b=+v(u=t[l],l),x=+y(u,l);b<d&&(d=b),x<p&&(p=x),b>g&&(g=b),x>m&&(m=x),c.push(b),h.push(x)}var M=g-d,k=m-p;function C(t,n,e,r,i,o,a,s){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(Math.abs(u-e)+Math.abs(c-r)<.01)_(t,n,e,r,i,o,a,s);else{var h=t.point;t.x=t.y=t.point=null,_(t,h,u,c,i,o,a,s),_(t,n,e,r,i,o,a,s)}else t.x=e,t.y=r,t.point=n}else _(t,n,e,r,i,o,a,s)}function _(t,n,e,r,i,o,a,s){var u=.5*(i+a),c=.5*(o+s),h=e>=u,l=r>=c,f=(l<<1)+h;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){C(w,t,+v(t,++l),+y(t,l),d,p,g,m)}}),h?i=u:a=u,l?o=c:s=c,C(t,n,e,r,i,o,a,s)}M>k?m=p+M:g=d+k;var w={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){C(w,t,+v(t,++l),+y(t,l),d,p,g,m)}};if(w.visit=function(t){!function t(n,e,r,i,o,a){if(!n(e,r,i,o,a)){var s=.5*(r+o),u=.5*(i+a),c=e.nodes;c[0]&&t(n,c[0],r,i,s,u),c[1]&&t(n,c[1],s,i,o,u),c[2]&&t(n,c[2],r,u,s,a),c[3]&&t(n,c[3],s,u,o,a)}}(t,w,d,p,g,m)},l=-1,null==n){for(;++l<f;)C(w,t[l],c[l],h[l],d,p,g,m);--l}else t.forEach(w.add);return c=h=t=u=null,w}return u.x=function(t){return arguments.length?(a=t,u):a},u.y=function(t){return arguments.length?(s=t,u):s},u.size=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=e=0,r=+t[0],i=+t[1]),u):null==n?null:[r,i]},u},n.interpolateRgb=sr,n.transform=function(t){var r=e.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(t){if(null!=t){r.setAttribute("transform",t);var n=r.transform.baseVal.consolidate()}return new ur(n?n.matrix:lr)})(t)},ur.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var lr={a:1,b:0,c:0,d:1,e:0,f:0};function fr(t,n){return n-=t=+t,function(e){return t+n*e}}function dr(t,e){var r,i=[],o=[],a=n.transform(t),s=n.transform(e),u=a.translate,c=s.translate,h=a.rotate,l=s.rotate,f=a.skew,d=s.skew,p=a.scale,g=s.scale;return u[0]!=c[0]||u[1]!=c[1]?(i.push("translate(",null,",",null,")"),o.push({i:1,x:fr(u[0],c[0])},{i:3,x:fr(u[1],c[1])})):c[0]||c[1]?i.push("translate("+c+")"):i.push(""),h!=l?(h-l>180?l+=360:l-h>180&&(h+=360),o.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:fr(h,l)})):l&&i.push(i.pop()+"rotate("+l+")"),f!=d?o.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:fr(f,d)}):d&&i.push(i.pop()+"skewX("+d+")"),p[0]!=g[0]||p[1]!=g[1]?(r=i.push(i.pop()+"scale(",null,",",null,")"),o.push({i:r-4,x:fr(p[0],g[0])},{i:r-2,x:fr(p[1],g[1])})):1==g[0]&&1==g[1]||i.push(i.pop()+"scale("+g+")"),r=o.length,function(t){for(var n,e=-1;++e<r;)i[(n=o[e]).i]=n.x(t);return i.join("")}}function pr(t,n){var e,r={},i={};for(e in t)e in n?r[e]=yr(e)(t[e],n[e]):i[e]=t[e];for(e in n)e in t||(i[e]=n[e]);return function(t){for(e in r)i[e]=r[e](t);return i}}function gr(t,n){var e,r,i,o,a,s=0,u=[],c=[];for(t+="",n+="",mr.lastIndex=0,r=0;e=mr.exec(n);++r)e.index&&u.push(n.substring(s,e.index)),c.push({i:u.length,x:e[0]}),u.push(null),s=mr.lastIndex;for(s<n.length&&u.push(n.substring(s)),r=0,o=c.length;(e=mr.exec(t))&&r<o;++r)if((a=c[r]).x==e[0]){if(a.i)if(null==u[a.i+1])for(u[a.i-1]+=a.x,u.splice(a.i,1),i=r+1;i<o;++i)c[i].i--;else for(u[a.i-1]+=a.x+u[a.i+1],u.splice(a.i,2),i=r+1;i<o;++i)c[i].i-=2;else if(null==u[a.i+1])u[a.i]=a.x;else for(u[a.i]=a.x+u[a.i+1],u.splice(a.i+1,1),i=r+1;i<o;++i)c[i].i--;c.splice(r,1),o--,r--}else a.x=fr(parseFloat(e[0]),parseFloat(a.x));for(;r<o;)a=c.pop(),null==u[a.i+1]?u[a.i]=a.x:(u[a.i]=a.x+u[a.i+1],u.splice(a.i+1,1)),o--;return 1===u.length?null==u[0]?(a=c[0].x,function(t){return a(t)+""}):function(){return n}:function(t){for(r=0;r<o;++r)u[(a=c[r]).i]=a.x(t);return u.join("")}}n.interpolateNumber=fr,n.interpolateTransform=dr,n.interpolateObject=pr,n.interpolateString=gr;var mr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;function vr(t,e){for(var r,i=n.interpolators.length;--i>=0&&!(r=n.interpolators[i](t,e)););return r}function yr(t){return"transform"==t?dr:vr}function br(t,n){var e,r=[],i=[],o=t.length,a=n.length,s=Math.min(t.length,n.length);for(e=0;e<s;++e)r.push(vr(t[e],n[e]));for(;e<o;++e)i[e]=t[e];for(;e<a;++e)i[e]=n[e];return function(t){for(e=0;e<s;++e)i[e]=r[e](t);return i}}n.interpolate=vr,n.interpolators=[function(t,n){var e=typeof n;return("string"===e?Wt.has(n)||/^(#|rgb\(|hsl\()/.test(n)?sr:gr:n instanceof it?sr:"object"===e?Array.isArray(n)?br:pr:fr)(t,n)}],n.interpolateArray=br;var xr=function(){return jt},Mr=n.map({linear:xr,poly:function(t){return function(n){return Math.pow(n,t)}},quad:function(){return wr},cubic:function(){return Tr},sin:function(){return Sr},exp:function(){return Fr},circle:function(){return Er},elastic:function(t,n){var e;arguments.length<2&&(n=.45);arguments.length?e=n/(2*ct)*Math.asin(1/t):(t=1,e=n/4);return function(r){return 1+t*Math.pow(2,10*-r)*Math.sin(2*(r-e)*ct/n)}},back:function(t){t||(t=1.70158);return function(n){return n*n*((t+1)*n-t)}},bounce:function(){return Ar}}),kr=n.map({in:jt,out:Cr,"in-out":_r,"out-in":function(t){return _r(Cr(t))}});function Cr(t){return function(n){return 1-t(1-n)}}function _r(t){return function(n){return.5*(n<.5?t(2*n):2-t(2-2*n))}}function wr(t){return t*t}function Tr(t){return t*t*t}function Sr(t){return 1-Math.cos(t*ct/2)}function Fr(t){return Math.pow(2,10*(t-1))}function Er(t){return 1-Math.sqrt(1-t*t)}function Ar(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Lr(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Rr(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return(e-t)*n}}function Dr(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return Math.max(0,Math.min(1,(e-t)*n))}}function Or(t){for(var n=t.source,e=t.target,r=function(t,n){if(t===n)return t;var e=Br(t),r=Br(n),i=e.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=e.pop(),o=r.pop();return a}(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var o=i.length;e!==r;)i.splice(o,0,e),e=e.parent;return i}function Br(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function Nr(t){t.fixed|=2}function zr(t){t.fixed&=-7}function Hr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Vr(t){t.fixed&=-5}n.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.substring(0,n):t,r=n>=0?t.substring(n+1):"in";return e=Mr.get(e)||xr,function(t){return function(n){return n<=0?0:n>=1?1:t(n)}}((r=kr.get(r)||jt)(e.apply(null,Array.prototype.slice.call(arguments,1))))},n.interpolateHcl=function(t,e){t=n.hcl(t),e=n.hcl(e);var r=t.h,i=t.c,o=t.l,a=e.h-r,s=e.c-i,u=e.l-o;isNaN(s)&&(s=0,i=isNaN(i)?e.c:i);isNaN(a)?(a=0,r=isNaN(r)?e.h:r):a>180?a-=360:a<-180&&(a+=360);return function(t){return yt(r+a*t,i+s*t,o+u*t)+""}},n.interpolateHsl=function(t,e){t=n.hsl(t),e=n.hsl(e);var r=t.h,i=t.s,o=t.l,a=e.h-r,s=e.s-i,u=e.l-o;isNaN(s)&&(s=0,i=isNaN(i)?e.s:i);isNaN(a)?(a=0,r=isNaN(r)?e.h:r):a>180?a-=360:a<-180&&(a+=360);return function(t){return ut(r+a*t,i+s*t,o+u*t)+""}},n.interpolateLab=function(t,e){t=n.lab(t),e=n.lab(e);var r=t.l,i=t.a,o=t.b,a=e.l-r,s=e.a-i,u=e.b-o;return function(t){return Tt(r+a*t,i+s*t,o+u*t)+""}},n.interpolateRound=Lr,n.layout={},n.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Or(t[e]));return n}},n.layout.chord=function(){var t,e,r,i,o,a,s,u={},c=0;function h(){var u,h,f,d,p,g={},m=[],v=n.range(i),y=[];for(t=[],e=[],u=0,d=-1;++d<i;){for(h=0,p=-1;++p<i;)h+=r[d][p];m.push(h),y.push(n.range(i)),u+=h}for(o&&v.sort(function(t,n){return o(m[t],m[n])}),a&&y.forEach(function(t,n){t.sort(function(t,e){return a(r[n][t],r[n][e])})}),u=(2*ct-c*i)/u,h=0,d=-1;++d<i;){for(f=h,p=-1;++p<i;){var b=v[d],x=y[b][p],M=r[b][x],k=h,C=h+=M*u;g[b+"-"+x]={index:b,subindex:x,startAngle:k,endAngle:C,value:M}}e[b]={index:b,startAngle:f,endAngle:h,value:(h-f)/u},h+=c}for(d=-1;++d<i;)for(p=d-1;++p<i;){var _=g[d+"-"+p],w=g[p+"-"+d];(_.value||w.value)&&t.push(_.value<w.value?{source:w,target:_}:{source:_,target:w})}s&&l()}function l(){t.sort(function(t,n){return s((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}return u.matrix=function(n){return arguments.length?(i=(r=n)&&r.length,t=e=null,u):r},u.padding=function(n){return arguments.length?(c=n,t=e=null,u):c},u.sortGroups=function(n){return arguments.length?(o=n,t=e=null,u):o},u.sortSubgroups=function(n){return arguments.length?(a=n,t=null,u):a},u.sortChords=function(n){return arguments.length?(s=n,t&&l(),u):s},u.chords=function(){return t||h(),t},u.groups=function(){return e||h(),e},u},n.layout.force=function(){var t,e,r,i,o,a={},s=n.dispatch("start","tick","end"),u=[1,1],c=.9,h=Wr,l=qr,f=-30,d=.1,p=.8,g=[],m=[];function v(t){return function(n,e,r,i){if(n.point!==t){var o=n.cx-t.x,a=n.cy-t.y,s=1/Math.sqrt(o*o+a*a);if((i-e)*s<p){var u=n.charge*s*s;return t.px-=o*u,t.py-=a*u,!0}if(n.point&&isFinite(s)){u=n.pointCharge*s*s;t.px-=o*u,t.py-=a*u}}return!n.charge}}function y(t){t.px=n.event.x,t.py=n.event.y,a.resume()}return a.tick=function(){if((e*=.99)<.005)return s.end({type:"end",alpha:e=0}),!0;var t,a,h,l,p,y,b,x,M,k=g.length,C=m.length;for(a=0;a<C;++a)l=(h=m[a]).source,(y=(x=(p=h.target).x-l.x)*x+(M=p.y-l.y)*M)&&(x*=y=e*i[a]*((y=Math.sqrt(y))-r[a])/y,M*=y,p.x-=x*(b=l.weight/(p.weight+l.weight)),p.y-=M*b,l.x+=x*(b=1-b),l.y+=M*b);if((b=e*d)&&(x=u[0]/2,M=u[1]/2,a=-1,b))for(;++a<k;)(h=g[a]).x+=(x-h.x)*b,h.y+=(M-h.y)*b;if(f)for(!function t(n,e,r){var i=0,o=0;n.charge=0;if(!n.leaf)for(var a,s=n.nodes,u=s.length,c=-1;++c<u;)null!=(a=s[c])&&(t(a,e,r),n.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var h=e*r[n.point.index];n.charge+=n.pointCharge=h,i+=h*n.point.x,o+=h*n.point.y}n.cx=i/n.charge;n.cy=o/n.charge}(t=n.geom.quadtree(g),e,o),a=-1;++a<k;)(h=g[a]).fixed||t.visit(v(h));for(a=-1;++a<k;)(h=g[a]).fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*c,h.y-=(h.py-(h.py=h.y))*c);s.tick({type:"tick",alpha:e})},a.nodes=function(t){return arguments.length?(g=t,a):g},a.links=function(t){return arguments.length?(m=t,a):m},a.size=function(t){return arguments.length?(u=t,a):u},a.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,a):h},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(l="function"==typeof t?t:+t,a):l},a.friction=function(t){return arguments.length?(c=+t,a):c},a.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,a):f},a.gravity=function(t){return arguments.length?(d=+t,a):d},a.theta=function(t){return arguments.length?(p=+t,a):p},a.alpha=function(t){return arguments.length?(t=+t,e?e=t>0?t:0:t>0&&(s.start({type:"start",alpha:e=t}),n.timer(a.tick)),a):e},a.start=function(){var t,n,e,s,c=g.length,d=m.length,p=u[0],v=u[1];for(t=0;t<c;++t)(s=g[t]).index=t,s.weight=0;for(t=0;t<d;++t)"number"==typeof(s=m[t]).source&&(s.source=g[s.source]),"number"==typeof s.target&&(s.target=g[s.target]),++s.source.weight,++s.target.weight;for(t=0;t<c;++t)s=g[t],isNaN(s.x)&&(s.x=y("x",p)),isNaN(s.y)&&(s.y=y("y",v)),isNaN(s.px)&&(s.px=s.x),isNaN(s.py)&&(s.py=s.y);if(r=[],"function"==typeof h)for(t=0;t<d;++t)r[t]=+h.call(this,m[t],t);else for(t=0;t<d;++t)r[t]=h;if(i=[],"function"==typeof l)for(t=0;t<d;++t)i[t]=+l.call(this,m[t],t);else for(t=0;t<d;++t)i[t]=l;if(o=[],"function"==typeof f)for(t=0;t<c;++t)o[t]=+f.call(this,g[t],t);else for(t=0;t<c;++t)o[t]=f;function y(t,n){for(var e,r=b(),i=-1,o=r.length;++i<o;)if(!isNaN(e=r[i][t]))return e;return Math.random()*n}function b(){if(!e){for(e=[],n=0;n<c;++n)e[n]=[];for(n=0;n<d;++n){var r=m[n];e[r.source.index].push(r.target),e[r.target.index].push(r.source)}}return e[t]}return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){if(t||(t=n.behavior.drag().origin(jt).on("dragstart.force",Nr).on("drag.force",y).on("dragend.force",zr)),!arguments.length)return t;this.on("mouseover.force",Hr).on("mouseout.force",Vr).call(t)},n.rebind(a,s,"on")};var Wr=20,qr=1;function jr(t,e){return n.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Ur,t}function Ir(t){return t.children}function Pr(t){return t.value}function Gr(t,n){return n.value-t.value}function Ur(t){return n.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}n.layout.hierarchy=function(){var t=Gr,n=Ir,e=Pr;function r(i){var o=[];return function i(o,a,s){var u=n.call(r,o,a);if(o.depth=a,s.push(o),u&&(c=u.length)){for(var c,h,l=-1,f=o.children=[],d=0,p=a+1;++l<c;)(h=i(u[l],p,s)).parent=o,f.push(h),d+=h.value;t&&f.sort(t),e&&(o.value=d)}else e&&(o.value=+e.call(r,o,a)||0);return o}(i,0,o),o}return r.sort=function(n){return arguments.length?(t=n,r):t},r.children=function(t){return arguments.length?(n=t,r):n},r.value=function(t){return arguments.length?(e=t,r):e},r.revalue=function(t){return function t(n,i){var o=n.children,a=0;if(o&&(s=o.length))for(var s,u=-1,c=i+1;++u<s;)a+=t(o[u],c);else e&&(a=+e.call(r,n,i)||0);return e&&(n.value=a),a}(t,0),t},r},n.layout.partition=function(){var t=n.layout.hierarchy(),e=[1,1];function r(n,r){var i=t.call(this,n,r);return function t(n,e,r,i){var o=n.children;if(n.x=e,n.y=n.depth*i,n.dx=r,n.dy=i,o&&(a=o.length)){var a,s,u,c=-1;for(r=n.value?r/n.value:0;++c<a;)t(s=o[c],e,u=s.value*r,i),e+=u}}(i[0],0,e[0],e[1]/function t(n){var e=n.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(e[o]));return 1+r}(i[0])),i}return r.size=function(t){return arguments.length?(e=t,r):e},jr(r,t)},n.layout.pie=function(){var t=Number,e=Yr,r=0,i=2*ct;function o(a){var s=a.map(function(n,e){return+t.call(o,n,e)}),u=+("function"==typeof r?r.apply(this,arguments):r),c=(("function"==typeof i?i.apply(this,arguments):i)-u)/n.sum(s),h=n.range(a.length);null!=e&&h.sort(e===Yr?function(t,n){return s[n]-s[t]}:function(t,n){return e(a[t],a[n])});var l=[];return h.forEach(function(t){var n;l[t]={data:a[t],value:n=s[t],startAngle:u,endAngle:u+=n*c}}),l}return o.value=function(n){return arguments.length?(t=n,o):t},o.sort=function(t){return arguments.length?(e=t,o):e},o.startAngle=function(t){return arguments.length?(r=t,o):r},o.endAngle=function(t){return arguments.length?(i=t,o):i},o};var Yr={};function $r(t){return t.x}function Zr(t){return t.y}function Xr(t,n,e){t.y0=n,t.y=e}n.layout.stack=function(){var t=jt,e=Qr,r=ti,i=Xr,o=$r,a=Zr;function s(u,c){var h=u.map(function(n,e){return t.call(s,n,e)}),l=h.map(function(t){return t.map(function(t,n){return[o.call(s,t,n),a.call(s,t,n)]})}),f=e.call(s,l,c);h=n.permute(h,f),l=n.permute(l,f);var d,p,g,m=r.call(s,l,c),v=h.length,y=h[0].length;for(p=0;p<y;++p)for(i.call(s,h[0][p],g=m[p],l[0][p][1]),d=1;d<v;++d)i.call(s,h[d][p],g+=l[d-1][p][1],l[d][p][1]);return u}return s.values=function(n){return arguments.length?(t=n,s):t},s.order=function(t){return arguments.length?(e="function"==typeof t?t:Jr.get(t)||Qr,s):e},s.offset=function(t){return arguments.length?(r="function"==typeof t?t:Kr.get(t)||ti,s):r},s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(i=t,s):i},s};var Jr=n.map({"inside-out":function(t){var e,r,i=t.length,o=t.map(ni),a=t.map(ei),s=n.range(i).sort(function(t,n){return o[t]-o[n]}),u=0,c=0,h=[],l=[];for(e=0;e<i;++e)r=s[e],u<c?(u+=a[r],h.push(r)):(c+=a[r],l.push(r));return l.reverse().concat(h)},reverse:function(t){return n.range(t.length).reverse()},default:Qr}),Kr=n.map({silhouette:function(t){var n,e,r,i=t.length,o=t[0].length,a=[],s=0,u=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];r>s&&(s=r),a.push(r)}for(e=0;e<o;++e)u[e]=(s-a[e])/2;return u},wiggle:function(t){var n,e,r,i,o,a,s,u,c,h=t.length,l=t[0],f=l.length,d=[];for(d[0]=u=c=0,e=1;e<f;++e){for(n=0,i=0;n<h;++n)i+=t[n][e][1];for(n=0,o=0,s=l[e][0]-l[e-1][0];n<h;++n){for(r=0,a=(t[n][e][1]-t[n][e-1][1])/(2*s);r<n;++r)a+=(t[r][e][1]-t[r][e-1][1])/s;o+=a*t[n][e][1]}d[e]=u-=i?o/i*s:0,u<c&&(c=u)}for(e=0;e<f;++e)d[e]-=c;return d},expand:function(t){var n,e,r,i=t.length,o=t[0].length,a=1/i,s=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];if(r)for(n=0;n<i;n++)t[n][e][1]/=r;else for(n=0;n<i;n++)t[n][e][1]=a}for(e=0;e<o;++e)s[e]=0;return s},zero:ti});function Qr(t){return n.range(t.length)}function ti(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function ni(t){for(var n,e=1,r=0,i=t[0][1],o=t.length;e<o;++e)(n=t[e][1])>i&&(r=e,i=n);return r}function ei(t){return t.reduce(ri,0)}function ri(t,n){return t+n[1]}function ii(t,n){return oi(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function oi(t,n){for(var e=-1,r=+t[0],i=(t[1]-r)/n,o=[];++e<=n;)o[e]=i*e+r;return o}function ai(t){return[n.min(t),n.max(t)]}function si(t,n){return t.parent==n.parent?1:2}function ui(t){var n=t.children;return n&&n.length?n[0]:t._tree.thread}function ci(t){var n,e=t.children;return e&&(n=e.length)?e[n-1]:t._tree.thread}function hi(t,n){var e=t.children;if(e&&(i=e.length))for(var r,i,o=-1;++o<i;)n(r=hi(e[o],n),t)>0&&(t=r);return t}function li(t,n){return t.x-n.x}function fi(t,n){return n.x-t.x}function di(t,n){return t.depth-n.depth}function pi(t,n){!function t(e,r){var i=e.children;if(i&&(a=i.length))for(var o,a,s=null,u=-1;++u<a;)t(o=i[u],s),s=o;n(e,r)}(t,null)}function gi(t,n,e){t=t._tree;var r=e/((n=n._tree).number-t.number);t.change+=r,n.change-=r,n.shift+=e,n.prelim+=e,n.mod+=e}function mi(t,n,e){return t._tree.ancestor.parent==n.parent?t._tree.ancestor:e}function vi(t,n){return t.value-n.value}function yi(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function bi(t,n){t._pack_next=n,n._pack_prev=t}function xi(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return i*i-e*e-r*r>.001}function Mi(t){if((n=t.children)&&(u=n.length)){var n,e,r,i,o,a,s,u,c=1/0,h=-1/0,l=1/0,f=-1/0;if(n.forEach(ki),(e=n[0]).x=-e.r,e.y=0,b(e),u>1&&((r=n[1]).x=r.r,r.y=0,b(r),u>2))for(_i(e,r,i=n[2]),b(i),yi(e,i),e._pack_prev=i,yi(i,r),r=e._pack_next,o=3;o<u;o++){_i(e,r,i=n[o]);var d=0,p=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,p++)if(xi(a,i)){d=1;break}if(1==d)for(s=e._pack_prev;s!==a._pack_prev&&!xi(s,i);s=s._pack_prev,g++);d?(p<g||p==g&&r.r<e.r?bi(e,r=a):bi(e=s,r),o--):(yi(e,i),r=i,b(i))}var m=(c+h)/2,v=(l+f)/2,y=0;for(o=0;o<u;o++)(i=n[o]).x-=m,i.y-=v,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,n.forEach(Ci)}function b(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),l=Math.min(t.y-t.r,l),f=Math.max(t.y+t.r,f)}}function ki(t){t._pack_next=t._pack_prev=t}function Ci(t){delete t._pack_next,delete t._pack_prev}function _i(t,n,e){var r=t.r+e.r,i=n.x-t.x,o=n.y-t.y;if(r&&(i||o)){var a=n.r+e.r,s=i*i+o*o,u=.5+((r*=r)-(a*=a))/(2*s),c=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);e.x=t.x+u*i+c*o,e.y=t.y+u*o-c*i}else e.x=t.x+r,e.y=t.y}function wi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ti(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return i<0&&(e+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:e,y:r,dx:i,dy:o}}function Si(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}function Fi(t){return t.rangeExtent?t.rangeExtent():Si(t.range())}function Ei(t,n,e,r){var i=e(t[0],t[1]),o=r(n[0],n[1]);return function(t){return o(i(t))}}function Ai(t,n){var e,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),(n=n(a-o))&&(t[r]=n.floor(o),t[i]=n.ceil(a)),t}function Li(t,e,r,i){var o=[],a=[],s=0,u=Math.min(t.length,e.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=u;)o.push(r(t[s-1],t[s])),a.push(i(e[s-1],e[s]));return function(e){var r=n.bisect(t,e,1,u)-1;return a[r](o[r](e))}}function Ri(t,e){return n.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Di(t){return(t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1))&&{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}}function Oi(t,n){var e=Si(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function Bi(t,e){return n.range.apply(n,Oi(t,e))}function Ni(t,e,r){var i=-Math.floor(Math.log(Oi(t,e)[2])/Math.LN10+.01);return n.format(r?r.replace(tn,function(t,n,e,r,o,a,s,u,c,h){return[n,e,r,o,a,s,u,c||"."+(i-2*("%"===h)),h].join("")}):",."+i+"f")}n.layout.histogram=function(){var t=!0,e=Number,r=ai,i=ii;function o(o,a){for(var s,u,c=[],h=o.map(e,this),l=r.call(this,h,a),f=i.call(this,l,h,a),d=(a=-1,h.length),p=f.length-1,g=t?1:1/d;++a<p;)(s=c[a]=[]).dx=f[a+1]-(s.x=f[a]),s.y=0;if(p>0)for(a=-1;++a<d;)(u=h[a])>=l[0]&&u<=l[1]&&((s=c[n.bisect(f,u,1,p)-1]).y+=g,s.push(o[a]));return c}return o.value=function(t){return arguments.length?(e=t,o):e},o.range=function(t){return arguments.length?(r=qt(t),o):r},o.bins=function(t){return arguments.length?(i="number"==typeof t?function(n){return oi(n,t)}:qt(t),o):i},o.frequency=function(n){return arguments.length?(t=!!n,o):t},o},n.layout.tree=function(){var t=n.layout.hierarchy().sort(null).value(null),e=si,r=[1,1];function i(n,i){var o=t.call(this,n,i),a=o[0];function s(t,n,r){if(n){for(var i,o=t,a=t,s=n,u=t.parent.children[0],c=o._tree.mod,h=a._tree.mod,l=s._tree.mod,f=u._tree.mod;s=ci(s),o=ui(o),s&&o;)u=ui(u),(a=ci(a))._tree.ancestor=t,(i=s._tree.prelim+l-o._tree.prelim-c+e(s,o))>0&&(gi(mi(s,t,r),t,i),c+=i,h+=i),l+=s._tree.mod,c+=o._tree.mod,f+=u._tree.mod,h+=a._tree.mod;s&&!ci(a)&&(a._tree.thread=s,a._tree.mod+=l-h),o&&!ui(u)&&(u._tree.thread=o,u._tree.mod+=c-f,r=t)}return r}pi(a,function(t,n){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:n?n._tree.number+1:0}}),function t(n,r){var i=n.children,o=n._tree;if(i&&(a=i.length)){for(var a,u,c,h=i[0],l=h,f=-1;++f<a;)t(c=i[f],u),l=s(c,u,l),u=c;!function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]._tree).prelim+=e,n.mod+=e,e+=n.shift+(r+=n.change)}(n);var d=.5*(h._tree.prelim+c._tree.prelim);r?(o.prelim=r._tree.prelim+e(n,r),o.mod=o.prelim-d):o.prelim=d}else r&&(o.prelim=r._tree.prelim+e(n,r))}(a),function t(n,e){n.x=n._tree.prelim+e;var r=n.children;if(r&&(i=r.length)){var i,o=-1;for(e+=n._tree.mod;++o<i;)t(r[o],e)}}(a,-a._tree.prelim);var u=hi(a,fi),c=hi(a,li),h=hi(a,di),l=u.x-e(u,c)/2,f=c.x+e(c,u)/2,d=h.depth||1;return pi(a,function(t){t.x=(t.x-l)/(f-l)*r[0],t.y=t.depth/d*r[1],delete t._tree}),o}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=t,i):r},jr(i,t)},n.layout.pack=function(){var t=n.layout.hierarchy().sort(vi),e=0,r=[1,1];function i(n,i){var o=t.call(this,n,i),a=o[0];a.x=0,a.y=0,pi(a,function(t){t.r=Math.sqrt(t.value)}),pi(a,Mi);var s=r[0],u=r[1],c=Math.max(2*a.r/s,2*a.r/u);if(e>0){var h=e*c/2;pi(a,function(t){t.r+=h}),pi(a,Mi),pi(a,function(t){t.r-=h}),c=Math.max(2*a.r/s,2*a.r/u)}return function t(n,e,r,i){var o=n.children;n.x=e+=i*n.x;n.y=r+=i*n.y;n.r*=i;if(o)for(var a=-1,s=o.length;++a<s;)t(o[a],e,r,i)}(a,s/2,u/2,1/c),o}return i.size=function(t){return arguments.length?(r=t,i):r},i.padding=function(t){return arguments.length?(e=+t,i):e},jr(i,t)},n.layout.cluster=function(){var t=n.layout.hierarchy().sort(null).value(null),e=si,r=[1,1];function i(i,o){var a,s=t.call(this,i,o),u=s[0],c=0;pi(u,function(t){var r=t.children;r&&r.length?(t.x=function(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}(r),t.y=function(t){return 1+n.max(t,function(t){return t.y})}(r)):(t.x=a?c+=e(t,a):0,t.y=0,a=t)});var h=function t(n){var e=n.children;return e&&e.length?t(e[0]):n}(u),l=function t(n){var e,r=n.children;return r&&(e=r.length)?t(r[e-1]):n}(u),f=h.x-e(h,l)/2,d=l.x+e(l,h)/2;return pi(u,function(t){t.x=(t.x-f)/(d-f)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),s}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=t,i):r},jr(i,t)},n.layout.treemap=function(){var t,e=n.layout.hierarchy(),r=Math.round,i=[1,1],o=null,a=wi,s=!1,u="squarify",c=.5*(1+Math.sqrt(5));function h(t,n){for(var e,r,i=-1,o=t.length;++i<o;)r=(e=t[i]).value*(n<0?0:n),e.area=isNaN(r)||r<=0?0:r}function l(t){var n=t.children;if(n&&n.length){var e,r,i,o=a(t),s=[],c=n.slice(),f=1/0,g="slice"===u?o.dx:"dice"===u?o.dy:"slice-dice"===u?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(h(c,o.dx*o.dy/t.value),s.area=0;(i=c.length)>0;)s.push(e=c[i-1]),s.area+=e.area,"squarify"!==u||(r=d(s,g))<=f?(c.pop(),f=r):(s.area-=s.pop().area,p(s,g,o,!1),g=Math.min(o.dx,o.dy),s.length=s.area=0,f=1/0);s.length&&(p(s,g,o,!0),s.length=s.area=0),n.forEach(l)}}function f(t){var n=t.children;if(n&&n.length){var e,r=a(t),i=n.slice(),o=[];for(h(i,r.dx*r.dy/t.value),o.area=0;e=i.pop();)o.push(e),o.area+=e.area,null!=e.z&&(p(o,e.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);n.forEach(f)}}function d(t,n){for(var e,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(e=t[a].area)&&(e<o&&(o=e),e>i&&(i=e));return n*=n,(r*=r)?Math.max(n*i*c/r,r/(n*o*c)):1/0}function p(t,n,e,i){var o,a=-1,s=t.length,u=e.x,c=e.y,h=n?r(t.area/n):0;if(n==e.dx){for((i||h>e.dy)&&(h=e.dy);++a<s;)(o=t[a]).x=u,o.y=c,o.dy=h,u+=o.dx=Math.min(e.x+e.dx-u,h?r(o.area/h):0);o.z=!0,o.dx+=e.x+e.dx-u,e.y+=h,e.dy-=h}else{for((i||h>e.dx)&&(h=e.dx);++a<s;)(o=t[a]).x=u,o.y=c,o.dx=h,c+=o.dy=Math.min(e.y+e.dy-c,h?r(o.area/h):0);o.z=!1,o.dy+=e.y+e.dy-c,e.x+=h,e.dx-=h}}function g(n){var r=t||e(n),o=r[0];return o.x=0,o.y=0,o.dx=i[0],o.dy=i[1],t&&e.revalue(o),h([o],o.dx*o.dy/o.value),(t?f:l)(o),s&&(t=r),r}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return o;function n(n){return Ti(n,t)}var e;return a=null==(o=t)?wi:"function"==(e=typeof t)?function(n){var e=t.call(g,n,n.depth);return null==e?wi(n):Ti(n,"number"==typeof e?[e,e,e,e]:e)}:"number"===e?(t=[t,t,t,t],n):n,g},g.round=function(t){return arguments.length?(r=t?Math.round:Number,g):r!=Number},g.sticky=function(n){return arguments.length?(s=n,t=null,g):s},g.ratio=function(t){return arguments.length?(c=t,g):c},g.mode=function(t){return arguments.length?(u=t+"",g):u},jr(g,e)},n.random={normal:function(t,n){var e=arguments.length;return e<2&&(n=1),e<1&&(t=0),function(){var e,r,i;do{i=(e=2*Math.random()-1)*e+(r=2*Math.random()-1)*r}while(!i||i>1);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=n.random.normal.apply(n,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var n=0,e=0;e<t;e++)n+=Math.random();return n/t}}},n.scale={},n.scale.linear=function(){return function t(n,e,r,i){var o,a;function s(){var t=Math.min(n.length,e.length)>2?Li:Ei,s=i?Dr:Rr;return o=t(n,e,s,r),a=t(e,n,s,vr),u}function u(t){return o(t)}u.invert=function(t){return a(t)};u.domain=function(t){return arguments.length?(n=t.map(Number),s()):n};u.range=function(t){return arguments.length?(e=t,s()):e};u.rangeRound=function(t){return u.range(t).interpolate(Lr)};u.clamp=function(t){return arguments.length?(i=t,s()):i};u.interpolate=function(t){return arguments.length?(r=t,s()):r};u.ticks=function(t){return Bi(n,t)};u.tickFormat=function(t,e){return Ni(n,t,e)};u.nice=function(){return Ai(n,Di),s()};u.copy=function(){return t(n,e,r,i)};return s()}([0,1],[0,1],vr,!1)},n.scale.log=function(){return function t(n,e,r,i,o){function a(t){return n(r(t))}a.invert=function(t){return i(n.invert(t))};a.domain=function(t){return arguments.length?(t[0]<0?(r=Wi,i=qi):(r=Hi,i=Vi),n.domain((o=t.map(Number)).map(r)),a):o};a.base=function(t){return arguments.length?(e=+t,a):e};a.nice=function(){return n.domain(Ai(o,s).map(r)),a};a.ticks=function(){var t=Si(n.domain()),o=[];if(t.every(isFinite)){var a=Math.log(e),s=Math.floor(t[0]/a),u=Math.ceil(t[1]/a),c=i(t[0]),h=i(t[1]),l=e%1?2:e;if(r===Wi)for(o.push(-Math.pow(e,-s));s++<u;)for(var f=l-1;f>0;f--)o.push(-Math.pow(e,-s)*f);else{for(;s<u;s++)for(var f=1;f<l;f++)o.push(Math.pow(e,s)*f);o.push(Math.pow(e,s))}for(s=0;o[s]<c;s++);for(u=o.length;o[u-1]>h;u--);o=o.slice(s,u)}return o};a.tickFormat=function(t,n){if(arguments.length<2&&(n=zi),!arguments.length)return n;var o,s=Math.log(e),u=Math.max(.1,t/a.ticks().length),c=r===Wi?(o=-1e-12,Math.floor):(o=1e-12,Math.ceil);return function(t){return t/i(s*c(r(t)/s+o))<=u?n(t):""}};a.copy=function(){return t(n.copy(),e,r,i,o)};function s(){return r===Hi?{floor:u,ceil:c}:{floor:function(t){return-c(-t)},ceil:function(t){return-u(-t)}}}function u(t){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}function c(t){return Math.pow(e,Math.ceil(Math.log(t)/Math.log(e)))}return Ri(a,n)}(n.scale.linear().domain([0,Math.LN10]),10,Hi,Vi,[1,10])};var zi=n.format(".0e");function Hi(t){return Math.log(t<0?0:t)}function Vi(t){return Math.exp(t)}function Wi(t){return-Math.log(t>0?0:-t)}function qi(t){return-Math.exp(-t)}function ji(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}n.scale.pow=function(){return function t(n,e,r){var i=ji(e),o=ji(1/e);function a(t){return n(i(t))}a.invert=function(t){return o(n.invert(t))};a.domain=function(t){return arguments.length?(n.domain((r=t.map(Number)).map(i)),a):r};a.ticks=function(t){return Bi(r,t)};a.tickFormat=function(t,n){return Ni(r,t,n)};a.nice=function(){return a.domain(Ai(r,Di))};a.exponent=function(t){return arguments.length?(i=ji(e=t),o=ji(1/e),n.domain(r.map(i)),a):e};a.copy=function(){return t(n.copy(),e,r)};return Ri(a,n)}(n.scale.linear(),1,[0,1])},n.scale.sqrt=function(){return n.scale.pow().exponent(.5)},n.scale.ordinal=function(){return function t(e,r){var i,o,a;function s(t){return o[((i.get(t)||i.set(t,e.push(t)))-1)%o.length]}function u(t,r){return n.range(e.length).map(function(n){return t+r*n})}s.domain=function(t){if(!arguments.length)return e;e=[],i=new h;for(var n,o=-1,a=t.length;++o<a;)i.has(n=t[o])||i.set(n,e.push(n));return s[r.t].apply(s,r.a)};s.range=function(t){return arguments.length?(o=t,a=0,r={t:"range",a:arguments},s):o};s.rangePoints=function(t,n){arguments.length<2&&(n=0);var i=t[0],c=t[1],h=(c-i)/(Math.max(1,e.length-1)+n);return o=u(e.length<2?(i+c)/2:i+h*n/2,h),a=0,r={t:"rangePoints",a:arguments},s};s.rangeBands=function(t,n,i){arguments.length<2&&(n=0),arguments.length<3&&(i=n);var c=t[1]<t[0],h=t[c-0],l=t[1-c],f=(l-h)/(e.length-n+2*i);return o=u(h+f*i,f),c&&o.reverse(),a=f*(1-n),r={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(t,n,i){arguments.length<2&&(n=0),arguments.length<3&&(i=n);var c=t[1]<t[0],h=t[c-0],l=t[1-c],f=Math.floor((l-h)/(e.length-n+2*i)),d=l-h-(e.length-n)*f;return o=u(h+Math.round(d/2),f),c&&o.reverse(),a=Math.round(f*(1-n)),r={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return a};s.rangeExtent=function(){return Si(r.a[0])};s.copy=function(){return t(e,r)};return s.domain(e)}([],{t:"range",a:[[]]})},n.scale.category10=function(){return n.scale.ordinal().range(Ii)},n.scale.category20=function(){return n.scale.ordinal().range(Pi)},n.scale.category20b=function(){return n.scale.ordinal().range(Gi)},n.scale.category20c=function(){return n.scale.ordinal().range(Ui)};var Ii=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Pi=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Gi=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Ui=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];n.scale.quantile=function(){return function t(e,r){var i;function o(){var t=0,o=r.length;for(i=[];++t<o;)i[t-1]=n.quantile(e,t/o);return a}function a(t){return isNaN(t=+t)?NaN:r[n.bisect(i,t)]}a.domain=function(t){return arguments.length?(e=t.filter(function(t){return!isNaN(t)}).sort(n.ascending),o()):e};a.range=function(t){return arguments.length?(r=t,o()):r};a.quantiles=function(){return i};a.copy=function(){return t(e,r)};return o()}([],[])},n.scale.quantize=function(){return function t(n,e,r){var i,o;function a(t){return r[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function s(){return i=r.length/(e-n),o=r.length-1,a}a.domain=function(t){return arguments.length?(n=+t[0],e=+t[t.length-1],s()):[n,e]};a.range=function(t){return arguments.length?(r=t,s()):r};a.copy=function(){return t(n,e,r)};return s()}(0,1,[0,1])},n.scale.threshold=function(){return function t(e,r){function i(t){return r[n.bisect(e,t)]}i.domain=function(t){return arguments.length?(e=t,i):e};i.range=function(t){return arguments.length?(r=t,i):r};i.copy=function(){return t(e,r)};return i}([.5],[0,1])},n.scale.identity=function(){return function t(n){function e(t){return+t}e.invert=e;e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n};e.ticks=function(t){return Bi(n,t)};e.tickFormat=function(t,e){return Ni(n,t,e)};e.copy=function(){return t(n)};return e}([0,1])},n.svg.arc=function(){var t=Zi,n=Xi,e=Ji,r=Ki;function i(){var i=t.apply(this,arguments),o=n.apply(this,arguments),a=e.apply(this,arguments)+Yi,s=r.apply(this,arguments)+Yi,u=(s<a&&(u=a,a=s,s=u),s-a),c=u<ct?"0":"1",h=Math.cos(a),l=Math.sin(a),f=Math.cos(s),d=Math.sin(s);return u>=$i?i?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+i+"A"+i+","+i+" 0 1,0 0,"+-i+"A"+i+","+i+" 0 1,0 0,"+i+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":i?"M"+o*h+","+o*l+"A"+o+","+o+" 0 "+c+",1 "+o*f+","+o*d+"L"+i*f+","+i*d+"A"+i+","+i+" 0 "+c+",0 "+i*h+","+i*l+"Z":"M"+o*h+","+o*l+"A"+o+","+o+" 0 "+c+",1 "+o*f+","+o*d+"L0,0Z"}return i.innerRadius=function(n){return arguments.length?(t=qt(n),i):t},i.outerRadius=function(t){return arguments.length?(n=qt(t),i):n},i.startAngle=function(t){return arguments.length?(e=qt(t),i):e},i.endAngle=function(t){return arguments.length?(r=qt(t),i):r},i.centroid=function(){var i=(t.apply(this,arguments)+n.apply(this,arguments))/2,o=(e.apply(this,arguments)+r.apply(this,arguments))/2+Yi;return[Math.cos(o)*i,Math.sin(o)*i]},i};var Yi=-ct/2,$i=2*ct-1e-6;function Zi(t){return t.innerRadius}function Xi(t){return t.outerRadius}function Ji(t){return t.startAngle}function Ki(t){return t.endAngle}function Qi(t){for(var n,e,r,i=-1,o=t.length;++i<o;)e=(n=t[i])[0],r=n[1]+Yi,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function to(t){var n=Ve,e=Ve,r=0,i=We,o=On,a=je,s=a.key,u=a,c="L",h=.7;function l(s){var l,f,d,p=[],g=[],m=[],v=-1,y=s.length,b=qt(n),x=qt(r),M=n===e?function(){return f}:qt(e),k=r===i?function(){return d}:qt(i);function C(){p.push("M",a(t(m),h),c,u(t(g.reverse()),h),"Z")}for(;++v<y;)o.call(this,l=s[v],v)?(g.push([f=+b.call(this,l,v),d=+x.call(this,l,v)]),m.push([+M.call(this,l,v),+k.call(this,l,v)])):g.length&&(C(),g=[],m=[]);return g.length&&C(),p.length?p.join(""):null}return l.x=function(t){return arguments.length?(n=e=t,l):e},l.x0=function(t){return arguments.length?(n=t,l):n},l.x1=function(t){return arguments.length?(e=t,l):e},l.y=function(t){return arguments.length?(r=i=t,l):i},l.y0=function(t){return arguments.length?(r=t,l):r},l.y1=function(t){return arguments.length?(i=t,l):i},l.defined=function(t){return arguments.length?(o=t,l):o},l.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=qe.get(t)||je).key,u=a.reverse||a,c=a.closed?"M":"L",l):s},l.tension=function(t){return arguments.length?(h=t,l):h},l}function no(t){return t.radius}function eo(t){return[t.x,t.y]}function ro(){return 64}function io(){return"circle"}function oo(t){var n=Math.sqrt(t/ct);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}n.svg.line.radial=function(){var t=He(Qi);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ie.reverse=Pe,Pe.reverse=Ie,n.svg.area=function(){return to(jt)},n.svg.area.radial=function(){var t=to(Qi);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},n.svg.chord=function(){var t=ae,n=se,e=no,r=Ji,i=Ki;function o(e,r){var i=a(this,t,e,r),o=a(this,n,e,r);return"M"+i.p0+s(i.r,i.p1,i.a1-i.a0)+(function(t,n){return t.a0==n.a0&&t.a1==n.a1}(i,o)?u(i.r,i.p1,i.r,i.p0):u(i.r,i.p1,o.r,o.p0)+s(o.r,o.p1,o.a1-o.a0)+u(o.r,o.p1,i.r,i.p0))+"Z"}function a(t,n,o,a){var s=n.call(t,o,a),u=e.call(t,s,a),c=r.call(t,s,a)+Yi,h=i.call(t,s,a)+Yi;return{r:u,a0:c,a1:h,p0:[u*Math.cos(c),u*Math.sin(c)],p1:[u*Math.cos(h),u*Math.sin(h)]}}function s(t,n,e){return"A"+t+","+t+" 0 "+ +(e>ct)+",1 "+n}function u(t,n,e,r){return"Q 0,0 "+r}return o.radius=function(t){return arguments.length?(e=qt(t),o):e},o.source=function(n){return arguments.length?(t=qt(n),o):t},o.target=function(t){return arguments.length?(n=qt(t),o):n},o.startAngle=function(t){return arguments.length?(r=qt(t),o):r},o.endAngle=function(t){return arguments.length?(i=qt(t),o):i},o},n.svg.diagonal=function(){var t=ae,n=se,e=eo;function r(r,i){var o=t.call(this,r,i),a=n.call(this,r,i),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(u=u.map(e))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(n){return arguments.length?(t=qt(n),r):t},r.target=function(t){return arguments.length?(n=qt(t),r):n},r.projection=function(t){return arguments.length?(e=t,r):e},r},n.svg.diagonal.radial=function(){var t=n.svg.diagonal(),e=eo,r=t.projection;return t.projection=function(t){return arguments.length?r(function(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]+Yi;return[e*Math.cos(r),e*Math.sin(r)]}}(e=t)):e},t},n.svg.symbol=function(){var t=io,n=ro;function e(e,r){return(ao.get(t.call(this,e,r))||oo)(n.call(this,e,r))}return e.type=function(n){return arguments.length?(t=qt(n),e):t},e.size=function(t){return arguments.length?(n=qt(t),e):n},e};var ao=n.map({circle:oo,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*uo)),e=n*uo;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/so),e=n*so/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/so),e=n*so/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});n.svg.symbolTypes=ao.keys();var so=Math.sqrt(3),uo=Math.tan(30*lt);function co(t,n){return w(t,lo),t.id=n,t}var ho,lo=[],fo=0,po={ease:function(t){if(t<=0)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(t<.5?e:3*(t-n)+e-.75)},delay:0,duration:250};function go(t,n,e,r){var i=t.id;return J(t,"function"==typeof e?function(t,o,a){t.__transition__[i].tween.set(n,r(e.call(t,t.__data__,o,a)))}:(e=r(e),function(t){t.__transition__[i].tween.set(n,e)}))}function mo(t){return null==t&&(t=""),function(){this.textContent=t}}function vo(t,e,r,i){var o=t.__transition__||(t.__transition__={active:0,count:0}),a=o[r];if(!a){var s=i.time;return a=o[r]={tween:new h,event:n.dispatch("start","end"),time:s,ease:i.ease,delay:i.delay,duration:i.duration},++o.count,n.timer(function(i){var u=t.__data__,c=a.ease,h=a.event,l=a.delay,f=a.duration,d=[];return l<=i?p(i):n.timer(p,l,s),1;function p(i){return o.active>r?m():(o.active=r,h.start.call(t,u,e),a.tween.forEach(function(n,r){(r=r.call(t,u,e))&&d.push(r)}),g(i)||n.timer(g,0,s),1)}function g(n){if(o.active!==r)return m();for(var i=(n-l)/f,a=c(i),s=d.length;s>0;)d[--s].call(t,a);return i>=1?(m(),h.end.call(t,u,e),1):void 0}function m(){return--o.count?delete o[r]:delete t.__transition__,1}},0,s),a}}lo.call=R.call,lo.empty=R.empty,lo.node=R.node,n.transition=function(t){return arguments.length?ho?t.transition():t:tt.transition()},n.transition.prototype=lo,lo.select=function(t){var n,e,r,i=this.id,o=[];"function"!=typeof t&&(t=D(t));for(var a=-1,s=this.length;++a<s;){o.push(n=[]);for(var u=this[a],c=-1,h=u.length;++c<h;)(r=u[c])&&(e=t.call(r,r.__data__,c))?("__data__"in r&&(e.__data__=r.__data__),vo(e,c,i,r.__transition__[i]),n.push(e)):n.push(null)}return co(o,i)},lo.selectAll=function(t){var n,e,r,i,o,a=this.id,s=[];"function"!=typeof t&&(t=O(t));for(var u=-1,c=this.length;++u<c;)for(var h=this[u],l=-1,f=h.length;++l<f;)if(r=h[l]){o=r.__transition__[a],e=t.call(r,r.__data__,l),s.push(n=[]);for(var d=-1,p=e.length;++d<p;)vo(i=e[d],d,a,o),n.push(i)}return co(s,a)},lo.filter=function(t){var n,e,r=[];"function"!=typeof t&&(t=G(t));for(var i=0,o=this.length;i<o;i++){r.push(n=[]);for(var a,s=0,u=(a=this[i]).length;s<u;s++)(e=a[s])&&t.call(e,e.__data__,s)&&n.push(e)}return co(r,this.id,this.time).ease(this.ease())},lo.tween=function(t,n){var e=this.id;return arguments.length<2?this.node().__transition__[e].tween.get(t):J(this,null==n?function(n){n.__transition__[e].tween.remove(t)}:function(r){r.__transition__[e].tween.set(t,n)})},lo.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var r=yr(t),i=n.ns.qualify(t);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return go(this,"attr."+t,e,i.local?function(t){return null==t?a:(t+="",function(){var n,e=this.getAttributeNS(i.space,i.local);return e!==t&&(n=r(e,t),function(t){this.setAttributeNS(i.space,i.local,n(t))})})}:function(t){return null==t?o:(t+="",function(){var n,e=this.getAttribute(i);return e!==t&&(n=r(e,t),function(t){this.setAttribute(i,n(t))})})})},lo.attrTween=function(t,e){var r=n.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}:function(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}})},lo.style=function(t,n,e){var i=arguments.length;if(i<3){if("string"!=typeof t){for(e in i<2&&(n=""),t)this.style(e,t[e],n);return this}e=""}var o=yr(t);function a(){this.style.removeProperty(t)}return go(this,"style."+t,n,function(n){return null==n?a:(n+="",function(){var i,a=r.getComputedStyle(this,null).getPropertyValue(t);return a!==n&&(i=o(a,n),function(n){this.style.setProperty(t,i(n),e)})})})},lo.styleTween=function(t,n,e){return arguments.length<3&&(e=""),this.tween("style."+t,function(i,o){var a=n.call(this,i,o,r.getComputedStyle(this,null).getPropertyValue(t));return a&&function(n){this.style.setProperty(t,a(n),e)}})},lo.text=function(t){return go(this,"text",t,mo)},lo.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},lo.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=n.ease.apply(n,arguments)),J(this,function(n){n.__transition__[e].ease=t}))},lo.delay=function(t){var n=this.id;return J(this,"function"==typeof t?function(e,r,i){e.__transition__[n].delay=0|t.call(e,e.__data__,r,i)}:(t|=0,function(e){e.__transition__[n].delay=t}))},lo.duration=function(t){var n=this.id;return J(this,"function"==typeof t?function(e,r,i){e.__transition__[n].duration=Math.max(1,0|t.call(e,e.__data__,r,i))}:(t=Math.max(1,0|t),function(e){e.__transition__[n].duration=t}))},lo.each=function(t,n){var e=this.id;if(arguments.length<2){var r=po,i=ho;ho=e,J(this,function(n,r,i){po=n.__transition__[e],t.call(n,n.__data__,r,i)}),po=r,ho=i}else J(this,function(r){r.__transition__[e].event.on(t,n)});return this},lo.transition=function(){for(var t,n,e,r=this.id,i=++fo,o=[],a=0,s=this.length;a<s;a++){o.push(t=[]);for(var u,c=0,h=(u=this[a]).length;c<h;c++)(n=u[c])&&((e=Object.create(n.__transition__[r])).delay+=e.duration,vo(n,c,i,e)),t.push(n)}return co(o,i)},n.svg.axis=function(){var t,e=n.scale.linear(),r=yo,i=6,o=6,a=6,s=3,u=[10],c=null,h=0;function l(l){l.each(function(){var l,f=n.select(this),d=null==c?e.ticks?e.ticks.apply(e,u):e.domain():c,p=null==t?e.tickFormat?e.tickFormat.apply(e,u):String:t,g=function(t,n,e){if(r=[],e&&n.length>1){for(var r,i,o,a=Si(t.domain()),s=-1,u=n.length,c=(n[1]-n[0])/++e;++s<u;)for(i=e;--i>0;)(o=+n[s]-i*c)>=a[0]&&r.push(o);for(--s,i=0;++i<e&&(o=+n[s]+i*c)<a[1];)r.push(o)}return r}(e,d,h),m=f.selectAll(".tick.minor").data(g,String),v=m.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),y=n.transition(m.exit()).style("opacity",1e-6).remove(),b=n.transition(m).style("opacity",1),x=f.selectAll(".tick.major").data(d,String),M=x.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),k=n.transition(x.exit()).style("opacity",1e-6).remove(),C=n.transition(x).style("opacity",1),_=Fi(e),w=f.selectAll(".domain").data([0]),T=(w.enter().append("path").attr("class","domain"),n.transition(w)),S=e.copy(),F=this.__chart__||S;this.__chart__=S,M.append("line"),M.append("text");var E=M.select("line"),A=C.select("line"),L=x.select("text").text(p),R=M.select("text"),D=C.select("text");switch(r){case"bottom":l=xo,v.attr("y2",o),b.attr("x2",0).attr("y2",o),E.attr("y2",i),R.attr("y",Math.max(i,0)+s),A.attr("x2",0).attr("y2",i),D.attr("x",0).attr("y",Math.max(i,0)+s),L.attr("dy",".71em").style("text-anchor","middle"),T.attr("d","M"+_[0]+","+a+"V0H"+_[1]+"V"+a);break;case"top":l=xo,v.attr("y2",-o),b.attr("x2",0).attr("y2",-o),E.attr("y2",-i),R.attr("y",-(Math.max(i,0)+s)),A.attr("x2",0).attr("y2",-i),D.attr("x",0).attr("y",-(Math.max(i,0)+s)),L.attr("dy","0em").style("text-anchor","middle"),T.attr("d","M"+_[0]+","+-a+"V0H"+_[1]+"V"+-a);break;case"left":l=Mo,v.attr("x2",-o),b.attr("x2",-o).attr("y2",0),E.attr("x2",-i),R.attr("x",-(Math.max(i,0)+s)),A.attr("x2",-i).attr("y2",0),D.attr("x",-(Math.max(i,0)+s)).attr("y",0),L.attr("dy",".32em").style("text-anchor","end"),T.attr("d","M"+-a+","+_[0]+"H0V"+_[1]+"H"+-a);break;case"right":l=Mo,v.attr("x2",o),b.attr("x2",o).attr("y2",0),E.attr("x2",i),R.attr("x",Math.max(i,0)+s),A.attr("x2",i).attr("y2",0),D.attr("x",Math.max(i,0)+s).attr("y",0),L.attr("dy",".32em").style("text-anchor","start"),T.attr("d","M"+a+","+_[0]+"H0V"+_[1]+"H"+a)}if(e.ticks)M.call(l,F),C.call(l,S),k.call(l,S),v.call(l,F),b.call(l,S),y.call(l,S);else{var O=S.rangeBand()/2,B=function(t){return S(t)+O};M.call(l,B),C.call(l,B)}})}return l.scale=function(t){return arguments.length?(e=t,l):e},l.orient=function(t){return arguments.length?(r=t in bo?t+"":yo,l):r},l.ticks=function(){return arguments.length?(u=arguments,l):u},l.tickValues=function(t){return arguments.length?(c=t,l):c},l.tickFormat=function(n){return arguments.length?(t=n,l):t},l.tickSize=function(t,n){if(!arguments.length)return i;var e=arguments.length-1;return i=+t,o=e>1?+n:i,a=e>0?+arguments[e]:i,l},l.tickPadding=function(t){return arguments.length?(s=+t,l):s},l.tickSubdivide=function(t){return arguments.length?(h=+t,l):h},l};var yo="bottom",bo={top:1,right:1,bottom:1,left:1};function xo(t,n){t.attr("transform",function(t){return"translate("+n(t)+",0)"})}function Mo(t,n){t.attr("transform",function(t){return"translate(0,"+n(t)+")"})}n.svg.brush=function(){var t,e=M(u,"brushstart","brush","brushend"),i=null,o=null,a=Co[0],s=[[0,0],[0,0]];function u(t){t.each(function(){var t,e=n.select(this),r=e.selectAll(".background").data([0]),s=e.selectAll(".extent").data([0]),d=e.selectAll(".resize").data(a,String);e.style("pointer-events","all").on("mousedown.brush",f).on("touchstart.brush",f),r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.enter().append("rect").attr("class","extent").style("cursor","move"),d.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ko[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),d.style("display",u.empty()?"none":null),d.exit().remove(),i&&(t=Fi(i),r.attr("x",t[0]).attr("width",t[1]-t[0]),h(e)),o&&(t=Fi(o),r.attr("y",t[0]).attr("height",t[1]-t[0]),l(e)),c(e)})}function c(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+s[+/e$/.test(t)][0]+","+s[+/^s/.test(t)][1]+")"})}function h(t){t.select(".extent").attr("x",s[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1][0]-s[0][0])}function l(t){t.select(".extent").attr("y",s[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1][1]-s[0][1])}function f(){var a,f,d=this,p=n.select(n.event.target),g=e.of(d,arguments),m=n.select(d),y=p.datum(),b=!/^(n|s)$/.test(y)&&i,x=!/^(e|w)$/.test(y)&&o,M=p.classed("extent"),k=T(),C=n.select(r).on("mousemove.brush",S).on("mouseup.brush",E).on("touchmove.brush",S).on("touchend.brush",E).on("keydown.brush",function(){32==n.event.keyCode&&(M||(a=null,k[0]-=s[1][0],k[1]-=s[1][1],M=2),v())}).on("keyup.brush",function(){32==n.event.keyCode&&2==M&&(k[0]+=s[1][0],k[1]+=s[1][1],M=0,v())});if(M)k[0]=s[0][0]-k[0],k[1]=s[0][1]-k[1];else if(y){var _=+/w$/.test(y),w=+/^n/.test(y);f=[s[1-_][0]-k[0],s[1-w][1]-k[1]],k[0]=s[_][0],k[1]=s[w][1]}else n.event.altKey&&(a=k.slice());function T(){var t=n.event.changedTouches;return t?n.touches(d,t)[0]:n.mouse(d)}function S(){var t=T(),e=!1;f&&(t[0]+=f[0],t[1]+=f[1]),M||(n.event.altKey?(a||(a=[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]),k[0]=s[+(t[0]<a[0])][0],k[1]=s[+(t[1]<a[1])][1]):a=null),b&&F(t,i,0)&&(h(m),e=!0),x&&F(t,o,1)&&(l(m),e=!0),e&&(c(m),g({type:"brush",mode:M?"move":"resize"}))}function F(n,e,r){var i,o,u=Fi(e),c=u[0],h=u[1],l=k[r],f=s[1][r]-s[0][r];if(M&&(c-=l,h-=f+l),i=Math.max(c,Math.min(h,n[r])),M?o=(i+=l)+f:(a&&(l=Math.max(c,Math.min(h,2*a[r]-i))),l<i?(o=i,i=l):o=l),s[0][r]!==i||s[1][r]!==o)return t=null,s[0][r]=i,s[1][r]=o,!0}function E(){S(),m.style("pointer-events","all").selectAll(".resize").style("display",u.empty()?"none":null),n.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),g({type:"brushend"}),v()}m.style("pointer-events","none").selectAll(".resize").style("display",null),n.select("body").style("cursor",p.style("cursor")),g({type:"brushstart"}),S(),v()}return u.x=function(t){return arguments.length?(a=Co[!(i=t)<<1|!o],u):i},u.y=function(t){return arguments.length?(a=Co[!i<<1|!(o=t)],u):o},u.extent=function(n){var e,r,a,c,h;return arguments.length?(t=[[0,0],[0,0]],i&&(e=n[0],r=n[1],o&&(e=e[0],r=r[0]),t[0][0]=e,t[1][0]=r,i.invert&&(e=i(e),r=i(r)),r<e&&(h=e,e=r,r=h),s[0][0]=0|e,s[1][0]=0|r),o&&(a=n[0],c=n[1],i&&(a=a[1],c=c[1]),t[0][1]=a,t[1][1]=c,o.invert&&(a=o(a),c=o(c)),c<a&&(h=a,a=c,c=h),s[0][1]=0|a,s[1][1]=0|c),u):(n=t||s,i&&(e=n[0][0],r=n[1][0],t||(e=s[0][0],r=s[1][0],i.invert&&(e=i.invert(e),r=i.invert(r)),r<e&&(h=e,e=r,r=h))),o&&(a=n[0][1],c=n[1][1],t||(a=s[0][1],c=s[1][1],o.invert&&(a=o.invert(a),c=o.invert(c)),c<a&&(h=a,a=c,c=h))),i&&o?[[e,a],[r,c]]:i?[e,r]:o&&[a,c])},u.clear=function(){return t=null,s[0][0]=s[0][1]=s[1][0]=s[1][1]=0,u},u.empty=function(){return i&&s[0][0]===s[1][0]||o&&s[0][1]===s[1][1]},n.rebind(u,e,"on")};var ko={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Co=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];n.time={};var _o=Date;function wo(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}wo.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){To.setUTCDate.apply(this._,arguments)},setDay:function(){To.setUTCDay.apply(this._,arguments)},setFullYear:function(){To.setUTCFullYear.apply(this._,arguments)},setHours:function(){To.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){To.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){To.setUTCMinutes.apply(this._,arguments)},setMonth:function(){To.setUTCMonth.apply(this._,arguments)},setSeconds:function(){To.setUTCSeconds.apply(this._,arguments)},setTime:function(){To.setTime.apply(this._,arguments)}};var To=Date.prototype,So=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Fo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Eo=["January","February","March","April","May","June","July","August","September","October","November","December"],Ao=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Lo(t,n,e){function r(n){var e=t(n),r=o(e,1);return n-e<r-n?e:r}function i(e){return n(e=t(new _o(e-1)),1),e}function o(t,e){return n(t=new _o(+t),e),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;a<r;)e(a)%o||s.push(new Date(+a)),n(a,1);else for(;a<r;)s.push(new Date(+a)),n(a,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=Ro(t);return s.floor=s,s.round=Ro(r),s.ceil=Ro(i),s.offset=Ro(o),s.range=function(t,n,e){try{_o=wo;var r=new wo;return r._=t,a(r,n,e)}finally{_o=Date}},t}function Ro(t){return function(n,e){try{_o=wo;var r=new wo;return r._=n,t(r,e)._}finally{_o=Date}}}function Do(t,n,e,r){for(var i,o,a=0,s=n.length,u=e.length;a<s;){if(r>=u)return-1;if(37===(i=n.charCodeAt(a++))){if(!(o=Go[n.charAt(a++)])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function Oo(t){return new RegExp("^(?:"+t.map(n.requote).join("|")+")","i")}function Bo(t){for(var n=new h,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function No(t,n,e){var r=(t+="").length;return r<e?new Array(e-r+1).join(n)+t:t}n.time.year=Lo(function(t){return(t=n.time.day(t)).setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),n.time.years=n.time.year.range,n.time.years.utc=n.time.year.utc.range,n.time.day=Lo(function(t){var n=new _o(1970,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),n.time.days=n.time.day.range,n.time.days.utc=n.time.day.utc.range,n.time.dayOfYear=function(t){var e=n.time.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].forEach(function(t,e){t=t.toLowerCase(),e=7-e;var r=n.time[t]=Lo(function(t){return(t=n.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var r=n.time.year(t).getDay();return Math.floor((n.time.dayOfYear(t)+(r+e)%7)/7)-(r!==e)});n.time[t+"s"]=r.range,n.time[t+"s"].utc=r.utc.range,n.time[t+"OfYear"]=function(t){var r=n.time.year(t).getDay();return Math.floor((n.time.dayOfYear(t)+(r+e)%7)/7)}}),n.time.week=n.time.sunday,n.time.weeks=n.time.sunday.range,n.time.weeks.utc=n.time.sunday.utc.range,n.time.weekOfYear=n.time.sundayOfYear,n.time.format=function(t){var n=t.length;function e(e){for(var r,i,o,a=[],s=-1,u=0;++s<n;)37===t.charCodeAt(s)&&(a.push(t.substring(u,s)),null!=(i=Io[r=t.charAt(++s)])&&(r=t.charAt(++s)),(o=Po[r])&&(r=o(e,null==i?"e"===r?" ":"0":i)),a.push(r),u=s+1);return a.push(t.substring(u,s)),a.join("")}return e.parse=function(n){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Do(e,t,n,0)!=n.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var r=new _o;return r.setFullYear(e.y,e.m,e.d),r.setHours(e.H,e.M,e.S,e.L),r},e.toString=function(){return t},e};var zo=Oo(So),Ho=Oo(Fo),Vo=Oo(Eo),Wo=Bo(Eo),qo=Oo(Ao),jo=Bo(Ao),Io={"-":"",_:" ",0:"0"},Po={a:function(t){return Fo[t.getDay()]},A:function(t){return So[t.getDay()]},b:function(t){return Ao[t.getMonth()]},B:function(t){return Eo[t.getMonth()]},c:n.time.format("%a %b %e %X %Y"),d:function(t,n){return No(t.getDate(),n,2)},e:function(t,n){return No(t.getDate(),n,2)},H:function(t,n){return No(t.getHours(),n,2)},I:function(t,n){return No(t.getHours()%12||12,n,2)},j:function(t,e){return No(1+n.time.dayOfYear(t),e,3)},L:function(t,n){return No(t.getMilliseconds(),n,3)},m:function(t,n){return No(t.getMonth()+1,n,2)},M:function(t,n){return No(t.getMinutes(),n,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,n){return No(t.getSeconds(),n,2)},U:function(t,e){return No(n.time.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return No(n.time.mondayOfYear(t),e,2)},x:n.time.format("%m/%d/%Y"),X:n.time.format("%H:%M:%S"),y:function(t,n){return No(t.getFullYear()%100,n,2)},Y:function(t,n){return No(t.getFullYear()%1e4,n,4)},Z:function(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=~~(Math.abs(n)/60),i=Math.abs(n)%60;return e+No(r,"0",2)+No(i,"0",2)},"%":function(){return"%"}},Go={a:function(t,n,e){Ho.lastIndex=0;var r=Ho.exec(n.substring(e));return r?e+=r[0].length:-1},A:function(t,n,e){zo.lastIndex=0;var r=zo.exec(n.substring(e));return r?e+=r[0].length:-1},b:function(t,n,e){qo.lastIndex=0;var r=qo.exec(n.substring(e));return r?(t.m=jo.get(r[0].toLowerCase()),e+=r[0].length):-1},B:function(t,n,e){Vo.lastIndex=0;var r=Vo.exec(n.substring(e));return r?(t.m=Wo.get(r[0].toLowerCase()),e+=r[0].length):-1},c:function(t,n,e){return Do(t,Po.c.toString(),n,e)},d:Uo,e:Uo,H:Yo,I:Yo,L:function(t,n,e){$o.lastIndex=0;var r=$o.exec(n.substring(e,e+3));return r?(t.L=+r[0],e+=r[0].length):-1},m:function(t,n,e){$o.lastIndex=0;var r=$o.exec(n.substring(e,e+2));return r?(t.m=r[0]-1,e+=r[0].length):-1},M:function(t,n,e){$o.lastIndex=0;var r=$o.exec(n.substring(e,e+2));return r?(t.M=+r[0],e+=r[0].length):-1},p:function(t,n,e){var r=Zo.get(n.substring(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)},S:function(t,n,e){$o.lastIndex=0;var r=$o.exec(n.substring(e,e+2));return r?(t.S=+r[0],e+=r[0].length):-1},x:function(t,n,e){return Do(t,Po.x.toString(),n,e)},X:function(t,n,e){return Do(t,Po.X.toString(),n,e)},y:function(t,n,e){$o.lastIndex=0;var r=$o.exec(n.substring(e,e+2));return r?(t.y=function(t){return t+(t>68?1900:2e3)}(+r[0]),e+=r[0].length):-1},Y:function(t,n,e){$o.lastIndex=0;var r=$o.exec(n.substring(e,e+4));return r?(t.y=+r[0],e+=r[0].length):-1}};function Uo(t,n,e){$o.lastIndex=0;var r=$o.exec(n.substring(e,e+2));return r?(t.d=+r[0],e+=r[0].length):-1}function Yo(t,n,e){$o.lastIndex=0;var r=$o.exec(n.substring(e,e+2));return r?(t.H=+r[0],e+=r[0].length):-1}var $o=/^\s*\d+/;var Zo=n.map({am:0,pm:1});n.time.format.utc=function(t){var e=n.time.format(t);function r(t){try{var n=new(_o=wo);return n._=t,e(n)}finally{_o=Date}}return r.parse=function(t){try{_o=wo;var n=e.parse(t);return n&&n._}finally{_o=Date}},r.toString=e.toString,r};var Xo=n.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");function Jo(t){return t.toISOString()}function Ko(t,e,r){function i(n){return t(n)}return i.invert=function(n){return Qo(t.invert(n))},i.domain=function(n){return arguments.length?(t.domain(n),i):t.domain().map(Qo)},i.nice=function(t){return i.domain(Ai(i.domain(),function(){return t}))},i.ticks=function(r,o){var a=Si(i.domain());if("function"!=typeof r){var s=(a[1]-a[0])/r,u=n.bisect(ra,s);if(u==ra.length)return e.year(a,r);if(!u)return t.ticks(r).map(Qo);Math.log(s/ra[u-1])<Math.log(ra[u]/s)&&--u,o=(r=e[u])[1],r=r[0].range}return r(a[0],new Date(+a[1]+1),o)},i.tickFormat=function(){return r},i.copy=function(){return Ko(t.copy(),e,r)},Ri(i,t)}function Qo(t){return new Date(t)}function ta(t){return function(n){for(var e=t.length-1,r=t[e];!r[1](n);)r=t[--e];return r[0](n)}}function na(t){var n=new Date(t,0,1);return n.setFullYear(t),n}function ea(t){var n=t.getFullYear(),e=na(n);return n+(t-e)/(na(n+1)-e)}n.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Jo:Xo,Jo.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},Jo.toString=Xo.toString,n.time.second=Lo(function(t){return new _o(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),n.time.seconds=n.time.second.range,n.time.seconds.utc=n.time.second.utc.range,n.time.minute=Lo(function(t){return new _o(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),n.time.minutes=n.time.minute.range,n.time.minutes.utc=n.time.minute.utc.range,n.time.hour=Lo(function(t){var n=t.getTimezoneOffset()/60;return new _o(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),n.time.hours=n.time.hour.range,n.time.hours.utc=n.time.hour.utc.range,n.time.month=Lo(function(t){return(t=n.time.day(t)).setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),n.time.months=n.time.month.range,n.time.months.utc=n.time.month.utc.range;var ra=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ia=[[n.time.second,1],[n.time.second,5],[n.time.second,15],[n.time.second,30],[n.time.minute,1],[n.time.minute,5],[n.time.minute,15],[n.time.minute,30],[n.time.hour,1],[n.time.hour,3],[n.time.hour,6],[n.time.hour,12],[n.time.day,1],[n.time.day,2],[n.time.week,1],[n.time.month,1],[n.time.month,3],[n.time.year,1]],oa=[[n.time.format("%Y"),On],[n.time.format("%B"),function(t){return t.getMonth()}],[n.time.format("%b %d"),function(t){return 1!=t.getDate()}],[n.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[n.time.format("%I %p"),function(t){return t.getHours()}],[n.time.format("%I:%M"),function(t){return t.getMinutes()}],[n.time.format(":%S"),function(t){return t.getSeconds()}],[n.time.format(".%L"),function(t){return t.getMilliseconds()}]],aa=n.scale.linear(),sa=ta(oa);ia.year=function(t,n){return aa.domain(t.map(ea)).ticks(n).map(na)},n.time.scale=function(){return Ko(n.scale.linear(),ia,sa)};var ua=ia.map(function(t){return[t[0].utc,t[1]]}),ca=ta([[n.time.format.utc("%Y"),On],[n.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[n.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[n.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[n.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[n.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[n.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[n.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]]);function ha(t){var n=new Date(Date.UTC(t,0,1));return n.setUTCFullYear(t),n}function la(t){var n=t.getUTCFullYear(),e=ha(n);return n+(t-e)/(ha(n+1)-e)}function fa(t){return t.responseText}function da(t){return JSON.parse(t.responseText)}function pa(t){var n=e.createRange();return n.selectNode(e.body),n.createContextualFragment(t.responseText)}function ga(t){return t.responseXML}ua.year=function(t,n){return aa.domain(t.map(la)).ticks(n).map(ha)},n.time.scale.utc=function(){return Ko(n.scale.linear(),ua,ca)},n.text=function(){return n.xhr.apply(n,arguments).response(fa)},n.json=function(t,e){return n.xhr(t,"application/json",e).response(da)},n.html=function(t,e){return n.xhr(t,"text/html",e).response(pa)},n.xml=function(){return n.xhr.apply(n,arguments).response(ga)},t.exports=n}()}).call(this,e(10)(t))},813:function(t,n,e){(function(t){!function(t){var n=e(812);function r(t,n){return function(e){return e&&t.hasOwnProperty(e.type)?t[e.type](e):n}}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function o(t,n){f.hasOwnProperty(t.type)&&f[t.type](t,n)}function a(t,n){for(var e=t.coordinates,r=0,i=e.length;r<i;r++)n.apply(null,e[r])}function s(t){return t.source}function u(t){return t.target}function c(){function t(t){var n=Math.sin(t*=p)*g,e=Math.sin(p-t)*g,r=e*o+n*f,s=e*a+n*d,u=e*i+n*h;return[Math.atan2(s,r)/l,Math.atan2(u,Math.sqrt(r*r+s*s))/l]}var n,e,r,i,o,a,s,u,c,h,f,d,p,g;return t.distance=function(){return null==p&&(g=1/Math.sin(p=Math.acos(Math.max(-1,Math.min(1,i*h+r*c*Math.cos(s-n)))))),p},t.source=function(s){var u=Math.cos(n=s[0]*l),c=Math.sin(n);return r=Math.cos(e=s[1]*l),i=Math.sin(e),o=r*u,a=r*c,p=null,t},t.target=function(n){var e=Math.cos(s=n[0]*l),r=Math.sin(s);return c=Math.cos(u=n[1]*l),h=Math.sin(u),f=c*e,d=c*r,p=null,t},t}function h(t,n){var e=c().source(t).target(n);return e.distance(),e}n.geo={};var l=Math.PI/180;n.geo.azimuthal=function(){function t(t){var n,r=t[0]*l-e,c=t[1]*l,h=Math.cos(r),f=Math.sin(r),d=Math.cos(c),p=Math.sin(c),g="orthographic"!==a?o*p+i*d*h:null,m="stereographic"===a?1/(1+g):"gnomonic"===a?1/g:"equidistant"===a?(n=Math.acos(g))?n/Math.sin(n):0:"equalarea"===a?Math.sqrt(2/(1+g)):1,v=m*(o*d*h-i*p);return[s*(m*d*f)+u[0],s*v+u[1]]}var n,e,r,i,o,a="orthographic",s=200,u=[480,250];return t.invert=function(t){var n=(t[0]-u[0])/s,r=(t[1]-u[1])/s,c=Math.sqrt(n*n+r*r),h="stereographic"===a?2*Math.atan(c):"gnomonic"===a?Math.atan(c):"equidistant"===a?c:"equalarea"===a?2*Math.asin(.5*c):Math.asin(c),f=Math.sin(h),d=Math.cos(h);return[(e+Math.atan2(n*f,c*i*d+r*o*f))/l,Math.asin(d*o-(c?r*f*i/c:0))/l]},t.mode=function(n){return arguments.length?(a=n+"",t):a},t.origin=function(a){return arguments.length?(e=(n=a)[0]*l,r=n[1]*l,i=Math.cos(r),o=Math.sin(r),t):n},t.scale=function(n){return arguments.length?(s=+n,t):s},t.translate=function(n){return arguments.length?(u=[+n[0],+n[1]],t):u},t.origin([0,0])},n.geo.albers=function(){function t(t){var n=r*(l*t[0]-e),a=Math.sqrt(i-2*r*Math.sin(l*t[1]))/r;return[u*a*Math.sin(n)+c[0],u*(a*Math.cos(n)-o)+c[1]]}function n(){var n=l*s[0],u=l*s[1],c=l*a[1],h=Math.sin(n),f=Math.cos(n);return e=l*a[0],r=.5*(h+Math.sin(u)),i=f*f+2*r*h,o=Math.sqrt(i-2*r*Math.sin(c))/r,t}var e,r,i,o,a=[-98,38],s=[29.5,45.5],u=1e3,c=[480,250];return t.invert=function(t){var n=(t[0]-c[0])/u,a=(t[1]-c[1])/u,s=o+a,h=Math.atan2(n,s),f=Math.sqrt(n*n+s*s);return[(e+h/r)/l,Math.asin((i-f*f*r*r)/(2*r))/l]},t.origin=function(t){return arguments.length?(a=[+t[0],+t[1]],n()):a},t.parallels=function(t){return arguments.length?(s=[+t[0],+t[1]],n()):s},t.scale=function(n){return arguments.length?(u=+n,t):u},t.translate=function(n){return arguments.length?(c=[+n[0],+n[1]],t):c},n()},n.geo.albersUsa=function(){function t(t){var n=t[0],a=t[1];return(a>50?r:n<-140?i:a<21?o:e)(t)}var e=n.geo.albers(),r=n.geo.albers().origin([-160,60]).parallels([55,65]),i=n.geo.albers().origin([-160,20]).parallels([8,18]),o=n.geo.albers().origin([-60,10]).parallels([8,18]);return t.scale=function(n){return arguments.length?(e.scale(n),r.scale(.6*n),i.scale(n),o.scale(1.5*n),t.translate(e.translate())):e.scale()},t.translate=function(n){if(!arguments.length)return e.translate();var a=e.scale()/1e3,s=n[0],u=n[1];return e.translate(n),r.translate([s-400*a,u+170*a]),i.translate([s-190*a,u+200*a]),o.translate([s+580*a,u+430*a]),t},t.scale(e.scale())},n.geo.bonne=function(){function t(t){var s=t[0]*l-n,u=t[1]*l-e;if(r){var c=i+r-u,h=s*Math.cos(u)/c;s=c*Math.sin(h),u=c*Math.cos(h)-i}else s*=Math.cos(u),u*=-1;return[o*s+a[0],o*u+a[1]]}var n,e,r,i,o=200,a=[480,250];return t.invert=function(t){var e=(t[0]-a[0])/o,s=(t[1]-a[1])/o;if(r){var u=i+s,c=Math.sqrt(e*e+u*u);s=i+r-c,e=n+c*Math.atan2(e,u)/Math.cos(s)}else s*=-1,e/=Math.cos(s);return[e/l,s/l]},t.parallel=function(n){return arguments.length?(i=1/Math.tan(r=n*l),t):r/l},t.origin=function(r){return arguments.length?(n=r[0]*l,e=r[1]*l,t):[n/l,e/l]},t.scale=function(n){return arguments.length?(o=+n,t):o},t.translate=function(n){return arguments.length?(a=[+n[0],+n[1]],t):a},t.origin([0,0]).parallel(45)},n.geo.equirectangular=function(){function t(t){var r=t[0]/360,i=-t[1]/360;return[n*r+e[0],n*i+e[1]]}var n=500,e=[480,250];return t.invert=function(t){return[360*((t[0]-e[0])/n),-360*((t[1]-e[1])/n)]},t.scale=function(e){return arguments.length?(n=+e,t):n},t.translate=function(n){return arguments.length?(e=[+n[0],+n[1]],t):e},t},n.geo.mercator=function(){function t(t){var r=t[0]/360,i=-Math.log(Math.tan(Math.PI/4+t[1]*l/2))/l/360;return[n*r+e[0],n*Math.max(-.5,Math.min(.5,i))+e[1]]}var n=500,e=[480,250];return t.invert=function(t){var r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return[360*r,2*Math.atan(Math.exp(-360*i*l))/l-90]},t.scale=function(e){return arguments.length?(n=+e,t):n},t.translate=function(n){return arguments.length?(e=[+n[0],+n[1]],t):e},t},n.geo.path=function(){function t(t,n){"function"==typeof u&&(c=i(u.apply(this,arguments))),f(t);var e=l.length?l.join(""):null;return l=[],e}function e(t){return h(t).join(",")}function o(t){for(var n=s(t[0]),e=0,r=t.length;++e<r;)n-=s(t[e]);return n}function a(t){for(var e=n.geom.polygon(t[0].map(h)),r=e.area(),i=e.centroid(r<0?(r*=-1,1):-1),o=i[0],a=i[1],s=r,u=0,c=t.length;++u<c;)r=(e=n.geom.polygon(t[u].map(h))).area(),o-=(i=e.centroid(r<0?(r*=-1,1):-1))[0],a-=i[1],s-=r;return[o,a,6*s]}function s(t){return Math.abs(n.geom.polygon(t.map(h)).area())}var u=4.5,c=i(u),h=n.geo.albersUsa(),l=[],f=r({FeatureCollection:function(t){for(var n=t.features,e=-1,r=n.length;++e<r;)l.push(f(n[e].geometry))},Feature:function(t){f(t.geometry)},Point:function(t){l.push("M",e(t.coordinates),c)},MultiPoint:function(t){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)l.push("M",e(n[r]),c)},LineString:function(t){var n=t.coordinates,r=-1,i=n.length;for(l.push("M");++r<i;)l.push(e(n[r]),"L");l.pop()},MultiLineString:function(t){for(var n,r,i,o=t.coordinates,a=-1,s=o.length;++a<s;){for(r=-1,i=(n=o[a]).length,l.push("M");++r<i;)l.push(e(n[r]),"L");l.pop()}},Polygon:function(t){for(var n,r,i,o=t.coordinates,a=-1,s=o.length;++a<s;)if(r=-1,(i=(n=o[a]).length-1)>0){for(l.push("M");++r<i;)l.push(e(n[r]),"L");l[l.length-1]="Z"}},MultiPolygon:function(t){for(var n,r,i,o,a,s,u=t.coordinates,c=-1,h=u.length;++c<h;)for(r=-1,i=(n=u[c]).length;++r<i;)if(a=-1,(s=(o=n[r]).length-1)>0){for(l.push("M");++a<s;)l.push(e(o[a]),"L");l[l.length-1]="Z"}},GeometryCollection:function(t){for(var n=t.geometries,e=-1,r=n.length;++e<r;)l.push(f(n[e]))}}),d=t.area=r({FeatureCollection:function(t){for(var n=0,e=t.features,r=-1,i=e.length;++r<i;)n+=d(e[r]);return n},Feature:function(t){return d(t.geometry)},Polygon:function(t){return o(t.coordinates)},MultiPolygon:function(t){for(var n=0,e=t.coordinates,r=-1,i=e.length;++r<i;)n+=o(e[r]);return n},GeometryCollection:function(t){for(var n=0,e=t.geometries,r=-1,i=e.length;++r<i;)n+=d(e[r]);return n}},0),p=t.centroid=r({Feature:function(t){return p(t.geometry)},Polygon:function(t){var n=a(t.coordinates);return[n[0]/n[2],n[1]/n[2]]},MultiPolygon:function(t){for(var n,e=t.coordinates,r=0,i=0,o=0,s=-1,u=e.length;++s<u;)r+=(n=a(e[s]))[0],i+=n[1],o+=n[2];return[r/o,i/o]}});return t.projection=function(n){return h=n,t},t.pointRadius=function(n){return"function"==typeof n?u=n:c=i(u=+n),t},t},n.geo.bounds=function(t){var n=1/0,e=1/0,r=-1/0,i=-1/0;return o(t,function(t,o){t<n&&(n=t),t>r&&(r=t),o<e&&(e=o),o>i&&(i=o)}),[[n,e],[r,i]]};var f={Feature:function(t,n){o(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=0,i=e.length;r<i;r++)o(e[r].geometry,n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=0,i=e.length;r<i;r++)o(e[r],n)},LineString:a,MultiLineString:function(t,n){for(var e=t.coordinates,r=0,i=e.length;r<i;r++)for(var o=e[r],a=0,s=o.length;a<s;a++)n.apply(null,o[a])},MultiPoint:a,MultiPolygon:function(t,n){for(var e=t.coordinates,r=0,i=e.length;r<i;r++)for(var o=e[r][0],a=0,s=o.length;a<s;a++)n.apply(null,o[a])},Point:function(t,n){n.apply(null,t.coordinates)},Polygon:function(t,n){for(var e=t.coordinates[0],r=0,i=e.length;r<i;r++)n.apply(null,e[r])}};n.geo.circle=function(){function t(){}function e(t){return u.distance(t)<s}function i(t){for(var n,e,r,i,o,a=-1,c=t.length,l=[];++a<c;)(o=u.distance(r=t[a]))<s?(e&&l.push(h(e,r)((i-s)/(i-o))),l.push(r),n=e=null):(e=r,!n&&l.length&&(l.push(h(l[l.length-1],e)((s-i)/(o-i))),n=e)),i=o;return n=t[0],!(e=l[0])||r[0]!==n[0]||r[1]!==n[1]||r[0]===e[0]&&r[1]===e[1]||l.push(e),function(t){var n,e,r,i=0,o=t.length,a=o?[t[0]]:t,s=u.source();for(;++i<o;)for(r=u.source(t[i-1])(t[i]).coordinates,n=0,e=r.length;++n<e;)a.push(r[n]);return u.source(s),a}(l)}var o=[0,0],a=89.99,s=a*l,u=n.geo.greatArc().source(o).target(d3_identity);t.clip=function(t){return"function"==typeof o&&u.source(o.apply(this,arguments)),c(t)||null};var c=r({FeatureCollection:function(t){var n=t.features.map(c).filter(d3_identity);return n&&((t=Object.create(t)).features=n,t)},Feature:function(t){var n=c(t.geometry);return n&&((t=Object.create(t)).geometry=n,t)},Point:function(t){return e(t.coordinates)&&t},MultiPoint:function(t){var n=t.coordinates.filter(e);return n.length&&{type:t.type,coordinates:n}},LineString:function(t){var n=i(t.coordinates);return n.length&&((t=Object.create(t)).coordinates=n,t)},MultiLineString:function(t){var n=t.coordinates.map(i).filter(function(t){return t.length});return n.length&&((t=Object.create(t)).coordinates=n,t)},Polygon:function(t){var n=t.coordinates.map(i);return n[0].length&&((t=Object.create(t)).coordinates=n,t)},MultiPolygon:function(t){var n=t.coordinates.map(function(t){return t.map(i)}).filter(function(t){return t[0].length});return n.length&&((t=Object.create(t)).coordinates=n,t)},GeometryCollection:function(t){var n=t.geometries.map(c).filter(d3_identity);return n.length&&((t=Object.create(t)).geometries=n,t)}});return t.origin=function(n){return arguments.length?("function"!=typeof(o=n)&&u.source(o),t):o},t.angle=function(n){return arguments.length?(s=(a=+n)*l,t):a},n.rebind(t,u,"precision")},n.geo.greatArc=function(){function t(){for(var r=t.distance.apply(this,arguments),i=0,s=o/r,u=[n];(i+=s)<1;)u.push(a(i));return u.push(e),{type:"LineString",coordinates:u}}var n,e,r=s,i=u,o=6*l,a=c();return t.distance=function(){return"function"==typeof r&&a.source(n=r.apply(this,arguments)),"function"==typeof i&&a.target(e=i.apply(this,arguments)),a.distance()},t.source=function(e){return arguments.length?("function"!=typeof(r=e)&&a.source(n=r),t):r},t.target=function(n){return arguments.length?("function"!=typeof(i=n)&&a.target(e=i),t):i},t.precision=function(n){return arguments.length?(o=n*l,t):o/l},t},n.geo.greatCircle=n.geo.circle,t.exports=n}(t)}).call(this,e(10)(t))}}]);